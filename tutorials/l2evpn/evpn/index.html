<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Open documentation for open Network OS" name=description><meta content="SR Linux" name=author><link href=https://learn.srlinux.dev/tutorials/l2evpn/evpn/ rel=canonical><link href=../fabric/ rel=prev><link href=../summary/ rel=next><link href=../../../feed_rss_created.xml rel=alternate title="RSS feed" type=application/rss+xml><link href=../../../feed_rss_updated.xml rel=alternate title="RSS feed of updated content" type=application/rss+xml><link href=../../../images/srlinux.svg rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-9.0.13+insiders-4.32.0" name=generator><title>L2 EVPN with SR Linux - Learn SR Linux</title><link href=../../../assets/stylesheets/main.22245cb8.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.6932e648.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=NokiaPureText:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"NokiaPureText";--md-code-font:"Fira Code"}</style><link href=../../../stylesheets/nokia.css rel=stylesheet><link href=../../../stylesheets/nokia-fonts.css rel=stylesheet><link href=../../../stylesheets/diagrams.css rel=stylesheet><link href=../../../stylesheets/animations.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-VNYX781Q48"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-VNYX781Q48",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-VNYX781Q48",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta content=website property=og:type><meta content="Learn SR Linux - L2 EVPN with SR Linux" property=og:title><meta content="Open documentation for open Network OS" property=og:description><meta content=https://learn.srlinux.dev/tutorials/l2evpn/evpn/ property=og:url><meta content=https://learn.srlinux.dev/images/site-card.png property=og:image><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><!-- Twitter card tags --><meta content=summary_large_image name=twitter:card><meta content="Learn SR Linux - L2 EVPN with SR Linux" name=twitter:title><meta content="Open documentation for open Network OS" name=twitter:description><meta content=https://learn.srlinux.dev/images/site-card.png name=twitter:image><!-- NOINDEX --><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent data-md-color-primary data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#overview> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button aria-label="Don't show this again" class="md-banner__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> <a href=https://github.com/nokia/srlinux-container-image> <span class=twemoji> <img alt=ðŸ¥³ class=twemoji src=https://raw.githubusercontent.com/twitter/twemoji/master/assets/svg/1f973.svg title=:partying_face:> </span> Enjoy the most recent <strong>SR Linux 22.11.2</strong> release! </a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Learn SR Linux" class="md-header__button md-logo" data-md-component=logo href=../../.. title="Learn SR Linux"> <?xml version="1.0" encoding="utf-8"?> <svg height=512 viewbox="0 0 512 512" width=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 height=512 style="fill: rgb(255, 255, 255);" width=512></rect> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"></path> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"></path> </g> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Learn SR Linux </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> L2 EVPN with SR Linux </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary data-md-color-scheme=default id=__palette_0 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_0 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/srl-labs/learn-srlinux title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../..> Home </a> </li> <li class=md-tabs__item> <a href=../../../get-started/ class=md-tabs__link> Get Started </a> </li> <li class=md-tabs__item> <a href=../../../mgmt/ class=md-tabs__link> Management </a> </li> <li class=md-tabs__item> <a href=../../../programmability/ class=md-tabs__link> Programmability </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../community/ class=md-tabs__link> Community </a> </li> <li class=md-tabs__item> <a href=../../../blog/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Learn SR Linux" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="Learn SR Linux"> <?xml version="1.0" encoding="utf-8"?> <svg height=512 viewbox="0 0 512 512" width=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 height=512 style="fill: rgb(255, 255, 255);" width=512></rect> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"></path> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"></path> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"></path> </g> </svg> </a> Learn SR Linux </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/srl-labs/learn-srlinux title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../..> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../get-started/ class=md-nav__link> <span class=md-ellipsis> Get Started </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../mgmt/ class=md-nav__link> <span class=md-ellipsis> Management </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Management </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../programmability/ class=md-nav__link> <span class=md-ellipsis> Programmability </span> </a> <label class=md-nav__link for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Programmability </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_2 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../yang/ class=md-nav__link> <span class=md-ellipsis> YANG </span> </a> <label class=md-nav__link for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> YANG </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../yang/browser/ class=md-nav__link> <span class=md-ellipsis> YANG Browser </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../ndk/ class=md-nav__link> <span class=md-ellipsis> NDK </span> </a> <label class=md-nav__link for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2 type=checkbox> <label class=md-nav__link for=__nav_4_3_2 id=__nav_4_3_2_label tabindex=0> <span class=md-ellipsis> Developers Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Developers Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/architecture/ class=md-nav__link> <span class=md-ellipsis> NDK Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/agent/ class=md-nav__link> <span class=md-ellipsis> Agent Structure </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/agent-install-and-ops/ class=md-nav__link> <span class=md-ellipsis> Agent Installation &amp; Operations </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2_4 type=checkbox> <label class=md-nav__link for=__nav_4_3_2_4 id=__nav_4_3_2_4_label tabindex=0> <span class=md-ellipsis> Environment Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_4_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Environment Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/env/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/env/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_2_5 type=checkbox> <label class=md-nav__link for=__nav_4_3_2_5 id=__nav_4_3_2_5_label tabindex=0> <span class=md-ellipsis> Developing with NDK </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_2_5_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Developing with NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/dev/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/dev/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../ndk/apps/ class=md-nav__link> <span class=md-ellipsis> App Catalog </span> </a> <label class=md-nav__link for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_3_3_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> App Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/apps/evpn-proxy/ class=md-nav__link> <span class=md-ellipsis> EVPN Proxy </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/kbutler/ class=md-nav__link> <span class=md-ellipsis> kButler </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/srl-prom-exporter/ class=md-nav__link> <span class=md-ellipsis> Prometheus Telemetry Exporter </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/satellite/ class=md-nav__link> <span class=md-ellipsis> Satellite Tracker </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> </a> <label class=md-nav__link for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_5_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5_2_1 type=checkbox> <label class=md-nav__link for=__nav_5_2_1 id=__nav_5_2_1_label tabindex=0> <span class=md-ellipsis> Layer 2 EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_5_2_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_2_1> <span class="md-nav__icon md-icon"></span> Layer 2 EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../fabric/ class=md-nav__link> <span class=md-ellipsis> Fabric configuration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> EVPN configuration </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> EVPN configuration </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#overview> <span class=md-ellipsis> <span class=md-typeset> Overview </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ibgp-for-evpn> <span class=md-ellipsis> <span class=md-typeset> IBGP for EVPN </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#access-interfaces> <span class=md-ellipsis> <span class=md-typeset> Access interfaces </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#tunnelvxlan-interface> <span class=md-ellipsis> <span class=md-typeset> Tunnel/VXLAN interface </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mac-vrf> <span class=md-ellipsis> <span class=md-typeset> MAC-VRF </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#server-interfaces> <span class=md-ellipsis> <span class=md-typeset> Server interfaces </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#evpn-in-mac-vrf> <span class=md-ellipsis> <span class=md-typeset> EVPN in MAC-VRF </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#final-configurations> <span class=md-ellipsis> <span class=md-typeset> Final configurations </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#verification> <span class=md-ellipsis> <span class=md-typeset> Verification </span> </span> </a> <nav aria-label=Verification class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#evpn-imet-routes> <span class=md-ellipsis> <span class=md-typeset> EVPN IMET routes </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#vxlan-tunnels> <span class=md-ellipsis> <span class=md-typeset> VXLAN tunnels </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#evpn-macip-routes> <span class=md-ellipsis> <span class=md-typeset> EVPN MAC/IP routes </span> </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3 type=checkbox> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3_1 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../infrastructure/kne/ class=md-nav__link> <span class=md-ellipsis> KNE </span> </a> <label class=md-nav__link for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_3_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> KNE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../infrastructure/kne/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../infrastructure/kne/topology/ class=md-nav__link> <span class=md-ellipsis> Topology </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3_1_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../infrastructure/kne/srl-with-oc-services/ class=md-nav__link> <span class=md-ellipsis> SR Linux with Openconfig services </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_5_3_1_4_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_5_3_1_4> <span class="md-nav__icon md-icon"></span> SR Linux with Openconfig services </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4 type=checkbox> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4_1 type=checkbox> <label class=md-nav__link for=__nav_5_4_1 id=__nav_5_4_1_label tabindex=0> <span class=md-ellipsis> LDP-based MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_4_1> <span class="md-nav__icon md-icon"></span> LDP-based MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/routing/ class=md-nav__link> <span class=md-ellipsis> Routing </span> </a> </li> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/ldp/ class=md-nav__link> <span class=md-ellipsis> LDP </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5 type=checkbox> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> Programmability </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Programmability </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_1 type=checkbox> <label class=md-nav__link for=__nav_5_5_1 id=__nav_5_5_1_label tabindex=0> <span class=md-ellipsis> Event Handler </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_5_1> <span class="md-nav__icon md-icon"></span> Event Handler </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_1_1 type=checkbox> <label class=md-nav__link for=__nav_5_5_1_1 id=__nav_5_5_1_1_label tabindex=0> <span class=md-ellipsis> Oper Group </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_1_1_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_5_5_1_1> <span class="md-nav__icon md-icon"></span> Oper Group </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/oper-group-intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/lab/ class=md-nav__link> <span class=md-ellipsis> Lab setup </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/problem-statement/ class=md-nav__link> <span class=md-ellipsis> Problem statement </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/oper-group-cfg/ class=md-nav__link> <span class=md-ellipsis> Configuring oper-group </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/script/ class=md-nav__link> <span class=md-ellipsis> Script </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/opergroup-operation/ class=md-nav__link> <span class=md-ellipsis> Oper group in action </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_5_2 id=__nav_5_5_2_label tabindex=0> <span class=md-ellipsis> JSON-RPC </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_5_2> <span class="md-nav__icon md-icon"></span> JSON-RPC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../programmability/json-rpc/basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/json-rpc/ansible/ class=md-nav__link> <span class=md-ellipsis> Ansible </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> <label class=md-nav__link for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blog/subscribe/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20 5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"></path></svg> <span class=md-ellipsis> Subscribe </span> </a> </li> <li class=md-nav__item> <a href=../../../blog/tags/ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M5.5 7A1.5 1.5 0 0 1 4 5.5 1.5 1.5 0 0 1 5.5 4 1.5 1.5 0 0 1 7 5.5 1.5 1.5 0 0 1 5.5 7m15.91 4.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.11 0-2 .89-2 2v7c0 .55.22 1.05.59 1.41l8.99 9c.37.36.87.59 1.42.59.55 0 1.05-.23 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.56-.23-1.06-.59-1.42Z"></path></svg> <span class=md-ellipsis> Tags </span> </a> </li> <li class=md-nav__item> <a href=../../../blog/media/ class=md-nav__link> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M319.4 372c48.5-31.3 80.6-85.9 80.6-148 0-97.2-78.8-176-176-176S48 126.8 48 224c0 62.1 32.1 116.6 80.6 148 1.2 17.3 4 38 7.2 57.1l.2 1C56 395.8 0 316.5 0 224 0 100.3 100.3 0 224 0s224 100.3 224 224c0 92.5-56 171.9-136 206.1l.2-1.1c3.1-19.2 6-39.8 7.2-57zm-2.3-38.1c-1.6-5.7-3.9-11.1-7-16.2-5.8-9.7-13.5-17-21.9-22.4 19.5-17.6 31.8-43 31.8-71.3 0-53-43-96-96-96s-96 43-96 96c0 28.3 12.3 53.8 31.8 71.3-8.4 5.4-16.1 12.7-21.9 22.4-3.1 5.1-5.4 10.5-7 16.2C99.8 307.5 80 268 80 224c0-79.5 64.5-144 144-144s144 64.5 144 144c0 44-19.8 83.5-50.9 109.9zM224 312c32.9 0 64 8.6 64 43.8 0 33-12.9 104.1-20.6 132.9-5.1 19-24.5 23.4-43.4 23.4s-38.2-4.4-43.4-23.4C172.8 460.2 160 389 160 355.9c0-35.1 31.1-43.8 64-43.8zm0-32c-30.9 0-56-25.1-56-56s25.1-56 56-56 56 25.1 56 56-25.1 56-56 56z"></path></svg> <span class=md-ellipsis> In the Media </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#overview> <span class=md-ellipsis> <span class=md-typeset> Overview </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ibgp-for-evpn> <span class=md-ellipsis> <span class=md-typeset> IBGP for EVPN </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#access-interfaces> <span class=md-ellipsis> <span class=md-typeset> Access interfaces </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#tunnelvxlan-interface> <span class=md-ellipsis> <span class=md-typeset> Tunnel/VXLAN interface </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mac-vrf> <span class=md-ellipsis> <span class=md-typeset> MAC-VRF </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#server-interfaces> <span class=md-ellipsis> <span class=md-typeset> Server interfaces </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#evpn-in-mac-vrf> <span class=md-ellipsis> <span class=md-typeset> EVPN in MAC-VRF </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#final-configurations> <span class=md-ellipsis> <span class=md-typeset> Final configurations </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#verification> <span class=md-ellipsis> <span class=md-typeset> Verification </span> </span> </a> <nav aria-label=Verification class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#evpn-imet-routes> <span class=md-ellipsis> <span class=md-typeset> EVPN IMET routes </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#vxlan-tunnels> <span class=md-ellipsis> <span class=md-typeset> VXLAN tunnels </span> </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#evpn-macip-routes> <span class=md-ellipsis> <span class=md-typeset> EVPN MAC/IP routes </span> </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/srl-labs/learn-srlinux/edit/main/docs/tutorials/l2evpn/evpn.md title="Edit this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg> </a> <h1>EVPN configuration</h1> <script async src=https://cdn.jsdelivr.net/gh/hellt/drawio-js@main/embed2.js type=text/javascript></script> <p>Ethernet Virtual Private Network (EVPN), along with Virtual eXtensible LAN (VXLAN), is a technology that allows Layer 2 and Layer 3 traffic to be tunneled across an IP network.</p> <p>The SR Linux EVPN-VXLAN solution enables Layer 2 Broadcast Domains (BDs) in multi-tenant data centers using EVPN for the control plane and VXLAN as the data plane. It includes the following features:</p> <ul> <li>EVPN for VXLAN tunnels (Layer 2), extending a BD in overlay multi-tenant DCs</li> <li>EVPN for VXLAN tunnels (Layer 3), allowing inter-subnet-forwarding for unicast traffic within the same tenant infrastructure</li> </ul> <p>This tutorial is focused on EVPN for VXLAN tunnels Layer 2.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">#</a></h2> <p>EVPN-VXLAN provides Layer-2 connectivity in multi-tenant DCs. EVPN-VXLAN Broadcast Domains (BD) can span several leaf routers connected to the same IP fabric, allowing hosts attached to the same BD to communicate as though they were connected to the same layer-2 switch.</p> <p>VXLAN tunnels bridge the layer-2 frames between leaf routers with EVPN providing the control plane to automatically setup tunnels and use them efficiently.</p> <p>The following figure demonstrates this concept where servers <code>srv1</code> and <code>srv2</code> are connected to the different switches of the routed fabric, but appear to be on the same broadcast domain.</p> <div class=mxgraph data-mxgraph='{"page":4,"zoom":2,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <p>Now that the DC fabric has a routed underlay, and the loopbacks of the leaf switches are mutually reachable<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>, we can proceed with the VXLAN based EVPN service configuration.</p> <p>While doing that we will cover the following topics:</p> <ul> <li>VXLAN tunnel interface configuration</li> <li>Network instances of type <code>mac-vrf</code></li> <li>Bridged subinterfaces</li> <li>and BGP EVPN control plane configuration</li> </ul> <h2 id=ibgp-for-evpn>IBGP for EVPN<a class=headerlink href=#ibgp-for-evpn title="Permanent link">#</a></h2> <p>Prior to configuring the overlay services we must enable the EVPN address family for the distribution of EVPN routes among leaf routers of the same tenant.</p> <p>EVPN is enabled using iBGP and typically a Route Reflector (RR), or eBGP. In our example we have only two leafs, so we won't take extra time configuring the iBGP with a spine acting as a Route Reflector, and instead will configure the iBGP between the two leaf switches.</p> <div class=mxgraph data-mxgraph='{"page":5,"zoom":2,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <p>For that iBGP configuration we will create a group called <code>iBGP-overlay</code> which will have the <code>peer-as</code> and <code>local-as</code> set to <code>100</code> to form an iBGP neighborship. The group will also host the same permissive <code>all</code> routing policy, enabled <code>evpn</code> and disabled ipv4-unicast address families.</p> <p>Then for each leaf we add a new BGP neighbor addressed by the remote <code>system0</code> interface address and local system address as the source. Below you will find the pastable snippets with the aforementioned config:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>leaf1</label><label for=__tabbed_1_2>leaf2</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-0-2><a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>
</span><span id=__span-0-3><a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a><span class=err>/network-instance default protocols bgp</span>
</span><span id=__span-0-4><a href=#__codelineno-0-4 id=__codelineno-0-4 name=__codelineno-0-4></a><span class=err>    group iBGP-overlay {</span>
</span><span id=__span-0-5><a href=#__codelineno-0-5 id=__codelineno-0-5 name=__codelineno-0-5></a><span class=err>        export-policy all</span>
</span><span id=__span-0-6><a href=#__codelineno-0-6 id=__codelineno-0-6 name=__codelineno-0-6></a><span class=err>        import-policy all</span>
</span><span id=__span-0-7><a href=#__codelineno-0-7 id=__codelineno-0-7 name=__codelineno-0-7></a><span class=err>        peer-as</span> <span class=no>100</span>
</span><span id=__span-0-8><a href=#__codelineno-0-8 id=__codelineno-0-8 name=__codelineno-0-8></a><span class=err>        ipv4-unicast {</span>
</span><span id=__span-0-9><a href=#__codelineno-0-9 id=__codelineno-0-9 name=__codelineno-0-9></a><span class=err>            admin-state </span><span class=se>disable</span>
</span><span id=__span-0-10><a href=#__codelineno-0-10 id=__codelineno-0-10 name=__codelineno-0-10></a><span class=err>        }</span>
</span><span id=__span-0-11><a href=#__codelineno-0-11 id=__codelineno-0-11 name=__codelineno-0-11></a><span class=err>        evpn {</span>
</span><span id=__span-0-12><a href=#__codelineno-0-12 id=__codelineno-0-12 name=__codelineno-0-12></a><span class=err>            admin-state </span><span class=l>enable</span>
</span><span id=__span-0-13><a href=#__codelineno-0-13 id=__codelineno-0-13 name=__codelineno-0-13></a><span class=err>        }</span>
</span><span id=__span-0-14><a href=#__codelineno-0-14 id=__codelineno-0-14 name=__codelineno-0-14></a><span class=err>        local-as</span> <span class=no>100</span> <span class=err>{</span>
</span><span id=__span-0-15><a href=#__codelineno-0-15 id=__codelineno-0-15 name=__codelineno-0-15></a><span class=err>        }</span>
</span><span id=__span-0-16><a href=#__codelineno-0-16 id=__codelineno-0-16 name=__codelineno-0-16></a><span class=err>        timers {</span>
</span><span id=__span-0-17><a href=#__codelineno-0-17 id=__codelineno-0-17 name=__codelineno-0-17></a><span class=err>            minimum-advertisement-interval</span> <span class=no>1</span>
</span><span id=__span-0-18><a href=#__codelineno-0-18 id=__codelineno-0-18 name=__codelineno-0-18></a><span class=err>        }</span>
</span><span id=__span-0-19><a href=#__codelineno-0-19 id=__codelineno-0-19 name=__codelineno-0-19></a><span class=err>    }</span>
</span><span id=__span-0-20><a href=#__codelineno-0-20 id=__codelineno-0-20 name=__codelineno-0-20></a>
</span><span id=__span-0-21><a href=#__codelineno-0-21 id=__codelineno-0-21 name=__codelineno-0-21></a><span class=err>    neighbor </span><span class=no>10.0.0.2 </span><span class=err>{</span>
</span><span id=__span-0-22><a href=#__codelineno-0-22 id=__codelineno-0-22 name=__codelineno-0-22></a><span class=err>        peer-group iBGP-overlay</span>
</span><span id=__span-0-23><a href=#__codelineno-0-23 id=__codelineno-0-23 name=__codelineno-0-23></a><span class=err>        transport {</span>
</span><span id=__span-0-24><a href=#__codelineno-0-24 id=__codelineno-0-24 name=__codelineno-0-24></a><span class=err>            local-address </span><span class=no>10.0.0.1</span>
</span><span id=__span-0-25><a href=#__codelineno-0-25 id=__codelineno-0-25 name=__codelineno-0-25></a><span class=err>        }</span>
</span><span id=__span-0-26><a href=#__codelineno-0-26 id=__codelineno-0-26 name=__codelineno-0-26></a><span class=err>    }</span>
</span><span id=__span-0-27><a href=#__codelineno-0-27 id=__codelineno-0-27 name=__codelineno-0-27></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-1-2><a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a>
</span><span id=__span-1-3><a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a><span class=err>/network-instance default protocols bgp</span>
</span><span id=__span-1-4><a href=#__codelineno-1-4 id=__codelineno-1-4 name=__codelineno-1-4></a><span class=err>    group iBGP-overlay {</span>
</span><span id=__span-1-5><a href=#__codelineno-1-5 id=__codelineno-1-5 name=__codelineno-1-5></a><span class=err>        export-policy all</span>
</span><span id=__span-1-6><a href=#__codelineno-1-6 id=__codelineno-1-6 name=__codelineno-1-6></a><span class=err>        import-policy all</span>
</span><span id=__span-1-7><a href=#__codelineno-1-7 id=__codelineno-1-7 name=__codelineno-1-7></a><span class=err>        peer-as</span> <span class=no>100</span>
</span><span id=__span-1-8><a href=#__codelineno-1-8 id=__codelineno-1-8 name=__codelineno-1-8></a><span class=err>        ipv4-unicast {</span>
</span><span id=__span-1-9><a href=#__codelineno-1-9 id=__codelineno-1-9 name=__codelineno-1-9></a><span class=err>            admin-state </span><span class=se>disable</span>
</span><span id=__span-1-10><a href=#__codelineno-1-10 id=__codelineno-1-10 name=__codelineno-1-10></a><span class=err>        }</span>
</span><span id=__span-1-11><a href=#__codelineno-1-11 id=__codelineno-1-11 name=__codelineno-1-11></a><span class=err>        evpn {</span>
</span><span id=__span-1-12><a href=#__codelineno-1-12 id=__codelineno-1-12 name=__codelineno-1-12></a><span class=err>            admin-state </span><span class=l>enable</span>
</span><span id=__span-1-13><a href=#__codelineno-1-13 id=__codelineno-1-13 name=__codelineno-1-13></a><span class=err>        }</span>
</span><span id=__span-1-14><a href=#__codelineno-1-14 id=__codelineno-1-14 name=__codelineno-1-14></a><span class=err>        local-as</span> <span class=no>100</span> <span class=err>{</span>
</span><span id=__span-1-15><a href=#__codelineno-1-15 id=__codelineno-1-15 name=__codelineno-1-15></a><span class=err>        }</span>
</span><span id=__span-1-16><a href=#__codelineno-1-16 id=__codelineno-1-16 name=__codelineno-1-16></a><span class=err>        timers {</span>
</span><span id=__span-1-17><a href=#__codelineno-1-17 id=__codelineno-1-17 name=__codelineno-1-17></a><span class=err>            minimum-advertisement-interval</span> <span class=no>1</span>
</span><span id=__span-1-18><a href=#__codelineno-1-18 id=__codelineno-1-18 name=__codelineno-1-18></a><span class=err>        }</span>
</span><span id=__span-1-19><a href=#__codelineno-1-19 id=__codelineno-1-19 name=__codelineno-1-19></a><span class=err>    }</span>
</span><span id=__span-1-20><a href=#__codelineno-1-20 id=__codelineno-1-20 name=__codelineno-1-20></a>
</span><span id=__span-1-21><a href=#__codelineno-1-21 id=__codelineno-1-21 name=__codelineno-1-21></a><span class=err>    neighbor </span><span class=no>10.0.0.1 </span><span class=err>{</span>
</span><span id=__span-1-22><a href=#__codelineno-1-22 id=__codelineno-1-22 name=__codelineno-1-22></a><span class=err>        peer-group iBGP-overlay</span>
</span><span id=__span-1-23><a href=#__codelineno-1-23 id=__codelineno-1-23 name=__codelineno-1-23></a><span class=err>        transport {</span>
</span><span id=__span-1-24><a href=#__codelineno-1-24 id=__codelineno-1-24 name=__codelineno-1-24></a><span class=err>            local-address </span><span class=no>10.0.0.2</span>
</span><span id=__span-1-25><a href=#__codelineno-1-25 id=__codelineno-1-25 name=__codelineno-1-25></a><span class=err>        }</span>
</span><span id=__span-1-26><a href=#__codelineno-1-26 id=__codelineno-1-26 name=__codelineno-1-26></a><span class=err>    }</span>
</span><span id=__span-1-27><a href=#__codelineno-1-27 id=__codelineno-1-27 name=__codelineno-1-27></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> </div> </div> <p>Ensure that the iBGP session is established before proceeding any further:</p> <div class="language-srl highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1> 1</a></span>
<span class=normal><a href=#__codelineno-2-2> 2</a></span>
<span class=normal><a href=#__codelineno-2-3> 3</a></span>
<span class=normal><a href=#__codelineno-2-4> 4</a></span>
<span class=normal><a href=#__codelineno-2-5> 5</a></span>
<span class=normal><a href=#__codelineno-2-6> 6</a></span>
<span class=normal><a href=#__codelineno-2-7> 7</a></span>
<span class=normal><a href=#__codelineno-2-8> 8</a></span>
<span class=normal><a href=#__codelineno-2-9> 9</a></span>
<span class=normal><a href=#__codelineno-2-10>10</a></span>
<span class=normal><a href=#__codelineno-2-11>11</a></span>
<span class=normal><a href=#__codelineno-2-12>12</a></span>
<span class=normal><a href=#__codelineno-2-13>13</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a>A:leaf1# <span class=n>/show network-instance default protocols bgp neighbor 10.0.0.2</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><span class=err>BGP neighbor summary for network-instance</span><span class=l> "default"</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=err>Flags: S static, D dynamic, L discovered by LLDP, B BFD </span><span class=l>enabled</span><span class=err>, - </span><span class=se>disabled</span><span class=err>, * slow</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7></a><span class=err>+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8></a><span class=err>| Net-Inst  |   Peer    |   Group   |   Flags   |  Peer-AS  |   State   |  Uptime   | AFI/SAFI  | [Rx/Activ |</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9></a><span class=err>|           |           |           |           |           |           |           |           |   e/Tx]   |</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10></a><span class=err>+===========+===========+===========+===========+===========+===========+===========+===========+===========+</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11></a><span class=err>| default   | </span><span class=no>10.0.0.2 </span><span class=err> | iBGP-     | S         |</span> <span class=no>100</span> <span class=err>      | establish | 0d:0h:2m: | evpn      | </span>[<span class=no>0</span>/<span class=no>0</span>/<span class=no>0</span><span class=err>]   |</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12></a><span class=err>|           |           | overlay   |           |           | ed        | 9s        |           |           |</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13></a><span class=err>+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+</span>
</span></code></pre></div></td></tr></table></div> <p>Right now, as we don't have any EVPN service created, there are no EVPN routes that are being sent/received, which is indicated in the last column of the table above.</p> <h2 id=access-interfaces>Access interfaces<a class=headerlink href=#access-interfaces title="Permanent link">#</a></h2> <p>Next we are configuring the interfaces from the leaf switches to the corresponding servers. According to our lab's wiring diagram, interface 1 is connected to the server on both leaf switches:</p> <div class=mxgraph data-mxgraph='{"page":6,"zoom":2,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <p>Configuration of an access interface is nothing special, we already <a href=../fabric/#leaf-spine-interfaces>configured leaf-spine interfaces</a> at the fabric configuration stage, so the steps are all familiar. The only detail worth mentioning here is that we have to indicate the type of the subinterface to be <a href=../../../kb/ifaces/#subinterfaces><code>bridged</code></a>, this makes the interfaces only attachable to a network instance of <code>mac-vrf</code> type with MAC learning and layer-2 forwarding enabled.</p> <p>The following config is applied to both leaf switches:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a><span class=err>    /interface </span><span class=no>ethernet-1/1</span><span class=err> {</span>
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=err>        vlan-tagging </span><span class=l>true</span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-3-5><a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=err>            type bridged</span>
</span><span id=__span-3-6><a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=err>            admin-state </span><span class=l>enable</span>
</span><span id=__span-3-7><a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=err>            vlan {</span>
</span><span id=__span-3-8><a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a><span class=err>                encap {</span>
</span><span id=__span-3-9><a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a><span class=err>                    untagged {</span>
</span><span id=__span-3-10><a href=#__codelineno-3-10 id=__codelineno-3-10 name=__codelineno-3-10></a><span class=err>                    }</span>
</span><span id=__span-3-11><a href=#__codelineno-3-11 id=__codelineno-3-11 name=__codelineno-3-11></a><span class=err>                }</span>
</span><span id=__span-3-12><a href=#__codelineno-3-12 id=__codelineno-3-12 name=__codelineno-3-12></a><span class=err>            }</span>
</span><span id=__span-3-13><a href=#__codelineno-3-13 id=__codelineno-3-13 name=__codelineno-3-13></a><span class=err>        }</span>
</span><span id=__span-3-14><a href=#__codelineno-3-14 id=__codelineno-3-14 name=__codelineno-3-14></a><span class=err>    }</span>
</span><span id=__span-3-15><a href=#__codelineno-3-15 id=__codelineno-3-15 name=__codelineno-3-15></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> <p>As the config snippet shows, we are not using any VLAN classification on the subinterface, our intention is to send untagged frames from the servers.</p> <h2 id=tunnelvxlan-interface>Tunnel/VXLAN interface<a class=headerlink href=#tunnelvxlan-interface title="Permanent link">#</a></h2> <p>After creating the access sub-interfaces we are proceeding with creation of the VXLAN/Tunnel interfaces. The <a href=https://datatracker.ietf.org/doc/html/rfc8365#section-5>VXLAN encapsulation</a> in the dataplane allows MAC-VRFs of the same BD to be connected throughout the IP fabric.</p> <p>The SR Linux models VXLAN as a tunnel-interface which has a vxlan-interface within. The tunnel-interface for VXLAN is configured with a name <code>vxlan&lt;N&gt;</code> where <code>N = 0..255</code>.</p> <p>A vxlan-interface is configured under a tunnel-interface. At a minimum, a vxlan-interface must have an index, type, and ingress VXLAN Network Identifier (VNI).</p> <ul> <li>The index can be a number in the range 0-4294967295.</li> <li>The type can be bridged or routed and indicates whether the vxlan-interface can be linked to a mac-vrf (bridged) or ip-vrf (routed).</li> <li>The ingress VNI is the VXLAN Network Identifier that the system looks for in incoming VXLAN packets to classify them to this vxlan-interface and its network-instance. VNI can be in the range of <code>1..16777215</code>.<br> The VNI is used to find the MAC-VRF where the inner MAC lookup is performed. The egress VNI is not configured and is determined by the imported EVPN routes.<br> SR Linux requires that the egress VNI (discovered) matches the configured ingress VNI so that two leaf routers attached to the same BD can exchange packets.</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The source IP used in the vxlan-interfaces is the IPv4 address of subinterface <code>system0.0</code> in the default network-instance.</p> </div> <p>The above information translates to a configuration snippet which is applicable both to <code>leaf1</code> and <code>leaf2</code> nodes.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a><span class=err>    /tunnel-interface </span><span class=no>vxlan1</span><span class=err> {</span>
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=err>        vxlan-interface</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=err>            type bridged</span>
</span><span id=__span-4-5><a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=err>            ingress {</span>
</span><span id=__span-4-6><a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=err>                vni</span> <span class=no>1</span>
</span><span id=__span-4-7><a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a><span class=err>            }</span>
</span><span id=__span-4-8><a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a><span class=err>        }</span>
</span><span id=__span-4-9><a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a><span class=err>    }</span>
</span><span id=__span-4-10><a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> <p>To verify the tunnel interface configuration:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a>A:leaf2# <span class=n>show tunnel-interface vxlan-interface brief</span>
</span><span id=__span-5-2><a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a><span class=c>---------------------------------------------------------------------------------</span>
</span><span id=__span-5-3><a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a><span class=err>Show report for vxlan-tunnels</span>
</span><span id=__span-5-4><a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a><span class=c>---------------------------------------------------------------------------------</span>
</span><span id=__span-5-5><a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a><span class=err>+------------------+-----------------+---------+-------------+------------------+</span>
</span><span id=__span-5-6><a href=#__codelineno-5-6 id=__codelineno-5-6 name=__codelineno-5-6></a><span class=err>| Tunnel Interface | VxLAN Interface |  Type   | Ingress VNI | Egress source-ip |</span>
</span><span id=__span-5-7><a href=#__codelineno-5-7 id=__codelineno-5-7 name=__codelineno-5-7></a><span class=err>+==================+=================+=========+=============+==================+</span>
</span><span id=__span-5-8><a href=#__codelineno-5-8 id=__codelineno-5-8 name=__codelineno-5-8></a><span class=err>| </span><span class=no>vxlan1</span><span class=err>           | </span><span class=no>vxlan1.1</span><span class=err>        | bridged |</span> <span class=no>1</span> <span class=err>          | </span><span class=no>10.0.0.2/32 </span><span class=err>     |</span>
</span><span id=__span-5-9><a href=#__codelineno-5-9 id=__codelineno-5-9 name=__codelineno-5-9></a><span class=err>+------------------+-----------------+---------+-------------+------------------+</span>
</span><span id=__span-5-10><a href=#__codelineno-5-10 id=__codelineno-5-10 name=__codelineno-5-10></a><span class=c>---------------------------------------------------------------------------------</span>
</span><span id=__span-5-11><a href=#__codelineno-5-11 id=__codelineno-5-11 name=__codelineno-5-11></a><span class=err>Summary</span>
</span><span id=__span-5-12><a href=#__codelineno-5-12 id=__codelineno-5-12 name=__codelineno-5-12></a><span class=err> </span> <span class=no>1</span> <span class=err>tunnel-interfaces,</span> <span class=no>1</span> <span class=err>vxlan interfaces</span>
</span><span id=__span-5-13><a href=#__codelineno-5-13 id=__codelineno-5-13 name=__codelineno-5-13></a><span class=err> </span> <span class=no>0</span> <span class=err>vxlan-destinations,</span> <span class=no>0</span> <span class=err>unicast,</span> <span class=no>0</span> <span class=err>es,</span> <span class=no>0</span> <span class=err>multicast,</span> <span class=no>0</span> <span class=err>ip</span>
</span><span id=__span-5-14><a href=#__codelineno-5-14 id=__codelineno-5-14 name=__codelineno-5-14></a><span class=c>---------------------------------------------------------------------------------</span>
</span></code></pre></div> <h2 id=mac-vrf>MAC-VRF<a class=headerlink href=#mac-vrf title="Permanent link">#</a></h2> <p>Now it is a turn of MAC-VRF to get configured.</p> <p>The network-instance type <code>mac-vrf</code> functions as a broadcast domain. Each mac-vrf network-instance builds a bridge table composed of MAC addresses that can be learned via the data path on network-instance interfaces, learned via BGP EVPN or provided with static configuration.</p> <p>By associating the access and vxlan interfaces with the mac-vrf we bound them to this network-instance:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-6-2><a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a><span class=err>    /network-instance vrf-1 {</span>
</span><span id=__span-6-3><a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a><span class=err>        type mac-vrf</span>
</span><span id=__span-6-4><a href=#__codelineno-6-4 id=__codelineno-6-4 name=__codelineno-6-4></a><span class=err>        admin-state </span><span class=l>enable</span>
</span><span id=__span-6-5><a href=#__codelineno-6-5 id=__codelineno-6-5 name=__codelineno-6-5></a><span class=err>        interface </span><span class=no>ethernet-1/1.0</span><span class=err> {</span>
</span><span id=__span-6-6><a href=#__codelineno-6-6 id=__codelineno-6-6 name=__codelineno-6-6></a><span class=err>        }</span>
</span><span id=__span-6-7><a href=#__codelineno-6-7 id=__codelineno-6-7 name=__codelineno-6-7></a><span class=err>        vxlan-interface </span><span class=no>vxlan1.1</span><span class=err> {</span>
</span><span id=__span-6-8><a href=#__codelineno-6-8 id=__codelineno-6-8 name=__codelineno-6-8></a><span class=err>        }</span>
</span><span id=__span-6-9><a href=#__codelineno-6-9 id=__codelineno-6-9 name=__codelineno-6-9></a><span class=err>    }</span>
</span><span id=__span-6-10><a href=#__codelineno-6-10 id=__codelineno-6-10 name=__codelineno-6-10></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> <h2 id=server-interfaces>Server interfaces<a class=headerlink href=#server-interfaces title="Permanent link">#</a></h2> <p>The servers in our fabric do not have any addresses on their <code>eth1</code> interfaces by default. It is time to configure IP addresses on both servers, so that they will be ready to communicate with each other once we complete the EVPN service configuration.</p> <p>By the end of this section, we will have the following addressing scheme complete:</p> <div class=mxgraph data-mxgraph='{"page":7,"zoom":3,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <p>To connect to a shell of a server execute <code>docker exec -it &lt;container-name&gt; bash</code>:</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>srv1</label><label for=__tabbed_2_2>srv2</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a>docker exec -it clab-evpn01-srv1 bash
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a>docker exec -it clab-evpn01-srv2 bash
</span></code></pre></div> </div> </div> </div> <p>Within the shell, configure MAC address<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup> and IPv4 address for the <code>eth1</code> interface according to the diagram above, as with this interface the server is connected to the leaf switch.</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>srv1</label><label for=__tabbed_3_2>srv2</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a>ip link set address 00:c1:ab:00:00:01 dev eth1
</span><span id=__span-9-2><a href=#__codelineno-9-2 id=__codelineno-9-2 name=__codelineno-9-2></a>ip addr add 192.168.0.1/24 dev eth1
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a>ip link set address 00:c1:ab:00:00:02 dev eth1
</span><span id=__span-10-2><a href=#__codelineno-10-2 id=__codelineno-10-2 name=__codelineno-10-2></a>ip addr add 192.168.0.2/24 dev eth1
</span></code></pre></div> </div> </div> </div> <p>Let's try to ping server2 from server1:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-11-1><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a>bash-5.0# ping 192.168.0.2
</span><span id=__span-11-2><a href=#__codelineno-11-2 id=__codelineno-11-2 name=__codelineno-11-2></a>PING 192.168.0.2 (192.168.0.2) 56(84) bytes of data.
</span><span id=__span-11-3><a href=#__codelineno-11-3 id=__codelineno-11-3 name=__codelineno-11-3></a>^C
</span><span id=__span-11-4><a href=#__codelineno-11-4 id=__codelineno-11-4 name=__codelineno-11-4></a>--- 192.168.0.2 ping statistics ---
</span><span id=__span-11-5><a href=#__codelineno-11-5 id=__codelineno-11-5 name=__codelineno-11-5></a>3 packets transmitted, 0 received, 100% packet loss, time 2028ms
</span></code></pre></div> <p>That failed, expectedly, as our servers connected to different leafs, and those leafs do not yet have a shared broadcast domain. But by just trying to ping the remote party from server 1, we made the <code>srv1</code> interface MAC to get learned by the <code>leaf1</code> mac-vrf network instance:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-12-1><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a>A:leaf1# <span class=n>show network-instance vrf-1 bridge-table mac-table all</span>
</span><span id=__span-12-2><a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a><span class=c>----------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-12-3><a href=#__codelineno-12-3 id=__codelineno-12-3 name=__codelineno-12-3></a><span class=err>Mac-table of network instance vrf-1</span>
</span><span id=__span-12-4><a href=#__codelineno-12-4 id=__codelineno-12-4 name=__codelineno-12-4></a><span class=c>----------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-12-5><a href=#__codelineno-12-5 id=__codelineno-12-5 name=__codelineno-12-5></a><span class=err>+-------------------+--------------------------+-----------+--------+--------+-------+--------------------------+</span>
</span><span id=__span-12-6><a href=#__codelineno-12-6 id=__codelineno-12-6 name=__codelineno-12-6></a><span class=err>|      Address      |       Destination        |   Dest    |  Type  | Active | Aging |       Last Update        |</span>
</span><span id=__span-12-7><a href=#__codelineno-12-7 id=__codelineno-12-7 name=__codelineno-12-7></a><span class=err>|                   |                          |   Index   |        |        |       |                          |</span>
</span><span id=__span-12-8><a href=#__codelineno-12-8 id=__codelineno-12-8 name=__codelineno-12-8></a><span class=err>+===================+==========================+===========+========+========+=======+==========================+</span>
</span><span id=__span-12-9><a href=#__codelineno-12-9 id=__codelineno-12-9 name=__codelineno-12-9></a><span class=err>| 00:C1:AB:00:00:01 | </span><span class=no>ethernet-1/1.0</span><span class=err>           |</span> <span class=no>4</span> <span class=err>        | learnt | </span><span class=l>true</span><span class=err>   |</span> <span class=no>242</span> <span class=err>  | 2021-07-13T17:36:23.000Z |</span>
</span><span id=__span-12-10><a href=#__codelineno-12-10 id=__codelineno-12-10 name=__codelineno-12-10></a><span class=err>+-------------------+--------------------------+-----------+--------+--------+-------+--------------------------+</span>
</span><span id=__span-12-11><a href=#__codelineno-12-11 id=__codelineno-12-11 name=__codelineno-12-11></a><span class=err>Total Irb Macs            :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-12-12><a href=#__codelineno-12-12 id=__codelineno-12-12 name=__codelineno-12-12></a><span class=err>Total Static Macs         :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-12-13><a href=#__codelineno-12-13 id=__codelineno-12-13 name=__codelineno-12-13></a><span class=err>Total Duplicate Macs      :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-12-14><a href=#__codelineno-12-14 id=__codelineno-12-14 name=__codelineno-12-14></a><span class=err>Total Learnt Macs         :   </span> <span class=no>1</span> <span class=err>Total   </span> <span class=no>1</span> <span class=err>Active</span>
</span><span id=__span-12-15><a href=#__codelineno-12-15 id=__codelineno-12-15 name=__codelineno-12-15></a><span class=err>Total Evpn Macs           :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-12-16><a href=#__codelineno-12-16 id=__codelineno-12-16 name=__codelineno-12-16></a><span class=err>Total Evpn static Macs    :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-12-17><a href=#__codelineno-12-17 id=__codelineno-12-17 name=__codelineno-12-17></a><span class=err>Total Irb anycast Macs    :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-12-18><a href=#__codelineno-12-18 id=__codelineno-12-18 name=__codelineno-12-18></a><span class=err>Total Macs                :   </span> <span class=no>1</span> <span class=err>Total   </span> <span class=no>1</span> <span class=err>Active</span>
</span><span id=__span-12-19><a href=#__codelineno-12-19 id=__codelineno-12-19 name=__codelineno-12-19></a><span class=c>----------------------------------------------------------------------------------------------------------------------</span>
</span></code></pre></div> <h2 id=evpn-in-mac-vrf>EVPN in MAC-VRF<a class=headerlink href=#evpn-in-mac-vrf title="Permanent link">#</a></h2> <p>To advertise the locally learned MACs to the remote leafs we have to configure EVPN in our <code>vrf-1</code> network-instance.</p> <p>EVPN configuration under the mac-vrf network instance will require two configuration containers:</p> <ul> <li><code>bgp-vpn</code> - provides the configuration of the bgp-instances where the route-distinguisher and the import/export route-targets used for the EVPN routes exist.</li> <li><code>bgp-evpn</code> - hosts all the commands required to enable EVPN in the network-instance. At a minimum, a reference to <code>bgp-instance 1</code> is configured, along with the reference to the vxlan-interface and the EVPN Virtual Identifier (EVI).</li> </ul> <p>The following configuration is entered on both leafs:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-13-1><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-13-2><a href=#__codelineno-13-2 id=__codelineno-13-2 name=__codelineno-13-2></a><span class=err>    /network-instance vrf-1</span>
</span><span id=__span-13-3><a href=#__codelineno-13-3 id=__codelineno-13-3 name=__codelineno-13-3></a><span class=err>        protocols {</span>
</span><span id=__span-13-4><a href=#__codelineno-13-4 id=__codelineno-13-4 name=__codelineno-13-4></a><span class=err>            bgp-evpn {</span>
</span><span id=__span-13-5><a href=#__codelineno-13-5 id=__codelineno-13-5 name=__codelineno-13-5></a><span class=err>                bgp-instance</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-13-6><a href=#__codelineno-13-6 id=__codelineno-13-6 name=__codelineno-13-6></a><span class=err>                    admin-state </span><span class=l>enable</span>
</span><span id=__span-13-7><a href=#__codelineno-13-7 id=__codelineno-13-7 name=__codelineno-13-7></a><span class=err>                    vxlan-interface </span><span class=no>vxlan1.1</span>
</span><span id=__span-13-8><a href=#__codelineno-13-8 id=__codelineno-13-8 name=__codelineno-13-8></a><span class=err>                    evi</span> <span class=no>111</span>
</span><span id=__span-13-9><a href=#__codelineno-13-9 id=__codelineno-13-9 name=__codelineno-13-9></a><span class=err>                }</span>
</span><span id=__span-13-10><a href=#__codelineno-13-10 id=__codelineno-13-10 name=__codelineno-13-10></a><span class=err>            }</span>
</span><span id=__span-13-11><a href=#__codelineno-13-11 id=__codelineno-13-11 name=__codelineno-13-11></a><span class=err>            bgp-vpn {</span>
</span><span id=__span-13-12><a href=#__codelineno-13-12 id=__codelineno-13-12 name=__codelineno-13-12></a><span class=err>                bgp-instance</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-13-13><a href=#__codelineno-13-13 id=__codelineno-13-13 name=__codelineno-13-13></a><span class=err>                    route-target {</span>
</span><span id=__span-13-14><a href=#__codelineno-13-14 id=__codelineno-13-14 name=__codelineno-13-14></a><span class=err>                        export-rt </span><span class=no>target:100:111</span>
</span><span id=__span-13-15><a href=#__codelineno-13-15 id=__codelineno-13-15 name=__codelineno-13-15></a><span class=err>                        import-rt </span><span class=no>target:100:111</span>
</span><span id=__span-13-16><a href=#__codelineno-13-16 id=__codelineno-13-16 name=__codelineno-13-16></a><span class=err>                    }</span>
</span><span id=__span-13-17><a href=#__codelineno-13-17 id=__codelineno-13-17 name=__codelineno-13-17></a><span class=err>                }</span>
</span><span id=__span-13-18><a href=#__codelineno-13-18 id=__codelineno-13-18 name=__codelineno-13-18></a><span class=err>            }</span>
</span><span id=__span-13-19><a href=#__codelineno-13-19 id=__codelineno-13-19 name=__codelineno-13-19></a><span class=err>        }</span>
</span><span id=__span-13-20><a href=#__codelineno-13-20 id=__codelineno-13-20 name=__codelineno-13-20></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> <p>Once configured, the <code>bgp-vpn</code> instance can be checked to have the RT/RD values set:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-14-1><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a>A:leaf1# <span class=n>show network-instance vrf-1 protocols bgp-vpn bgp-instance 1</span>
</span><span id=__span-14-2><a href=#__codelineno-14-2 id=__codelineno-14-2 name=__codelineno-14-2></a><span class=err>=====================================================================</span>
</span><span id=__span-14-3><a href=#__codelineno-14-3 id=__codelineno-14-3 name=__codelineno-14-3></a><span class=err>Net Instance   : vrf-1</span>
</span><span id=__span-14-4><a href=#__codelineno-14-4 id=__codelineno-14-4 name=__codelineno-14-4></a><span class=err>    bgp Instance</span> <span class=no>1</span>
</span><span id=__span-14-5><a href=#__codelineno-14-5 id=__codelineno-14-5 name=__codelineno-14-5></a><span class=c>---------------------------------------------------------------------</span>
</span><span id=__span-14-6><a href=#__codelineno-14-6 id=__codelineno-14-6 name=__codelineno-14-6></a><span class=err>        route-distinguisher: 10.0.0.1:111, auto-derived-from-evi</span>
</span><span id=__span-14-7><a href=#__codelineno-14-7 id=__codelineno-14-7 name=__codelineno-14-7></a><span class=err>        export-route-target: </span><span class=no>target:100:111,</span><span class=err> manual</span>
</span><span id=__span-14-8><a href=#__codelineno-14-8 id=__codelineno-14-8 name=__codelineno-14-8></a><span class=err>        import-route-target: </span><span class=no>target:100:111,</span><span class=err> manual</span>
</span><span id=__span-14-9><a href=#__codelineno-14-9 id=__codelineno-14-9 name=__codelineno-14-9></a><span class=err>=====================================================================</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>VNI to EVI mapping</p> <p>Prior to release 21.11, SR Linux used only <strong>VLAN-based Service</strong> type of mapping between the VNI and EVI. In this option, a single Ethernet broadcast domain (e.g., subnet) represented by a VNI is mapped to a unique EVI.<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup></p> <p>Starting from release 21.11 SR Linux supports an <a href=https://documentation.nokia.com/srlinux/SR_Linux_HTML_R21-11/EVPN-VXLAN_Guide/evpn_interoperability_with_vlan_aware_bundle_services.html>interoperability mode</a> in which SR Linux leaf nodes can be attached to VLAN-aware bundle broadcast domains along with other third-party routers.</p> </div> <h2 id=final-configurations>Final configurations<a class=headerlink href=#final-configurations title="Permanent link">#</a></h2> <p>For your convenience, in case you want to jump over the config routines and start with control/data plane verification we provide the resulting configuration<sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup> for all the lab nodes. You can copy paste those snippets to the relevant nodes and proceed with verification tasks.</p> <details class=example> <summary>pastable snippets</summary> <div class="tabbed-set tabbed-alternate" data-tabs=4:5><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><input id=__tabbed_4_3 name=__tabbed_4 type=radio><input id=__tabbed_4_4 name=__tabbed_4 type=radio><input id=__tabbed_4_5 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>leaf1</label><label for=__tabbed_4_2>leaf2</label><label for=__tabbed_4_3>spine1</label><label for=__tabbed_4_4>srv1</label><label for=__tabbed_4_5>srv2</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-15-1><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-15-2><a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a><span class=err>    /routing-policy {</span>
</span><span id=__span-15-3><a href=#__codelineno-15-3 id=__codelineno-15-3 name=__codelineno-15-3></a><span class=err>        policy all {</span>
</span><span id=__span-15-4><a href=#__codelineno-15-4 id=__codelineno-15-4 name=__codelineno-15-4></a><span class=err>            default-action {</span>
</span><span id=__span-15-5><a href=#__codelineno-15-5 id=__codelineno-15-5 name=__codelineno-15-5></a><span class=err>                policy-result </span><span class=l>accept</span>
</span><span id=__span-15-6><a href=#__codelineno-15-6 id=__codelineno-15-6 name=__codelineno-15-6></a><span class=err>            }</span>
</span><span id=__span-15-7><a href=#__codelineno-15-7 id=__codelineno-15-7 name=__codelineno-15-7></a><span class=err>        }</span>
</span><span id=__span-15-8><a href=#__codelineno-15-8 id=__codelineno-15-8 name=__codelineno-15-8></a><span class=err>    }</span>
</span><span id=__span-15-9><a href=#__codelineno-15-9 id=__codelineno-15-9 name=__codelineno-15-9></a><span class=err>    /tunnel-interface </span><span class=no>vxlan1</span><span class=err> {</span>
</span><span id=__span-15-10><a href=#__codelineno-15-10 id=__codelineno-15-10 name=__codelineno-15-10></a><span class=err>        vxlan-interface</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-15-11><a href=#__codelineno-15-11 id=__codelineno-15-11 name=__codelineno-15-11></a><span class=err>            type bridged</span>
</span><span id=__span-15-12><a href=#__codelineno-15-12 id=__codelineno-15-12 name=__codelineno-15-12></a><span class=err>            ingress {</span>
</span><span id=__span-15-13><a href=#__codelineno-15-13 id=__codelineno-15-13 name=__codelineno-15-13></a><span class=err>                vni</span> <span class=no>1</span>
</span><span id=__span-15-14><a href=#__codelineno-15-14 id=__codelineno-15-14 name=__codelineno-15-14></a><span class=err>            }</span>
</span><span id=__span-15-15><a href=#__codelineno-15-15 id=__codelineno-15-15 name=__codelineno-15-15></a><span class=err>        }</span>
</span><span id=__span-15-16><a href=#__codelineno-15-16 id=__codelineno-15-16 name=__codelineno-15-16></a><span class=err>    }</span>
</span><span id=__span-15-17><a href=#__codelineno-15-17 id=__codelineno-15-17 name=__codelineno-15-17></a><span class=err>    /network-instance default {</span>
</span><span id=__span-15-18><a href=#__codelineno-15-18 id=__codelineno-15-18 name=__codelineno-15-18></a><span class=err>        interface </span><span class=no>ethernet-1/49.0</span><span class=err> {</span>
</span><span id=__span-15-19><a href=#__codelineno-15-19 id=__codelineno-15-19 name=__codelineno-15-19></a><span class=err>        }</span>
</span><span id=__span-15-20><a href=#__codelineno-15-20 id=__codelineno-15-20 name=__codelineno-15-20></a><span class=err>        interface </span><span class=no>system0.0</span><span class=err> {</span>
</span><span id=__span-15-21><a href=#__codelineno-15-21 id=__codelineno-15-21 name=__codelineno-15-21></a><span class=err>        }</span>
</span><span id=__span-15-22><a href=#__codelineno-15-22 id=__codelineno-15-22 name=__codelineno-15-22></a><span class=err>        protocols {</span>
</span><span id=__span-15-23><a href=#__codelineno-15-23 id=__codelineno-15-23 name=__codelineno-15-23></a><span class=err>            bgp {</span>
</span><span id=__span-15-24><a href=#__codelineno-15-24 id=__codelineno-15-24 name=__codelineno-15-24></a><span class=err>                autonomous-system</span> <span class=no>101</span>
</span><span id=__span-15-25><a href=#__codelineno-15-25 id=__codelineno-15-25 name=__codelineno-15-25></a><span class=err>                router-id </span><span class=no>10.0.0.1</span>
</span><span id=__span-15-26><a href=#__codelineno-15-26 id=__codelineno-15-26 name=__codelineno-15-26></a><span class=err>                group eBGP-underlay {</span>
</span><span id=__span-15-27><a href=#__codelineno-15-27 id=__codelineno-15-27 name=__codelineno-15-27></a><span class=err>                    export-policy all</span>
</span><span id=__span-15-28><a href=#__codelineno-15-28 id=__codelineno-15-28 name=__codelineno-15-28></a><span class=err>                    import-policy all</span>
</span><span id=__span-15-29><a href=#__codelineno-15-29 id=__codelineno-15-29 name=__codelineno-15-29></a><span class=err>                    peer-as</span> <span class=no>201</span>
</span><span id=__span-15-30><a href=#__codelineno-15-30 id=__codelineno-15-30 name=__codelineno-15-30></a><span class=err>                    ipv4-unicast {</span>
</span><span id=__span-15-31><a href=#__codelineno-15-31 id=__codelineno-15-31 name=__codelineno-15-31></a><span class=err>                        admin-state </span><span class=l>enable</span>
</span><span id=__span-15-32><a href=#__codelineno-15-32 id=__codelineno-15-32 name=__codelineno-15-32></a><span class=err>                    }</span>
</span><span id=__span-15-33><a href=#__codelineno-15-33 id=__codelineno-15-33 name=__codelineno-15-33></a><span class=err>                }</span>
</span><span id=__span-15-34><a href=#__codelineno-15-34 id=__codelineno-15-34 name=__codelineno-15-34></a><span class=err>                group iBGP-overlay {</span>
</span><span id=__span-15-35><a href=#__codelineno-15-35 id=__codelineno-15-35 name=__codelineno-15-35></a><span class=err>                    export-policy all</span>
</span><span id=__span-15-36><a href=#__codelineno-15-36 id=__codelineno-15-36 name=__codelineno-15-36></a><span class=err>                    import-policy all</span>
</span><span id=__span-15-37><a href=#__codelineno-15-37 id=__codelineno-15-37 name=__codelineno-15-37></a><span class=err>                    peer-as</span> <span class=no>100</span>
</span><span id=__span-15-38><a href=#__codelineno-15-38 id=__codelineno-15-38 name=__codelineno-15-38></a><span class=err>                    ipv4-unicast {</span>
</span><span id=__span-15-39><a href=#__codelineno-15-39 id=__codelineno-15-39 name=__codelineno-15-39></a><span class=err>                        admin-state </span><span class=se>disable</span>
</span><span id=__span-15-40><a href=#__codelineno-15-40 id=__codelineno-15-40 name=__codelineno-15-40></a><span class=err>                    }</span>
</span><span id=__span-15-41><a href=#__codelineno-15-41 id=__codelineno-15-41 name=__codelineno-15-41></a><span class=err>                    evpn {</span>
</span><span id=__span-15-42><a href=#__codelineno-15-42 id=__codelineno-15-42 name=__codelineno-15-42></a><span class=err>                        admin-state </span><span class=l>enable</span>
</span><span id=__span-15-43><a href=#__codelineno-15-43 id=__codelineno-15-43 name=__codelineno-15-43></a><span class=err>                    }</span>
</span><span id=__span-15-44><a href=#__codelineno-15-44 id=__codelineno-15-44 name=__codelineno-15-44></a><span class=err>                    local-as</span> <span class=no>100</span> <span class=err>{</span>
</span><span id=__span-15-45><a href=#__codelineno-15-45 id=__codelineno-15-45 name=__codelineno-15-45></a><span class=err>                    }</span>
</span><span id=__span-15-46><a href=#__codelineno-15-46 id=__codelineno-15-46 name=__codelineno-15-46></a><span class=err>                    timers {</span>
</span><span id=__span-15-47><a href=#__codelineno-15-47 id=__codelineno-15-47 name=__codelineno-15-47></a><span class=err>                        minimum-advertisement-interval</span> <span class=no>1</span>
</span><span id=__span-15-48><a href=#__codelineno-15-48 id=__codelineno-15-48 name=__codelineno-15-48></a><span class=err>                    }</span>
</span><span id=__span-15-49><a href=#__codelineno-15-49 id=__codelineno-15-49 name=__codelineno-15-49></a><span class=err>                }</span>
</span><span id=__span-15-50><a href=#__codelineno-15-50 id=__codelineno-15-50 name=__codelineno-15-50></a><span class=err>                neighbor </span><span class=no>10.0.0.2 </span><span class=err>{</span>
</span><span id=__span-15-51><a href=#__codelineno-15-51 id=__codelineno-15-51 name=__codelineno-15-51></a><span class=err>                    admin-state </span><span class=l>enable</span>
</span><span id=__span-15-52><a href=#__codelineno-15-52 id=__codelineno-15-52 name=__codelineno-15-52></a><span class=err>                    peer-group iBGP-overlay</span>
</span><span id=__span-15-53><a href=#__codelineno-15-53 id=__codelineno-15-53 name=__codelineno-15-53></a><span class=err>                    transport {</span>
</span><span id=__span-15-54><a href=#__codelineno-15-54 id=__codelineno-15-54 name=__codelineno-15-54></a><span class=err>                        local-address </span><span class=no>10.0.0.1</span>
</span><span id=__span-15-55><a href=#__codelineno-15-55 id=__codelineno-15-55 name=__codelineno-15-55></a><span class=err>                    }</span>
</span><span id=__span-15-56><a href=#__codelineno-15-56 id=__codelineno-15-56 name=__codelineno-15-56></a><span class=err>                }</span>
</span><span id=__span-15-57><a href=#__codelineno-15-57 id=__codelineno-15-57 name=__codelineno-15-57></a><span class=err>                neighbor </span><span class=no>192.168.11.2 </span><span class=err>{</span>
</span><span id=__span-15-58><a href=#__codelineno-15-58 id=__codelineno-15-58 name=__codelineno-15-58></a><span class=err>                    peer-group eBGP-underlay</span>
</span><span id=__span-15-59><a href=#__codelineno-15-59 id=__codelineno-15-59 name=__codelineno-15-59></a><span class=err>                }</span>
</span><span id=__span-15-60><a href=#__codelineno-15-60 id=__codelineno-15-60 name=__codelineno-15-60></a><span class=err>            }</span>
</span><span id=__span-15-61><a href=#__codelineno-15-61 id=__codelineno-15-61 name=__codelineno-15-61></a><span class=err>        }</span>
</span><span id=__span-15-62><a href=#__codelineno-15-62 id=__codelineno-15-62 name=__codelineno-15-62></a><span class=err>    }</span>
</span><span id=__span-15-63><a href=#__codelineno-15-63 id=__codelineno-15-63 name=__codelineno-15-63></a>
</span><span id=__span-15-64><a href=#__codelineno-15-64 id=__codelineno-15-64 name=__codelineno-15-64></a><span class=err>    /network-instance vrf-1 {</span>
</span><span id=__span-15-65><a href=#__codelineno-15-65 id=__codelineno-15-65 name=__codelineno-15-65></a><span class=err>        type mac-vrf</span>
</span><span id=__span-15-66><a href=#__codelineno-15-66 id=__codelineno-15-66 name=__codelineno-15-66></a><span class=err>        admin-state </span><span class=l>enable</span>
</span><span id=__span-15-67><a href=#__codelineno-15-67 id=__codelineno-15-67 name=__codelineno-15-67></a><span class=err>        interface </span><span class=no>ethernet-1/1.0</span><span class=err> {</span>
</span><span id=__span-15-68><a href=#__codelineno-15-68 id=__codelineno-15-68 name=__codelineno-15-68></a><span class=err>        }</span>
</span><span id=__span-15-69><a href=#__codelineno-15-69 id=__codelineno-15-69 name=__codelineno-15-69></a><span class=err>        vxlan-interface </span><span class=no>vxlan1.1</span><span class=err> {</span>
</span><span id=__span-15-70><a href=#__codelineno-15-70 id=__codelineno-15-70 name=__codelineno-15-70></a><span class=err>        }</span>
</span><span id=__span-15-71><a href=#__codelineno-15-71 id=__codelineno-15-71 name=__codelineno-15-71></a><span class=err>        protocols {</span>
</span><span id=__span-15-72><a href=#__codelineno-15-72 id=__codelineno-15-72 name=__codelineno-15-72></a><span class=err>            bgp-evpn {</span>
</span><span id=__span-15-73><a href=#__codelineno-15-73 id=__codelineno-15-73 name=__codelineno-15-73></a><span class=err>                bgp-instance</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-15-74><a href=#__codelineno-15-74 id=__codelineno-15-74 name=__codelineno-15-74></a><span class=err>                    admin-state </span><span class=l>enable</span>
</span><span id=__span-15-75><a href=#__codelineno-15-75 id=__codelineno-15-75 name=__codelineno-15-75></a><span class=err>                    vxlan-interface </span><span class=no>vxlan1.1</span>
</span><span id=__span-15-76><a href=#__codelineno-15-76 id=__codelineno-15-76 name=__codelineno-15-76></a><span class=err>                    evi</span> <span class=no>111</span>
</span><span id=__span-15-77><a href=#__codelineno-15-77 id=__codelineno-15-77 name=__codelineno-15-77></a><span class=err>                }</span>
</span><span id=__span-15-78><a href=#__codelineno-15-78 id=__codelineno-15-78 name=__codelineno-15-78></a><span class=err>            }</span>
</span><span id=__span-15-79><a href=#__codelineno-15-79 id=__codelineno-15-79 name=__codelineno-15-79></a><span class=err>            bgp-vpn {</span>
</span><span id=__span-15-80><a href=#__codelineno-15-80 id=__codelineno-15-80 name=__codelineno-15-80></a><span class=err>                bgp-instance</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-15-81><a href=#__codelineno-15-81 id=__codelineno-15-81 name=__codelineno-15-81></a><span class=err>                    route-target {</span>
</span><span id=__span-15-82><a href=#__codelineno-15-82 id=__codelineno-15-82 name=__codelineno-15-82></a><span class=err>                        export-rt </span><span class=no>target:100:111</span>
</span><span id=__span-15-83><a href=#__codelineno-15-83 id=__codelineno-15-83 name=__codelineno-15-83></a><span class=err>                        import-rt </span><span class=no>target:100:111</span>
</span><span id=__span-15-84><a href=#__codelineno-15-84 id=__codelineno-15-84 name=__codelineno-15-84></a><span class=err>                    }</span>
</span><span id=__span-15-85><a href=#__codelineno-15-85 id=__codelineno-15-85 name=__codelineno-15-85></a><span class=err>                }</span>
</span><span id=__span-15-86><a href=#__codelineno-15-86 id=__codelineno-15-86 name=__codelineno-15-86></a><span class=err>            }</span>
</span><span id=__span-15-87><a href=#__codelineno-15-87 id=__codelineno-15-87 name=__codelineno-15-87></a><span class=err>        }</span>
</span><span id=__span-15-88><a href=#__codelineno-15-88 id=__codelineno-15-88 name=__codelineno-15-88></a><span class=err>    }</span>
</span><span id=__span-15-89><a href=#__codelineno-15-89 id=__codelineno-15-89 name=__codelineno-15-89></a>
</span><span id=__span-15-90><a href=#__codelineno-15-90 id=__codelineno-15-90 name=__codelineno-15-90></a><span class=err>    /interface </span><span class=no>ethernet-1/1</span><span class=err> {</span>
</span><span id=__span-15-91><a href=#__codelineno-15-91 id=__codelineno-15-91 name=__codelineno-15-91></a><span class=err>        vlan-tagging </span><span class=l>true</span>
</span><span id=__span-15-92><a href=#__codelineno-15-92 id=__codelineno-15-92 name=__codelineno-15-92></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-15-93><a href=#__codelineno-15-93 id=__codelineno-15-93 name=__codelineno-15-93></a><span class=err>            type bridged</span>
</span><span id=__span-15-94><a href=#__codelineno-15-94 id=__codelineno-15-94 name=__codelineno-15-94></a><span class=err>            admin-state </span><span class=l>enable</span>
</span><span id=__span-15-95><a href=#__codelineno-15-95 id=__codelineno-15-95 name=__codelineno-15-95></a><span class=err>            vlan {</span>
</span><span id=__span-15-96><a href=#__codelineno-15-96 id=__codelineno-15-96 name=__codelineno-15-96></a><span class=err>                encap {</span>
</span><span id=__span-15-97><a href=#__codelineno-15-97 id=__codelineno-15-97 name=__codelineno-15-97></a><span class=err>                    untagged {</span>
</span><span id=__span-15-98><a href=#__codelineno-15-98 id=__codelineno-15-98 name=__codelineno-15-98></a><span class=err>                    }</span>
</span><span id=__span-15-99><a href=#__codelineno-15-99 id=__codelineno-15-99 name=__codelineno-15-99></a><span class=err>                }</span>
</span><span id=__span-15-100><a href=#__codelineno-15-100 id=__codelineno-15-100 name=__codelineno-15-100></a><span class=err>            }</span>
</span><span id=__span-15-101><a href=#__codelineno-15-101 id=__codelineno-15-101 name=__codelineno-15-101></a><span class=err>        }</span>
</span><span id=__span-15-102><a href=#__codelineno-15-102 id=__codelineno-15-102 name=__codelineno-15-102></a><span class=err>    }</span>
</span><span id=__span-15-103><a href=#__codelineno-15-103 id=__codelineno-15-103 name=__codelineno-15-103></a><span class=err>    /interface </span><span class=no>ethernet-1/49</span><span class=err> {</span>
</span><span id=__span-15-104><a href=#__codelineno-15-104 id=__codelineno-15-104 name=__codelineno-15-104></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-15-105><a href=#__codelineno-15-105 id=__codelineno-15-105 name=__codelineno-15-105></a><span class=err>            ipv4 {</span>
</span><span id=__span-15-106><a href=#__codelineno-15-106 id=__codelineno-15-106 name=__codelineno-15-106></a><span class=err>                address </span><span class=no>192.168.11.1/30 </span><span class=err>{</span>
</span><span id=__span-15-107><a href=#__codelineno-15-107 id=__codelineno-15-107 name=__codelineno-15-107></a><span class=err>                }</span>
</span><span id=__span-15-108><a href=#__codelineno-15-108 id=__codelineno-15-108 name=__codelineno-15-108></a><span class=err>            }</span>
</span><span id=__span-15-109><a href=#__codelineno-15-109 id=__codelineno-15-109 name=__codelineno-15-109></a><span class=err>        }</span>
</span><span id=__span-15-110><a href=#__codelineno-15-110 id=__codelineno-15-110 name=__codelineno-15-110></a><span class=err>    }</span>
</span><span id=__span-15-111><a href=#__codelineno-15-111 id=__codelineno-15-111 name=__codelineno-15-111></a><span class=err>    /interface </span><span class=no>system0</span><span class=err> {</span>
</span><span id=__span-15-112><a href=#__codelineno-15-112 id=__codelineno-15-112 name=__codelineno-15-112></a><span class=err>        admin-state </span><span class=l>enable</span>
</span><span id=__span-15-113><a href=#__codelineno-15-113 id=__codelineno-15-113 name=__codelineno-15-113></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-15-114><a href=#__codelineno-15-114 id=__codelineno-15-114 name=__codelineno-15-114></a><span class=err>            ipv4 {</span>
</span><span id=__span-15-115><a href=#__codelineno-15-115 id=__codelineno-15-115 name=__codelineno-15-115></a><span class=err>                address </span><span class=no>10.0.0.1/32 </span><span class=err>{</span>
</span><span id=__span-15-116><a href=#__codelineno-15-116 id=__codelineno-15-116 name=__codelineno-15-116></a><span class=err>                }</span>
</span><span id=__span-15-117><a href=#__codelineno-15-117 id=__codelineno-15-117 name=__codelineno-15-117></a><span class=err>            }</span>
</span><span id=__span-15-118><a href=#__codelineno-15-118 id=__codelineno-15-118 name=__codelineno-15-118></a><span class=err>        }</span>
</span><span id=__span-15-119><a href=#__codelineno-15-119 id=__codelineno-15-119 name=__codelineno-15-119></a><span class=err>    }</span>
</span><span id=__span-15-120><a href=#__codelineno-15-120 id=__codelineno-15-120 name=__codelineno-15-120></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-16-1><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-16-2><a href=#__codelineno-16-2 id=__codelineno-16-2 name=__codelineno-16-2></a><span class=err>    /routing-policy {</span>
</span><span id=__span-16-3><a href=#__codelineno-16-3 id=__codelineno-16-3 name=__codelineno-16-3></a><span class=err>        policy all {</span>
</span><span id=__span-16-4><a href=#__codelineno-16-4 id=__codelineno-16-4 name=__codelineno-16-4></a><span class=err>            default-action {</span>
</span><span id=__span-16-5><a href=#__codelineno-16-5 id=__codelineno-16-5 name=__codelineno-16-5></a><span class=err>                policy-result </span><span class=l>accept</span>
</span><span id=__span-16-6><a href=#__codelineno-16-6 id=__codelineno-16-6 name=__codelineno-16-6></a><span class=err>            }</span>
</span><span id=__span-16-7><a href=#__codelineno-16-7 id=__codelineno-16-7 name=__codelineno-16-7></a><span class=err>        }</span>
</span><span id=__span-16-8><a href=#__codelineno-16-8 id=__codelineno-16-8 name=__codelineno-16-8></a><span class=err>    }</span>
</span><span id=__span-16-9><a href=#__codelineno-16-9 id=__codelineno-16-9 name=__codelineno-16-9></a><span class=err>    /tunnel-interface </span><span class=no>vxlan1</span><span class=err> {</span>
</span><span id=__span-16-10><a href=#__codelineno-16-10 id=__codelineno-16-10 name=__codelineno-16-10></a><span class=err>        vxlan-interface</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-16-11><a href=#__codelineno-16-11 id=__codelineno-16-11 name=__codelineno-16-11></a><span class=err>            type bridged</span>
</span><span id=__span-16-12><a href=#__codelineno-16-12 id=__codelineno-16-12 name=__codelineno-16-12></a><span class=err>            ingress {</span>
</span><span id=__span-16-13><a href=#__codelineno-16-13 id=__codelineno-16-13 name=__codelineno-16-13></a><span class=err>                vni</span> <span class=no>1</span>
</span><span id=__span-16-14><a href=#__codelineno-16-14 id=__codelineno-16-14 name=__codelineno-16-14></a><span class=err>            }</span>
</span><span id=__span-16-15><a href=#__codelineno-16-15 id=__codelineno-16-15 name=__codelineno-16-15></a><span class=err>        }</span>
</span><span id=__span-16-16><a href=#__codelineno-16-16 id=__codelineno-16-16 name=__codelineno-16-16></a><span class=err>    }</span>
</span><span id=__span-16-17><a href=#__codelineno-16-17 id=__codelineno-16-17 name=__codelineno-16-17></a><span class=err>    /network-instance default {</span>
</span><span id=__span-16-18><a href=#__codelineno-16-18 id=__codelineno-16-18 name=__codelineno-16-18></a><span class=err>        interface </span><span class=no>ethernet-1/49.0</span><span class=err> {</span>
</span><span id=__span-16-19><a href=#__codelineno-16-19 id=__codelineno-16-19 name=__codelineno-16-19></a><span class=err>        }</span>
</span><span id=__span-16-20><a href=#__codelineno-16-20 id=__codelineno-16-20 name=__codelineno-16-20></a><span class=err>        interface </span><span class=no>system0.0</span><span class=err> {</span>
</span><span id=__span-16-21><a href=#__codelineno-16-21 id=__codelineno-16-21 name=__codelineno-16-21></a><span class=err>        }</span>
</span><span id=__span-16-22><a href=#__codelineno-16-22 id=__codelineno-16-22 name=__codelineno-16-22></a><span class=err>        protocols {</span>
</span><span id=__span-16-23><a href=#__codelineno-16-23 id=__codelineno-16-23 name=__codelineno-16-23></a><span class=err>            bgp {</span>
</span><span id=__span-16-24><a href=#__codelineno-16-24 id=__codelineno-16-24 name=__codelineno-16-24></a><span class=err>                autonomous-system</span> <span class=no>102</span>
</span><span id=__span-16-25><a href=#__codelineno-16-25 id=__codelineno-16-25 name=__codelineno-16-25></a><span class=err>                router-id </span><span class=no>10.0.0.2</span>
</span><span id=__span-16-26><a href=#__codelineno-16-26 id=__codelineno-16-26 name=__codelineno-16-26></a><span class=err>                group eBGP-underlay {</span>
</span><span id=__span-16-27><a href=#__codelineno-16-27 id=__codelineno-16-27 name=__codelineno-16-27></a><span class=err>                    export-policy all</span>
</span><span id=__span-16-28><a href=#__codelineno-16-28 id=__codelineno-16-28 name=__codelineno-16-28></a><span class=err>                    import-policy all</span>
</span><span id=__span-16-29><a href=#__codelineno-16-29 id=__codelineno-16-29 name=__codelineno-16-29></a><span class=err>                    peer-as</span> <span class=no>201</span>
</span><span id=__span-16-30><a href=#__codelineno-16-30 id=__codelineno-16-30 name=__codelineno-16-30></a><span class=err>                    ipv4-unicast {</span>
</span><span id=__span-16-31><a href=#__codelineno-16-31 id=__codelineno-16-31 name=__codelineno-16-31></a><span class=err>                        admin-state </span><span class=l>enable</span>
</span><span id=__span-16-32><a href=#__codelineno-16-32 id=__codelineno-16-32 name=__codelineno-16-32></a><span class=err>                    }</span>
</span><span id=__span-16-33><a href=#__codelineno-16-33 id=__codelineno-16-33 name=__codelineno-16-33></a><span class=err>                }</span>
</span><span id=__span-16-34><a href=#__codelineno-16-34 id=__codelineno-16-34 name=__codelineno-16-34></a><span class=err>                group iBGP-overlay {</span>
</span><span id=__span-16-35><a href=#__codelineno-16-35 id=__codelineno-16-35 name=__codelineno-16-35></a><span class=err>                    export-policy all</span>
</span><span id=__span-16-36><a href=#__codelineno-16-36 id=__codelineno-16-36 name=__codelineno-16-36></a><span class=err>                    import-policy all</span>
</span><span id=__span-16-37><a href=#__codelineno-16-37 id=__codelineno-16-37 name=__codelineno-16-37></a><span class=err>                    peer-as</span> <span class=no>100</span>
</span><span id=__span-16-38><a href=#__codelineno-16-38 id=__codelineno-16-38 name=__codelineno-16-38></a><span class=err>                    ipv4-unicast {</span>
</span><span id=__span-16-39><a href=#__codelineno-16-39 id=__codelineno-16-39 name=__codelineno-16-39></a><span class=err>                        admin-state </span><span class=se>disable</span>
</span><span id=__span-16-40><a href=#__codelineno-16-40 id=__codelineno-16-40 name=__codelineno-16-40></a><span class=err>                    }</span>
</span><span id=__span-16-41><a href=#__codelineno-16-41 id=__codelineno-16-41 name=__codelineno-16-41></a><span class=err>                    evpn {</span>
</span><span id=__span-16-42><a href=#__codelineno-16-42 id=__codelineno-16-42 name=__codelineno-16-42></a><span class=err>                        admin-state </span><span class=l>enable</span>
</span><span id=__span-16-43><a href=#__codelineno-16-43 id=__codelineno-16-43 name=__codelineno-16-43></a><span class=err>                    }</span>
</span><span id=__span-16-44><a href=#__codelineno-16-44 id=__codelineno-16-44 name=__codelineno-16-44></a><span class=err>                    local-as</span> <span class=no>100</span> <span class=err>{</span>
</span><span id=__span-16-45><a href=#__codelineno-16-45 id=__codelineno-16-45 name=__codelineno-16-45></a><span class=err>                    }</span>
</span><span id=__span-16-46><a href=#__codelineno-16-46 id=__codelineno-16-46 name=__codelineno-16-46></a><span class=err>                    timers {</span>
</span><span id=__span-16-47><a href=#__codelineno-16-47 id=__codelineno-16-47 name=__codelineno-16-47></a><span class=err>                        minimum-advertisement-interval</span> <span class=no>1</span>
</span><span id=__span-16-48><a href=#__codelineno-16-48 id=__codelineno-16-48 name=__codelineno-16-48></a><span class=err>                    }</span>
</span><span id=__span-16-49><a href=#__codelineno-16-49 id=__codelineno-16-49 name=__codelineno-16-49></a><span class=err>                }</span>
</span><span id=__span-16-50><a href=#__codelineno-16-50 id=__codelineno-16-50 name=__codelineno-16-50></a><span class=err>                neighbor </span><span class=no>10.0.0.1 </span><span class=err>{</span>
</span><span id=__span-16-51><a href=#__codelineno-16-51 id=__codelineno-16-51 name=__codelineno-16-51></a><span class=err>                    admin-state </span><span class=l>enable</span>
</span><span id=__span-16-52><a href=#__codelineno-16-52 id=__codelineno-16-52 name=__codelineno-16-52></a><span class=err>                    peer-group iBGP-overlay</span>
</span><span id=__span-16-53><a href=#__codelineno-16-53 id=__codelineno-16-53 name=__codelineno-16-53></a><span class=err>                    transport {</span>
</span><span id=__span-16-54><a href=#__codelineno-16-54 id=__codelineno-16-54 name=__codelineno-16-54></a><span class=err>                        local-address </span><span class=no>10.0.0.2</span>
</span><span id=__span-16-55><a href=#__codelineno-16-55 id=__codelineno-16-55 name=__codelineno-16-55></a><span class=err>                    }</span>
</span><span id=__span-16-56><a href=#__codelineno-16-56 id=__codelineno-16-56 name=__codelineno-16-56></a><span class=err>                }</span>
</span><span id=__span-16-57><a href=#__codelineno-16-57 id=__codelineno-16-57 name=__codelineno-16-57></a><span class=err>                neighbor </span><span class=no>192.168.12.2 </span><span class=err>{</span>
</span><span id=__span-16-58><a href=#__codelineno-16-58 id=__codelineno-16-58 name=__codelineno-16-58></a><span class=err>                    peer-group eBGP-underlay</span>
</span><span id=__span-16-59><a href=#__codelineno-16-59 id=__codelineno-16-59 name=__codelineno-16-59></a><span class=err>                }</span>
</span><span id=__span-16-60><a href=#__codelineno-16-60 id=__codelineno-16-60 name=__codelineno-16-60></a><span class=err>            }</span>
</span><span id=__span-16-61><a href=#__codelineno-16-61 id=__codelineno-16-61 name=__codelineno-16-61></a><span class=err>        }</span>
</span><span id=__span-16-62><a href=#__codelineno-16-62 id=__codelineno-16-62 name=__codelineno-16-62></a><span class=err>    }</span>
</span><span id=__span-16-63><a href=#__codelineno-16-63 id=__codelineno-16-63 name=__codelineno-16-63></a><span class=err>    /network-instance vrf-1 {</span>
</span><span id=__span-16-64><a href=#__codelineno-16-64 id=__codelineno-16-64 name=__codelineno-16-64></a><span class=err>        type mac-vrf</span>
</span><span id=__span-16-65><a href=#__codelineno-16-65 id=__codelineno-16-65 name=__codelineno-16-65></a><span class=err>        admin-state </span><span class=l>enable</span>
</span><span id=__span-16-66><a href=#__codelineno-16-66 id=__codelineno-16-66 name=__codelineno-16-66></a><span class=err>        interface </span><span class=no>ethernet-1/1.0</span><span class=err> {</span>
</span><span id=__span-16-67><a href=#__codelineno-16-67 id=__codelineno-16-67 name=__codelineno-16-67></a><span class=err>        }</span>
</span><span id=__span-16-68><a href=#__codelineno-16-68 id=__codelineno-16-68 name=__codelineno-16-68></a><span class=err>        vxlan-interface </span><span class=no>vxlan1.1</span><span class=err> {</span>
</span><span id=__span-16-69><a href=#__codelineno-16-69 id=__codelineno-16-69 name=__codelineno-16-69></a><span class=err>        }</span>
</span><span id=__span-16-70><a href=#__codelineno-16-70 id=__codelineno-16-70 name=__codelineno-16-70></a><span class=err>        protocols {</span>
</span><span id=__span-16-71><a href=#__codelineno-16-71 id=__codelineno-16-71 name=__codelineno-16-71></a><span class=err>            bgp-evpn {</span>
</span><span id=__span-16-72><a href=#__codelineno-16-72 id=__codelineno-16-72 name=__codelineno-16-72></a><span class=err>                bgp-instance</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-16-73><a href=#__codelineno-16-73 id=__codelineno-16-73 name=__codelineno-16-73></a><span class=err>                    admin-state </span><span class=l>enable</span>
</span><span id=__span-16-74><a href=#__codelineno-16-74 id=__codelineno-16-74 name=__codelineno-16-74></a><span class=err>                    vxlan-interface </span><span class=no>vxlan1.1</span>
</span><span id=__span-16-75><a href=#__codelineno-16-75 id=__codelineno-16-75 name=__codelineno-16-75></a><span class=err>                    evi</span> <span class=no>111</span>
</span><span id=__span-16-76><a href=#__codelineno-16-76 id=__codelineno-16-76 name=__codelineno-16-76></a><span class=err>                }</span>
</span><span id=__span-16-77><a href=#__codelineno-16-77 id=__codelineno-16-77 name=__codelineno-16-77></a><span class=err>            }</span>
</span><span id=__span-16-78><a href=#__codelineno-16-78 id=__codelineno-16-78 name=__codelineno-16-78></a><span class=err>            bgp-vpn {</span>
</span><span id=__span-16-79><a href=#__codelineno-16-79 id=__codelineno-16-79 name=__codelineno-16-79></a><span class=err>                bgp-instance</span> <span class=no>1</span> <span class=err>{</span>
</span><span id=__span-16-80><a href=#__codelineno-16-80 id=__codelineno-16-80 name=__codelineno-16-80></a><span class=err>                    route-target {</span>
</span><span id=__span-16-81><a href=#__codelineno-16-81 id=__codelineno-16-81 name=__codelineno-16-81></a><span class=err>                        export-rt </span><span class=no>target:100:111</span>
</span><span id=__span-16-82><a href=#__codelineno-16-82 id=__codelineno-16-82 name=__codelineno-16-82></a><span class=err>                        import-rt </span><span class=no>target:100:111</span>
</span><span id=__span-16-83><a href=#__codelineno-16-83 id=__codelineno-16-83 name=__codelineno-16-83></a><span class=err>                    }</span>
</span><span id=__span-16-84><a href=#__codelineno-16-84 id=__codelineno-16-84 name=__codelineno-16-84></a><span class=err>                }</span>
</span><span id=__span-16-85><a href=#__codelineno-16-85 id=__codelineno-16-85 name=__codelineno-16-85></a><span class=err>            }</span>
</span><span id=__span-16-86><a href=#__codelineno-16-86 id=__codelineno-16-86 name=__codelineno-16-86></a><span class=err>        }</span>
</span><span id=__span-16-87><a href=#__codelineno-16-87 id=__codelineno-16-87 name=__codelineno-16-87></a><span class=err>    }</span>
</span><span id=__span-16-88><a href=#__codelineno-16-88 id=__codelineno-16-88 name=__codelineno-16-88></a>
</span><span id=__span-16-89><a href=#__codelineno-16-89 id=__codelineno-16-89 name=__codelineno-16-89></a><span class=err>    /interface </span><span class=no>ethernet-1/1</span><span class=err> {</span>
</span><span id=__span-16-90><a href=#__codelineno-16-90 id=__codelineno-16-90 name=__codelineno-16-90></a><span class=err>        vlan-tagging </span><span class=l>true</span>
</span><span id=__span-16-91><a href=#__codelineno-16-91 id=__codelineno-16-91 name=__codelineno-16-91></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-16-92><a href=#__codelineno-16-92 id=__codelineno-16-92 name=__codelineno-16-92></a><span class=err>            type bridged</span>
</span><span id=__span-16-93><a href=#__codelineno-16-93 id=__codelineno-16-93 name=__codelineno-16-93></a><span class=err>            admin-state </span><span class=l>enable</span>
</span><span id=__span-16-94><a href=#__codelineno-16-94 id=__codelineno-16-94 name=__codelineno-16-94></a><span class=err>            vlan {</span>
</span><span id=__span-16-95><a href=#__codelineno-16-95 id=__codelineno-16-95 name=__codelineno-16-95></a><span class=err>                encap {</span>
</span><span id=__span-16-96><a href=#__codelineno-16-96 id=__codelineno-16-96 name=__codelineno-16-96></a><span class=err>                    untagged {</span>
</span><span id=__span-16-97><a href=#__codelineno-16-97 id=__codelineno-16-97 name=__codelineno-16-97></a><span class=err>                    }</span>
</span><span id=__span-16-98><a href=#__codelineno-16-98 id=__codelineno-16-98 name=__codelineno-16-98></a><span class=err>                }</span>
</span><span id=__span-16-99><a href=#__codelineno-16-99 id=__codelineno-16-99 name=__codelineno-16-99></a><span class=err>            }</span>
</span><span id=__span-16-100><a href=#__codelineno-16-100 id=__codelineno-16-100 name=__codelineno-16-100></a><span class=err>        }</span>
</span><span id=__span-16-101><a href=#__codelineno-16-101 id=__codelineno-16-101 name=__codelineno-16-101></a><span class=err>    }</span>
</span><span id=__span-16-102><a href=#__codelineno-16-102 id=__codelineno-16-102 name=__codelineno-16-102></a><span class=err>    interface </span><span class=no>ethernet-1/49</span><span class=err> {</span>
</span><span id=__span-16-103><a href=#__codelineno-16-103 id=__codelineno-16-103 name=__codelineno-16-103></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-16-104><a href=#__codelineno-16-104 id=__codelineno-16-104 name=__codelineno-16-104></a><span class=err>            ipv4 {</span>
</span><span id=__span-16-105><a href=#__codelineno-16-105 id=__codelineno-16-105 name=__codelineno-16-105></a><span class=err>                address </span><span class=no>192.168.12.1/30 </span><span class=err>{</span>
</span><span id=__span-16-106><a href=#__codelineno-16-106 id=__codelineno-16-106 name=__codelineno-16-106></a><span class=err>                }</span>
</span><span id=__span-16-107><a href=#__codelineno-16-107 id=__codelineno-16-107 name=__codelineno-16-107></a><span class=err>            }</span>
</span><span id=__span-16-108><a href=#__codelineno-16-108 id=__codelineno-16-108 name=__codelineno-16-108></a><span class=err>        }</span>
</span><span id=__span-16-109><a href=#__codelineno-16-109 id=__codelineno-16-109 name=__codelineno-16-109></a><span class=err>    }</span>
</span><span id=__span-16-110><a href=#__codelineno-16-110 id=__codelineno-16-110 name=__codelineno-16-110></a><span class=err>    interface </span><span class=no>system0</span><span class=err> {</span>
</span><span id=__span-16-111><a href=#__codelineno-16-111 id=__codelineno-16-111 name=__codelineno-16-111></a><span class=err>        admin-state </span><span class=l>enable</span>
</span><span id=__span-16-112><a href=#__codelineno-16-112 id=__codelineno-16-112 name=__codelineno-16-112></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-16-113><a href=#__codelineno-16-113 id=__codelineno-16-113 name=__codelineno-16-113></a><span class=err>            ipv4 {</span>
</span><span id=__span-16-114><a href=#__codelineno-16-114 id=__codelineno-16-114 name=__codelineno-16-114></a><span class=err>                address </span><span class=no>10.0.0.2/32 </span><span class=err>{</span>
</span><span id=__span-16-115><a href=#__codelineno-16-115 id=__codelineno-16-115 name=__codelineno-16-115></a><span class=err>                }</span>
</span><span id=__span-16-116><a href=#__codelineno-16-116 id=__codelineno-16-116 name=__codelineno-16-116></a><span class=err>            }</span>
</span><span id=__span-16-117><a href=#__codelineno-16-117 id=__codelineno-16-117 name=__codelineno-16-117></a><span class=err>        }</span>
</span><span id=__span-16-118><a href=#__codelineno-16-118 id=__codelineno-16-118 name=__codelineno-16-118></a><span class=err>    }</span>
</span><span id=__span-16-119><a href=#__codelineno-16-119 id=__codelineno-16-119 name=__codelineno-16-119></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-17-1><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a><span class=kr>enter</span><span class=err> candidate</span>
</span><span id=__span-17-2><a href=#__codelineno-17-2 id=__codelineno-17-2 name=__codelineno-17-2></a><span class=err>    /routing-policy {</span>
</span><span id=__span-17-3><a href=#__codelineno-17-3 id=__codelineno-17-3 name=__codelineno-17-3></a><span class=err>        policy all {</span>
</span><span id=__span-17-4><a href=#__codelineno-17-4 id=__codelineno-17-4 name=__codelineno-17-4></a><span class=err>            default-action {</span>
</span><span id=__span-17-5><a href=#__codelineno-17-5 id=__codelineno-17-5 name=__codelineno-17-5></a><span class=err>                policy-result </span><span class=l>accept</span>
</span><span id=__span-17-6><a href=#__codelineno-17-6 id=__codelineno-17-6 name=__codelineno-17-6></a><span class=err>            }</span>
</span><span id=__span-17-7><a href=#__codelineno-17-7 id=__codelineno-17-7 name=__codelineno-17-7></a><span class=err>        }</span>
</span><span id=__span-17-8><a href=#__codelineno-17-8 id=__codelineno-17-8 name=__codelineno-17-8></a><span class=err>    }</span>
</span><span id=__span-17-9><a href=#__codelineno-17-9 id=__codelineno-17-9 name=__codelineno-17-9></a>
</span><span id=__span-17-10><a href=#__codelineno-17-10 id=__codelineno-17-10 name=__codelineno-17-10></a><span class=err>    /network-instance default {</span>
</span><span id=__span-17-11><a href=#__codelineno-17-11 id=__codelineno-17-11 name=__codelineno-17-11></a><span class=err>        interface </span><span class=no>ethernet-1/1.0</span><span class=err> {</span>
</span><span id=__span-17-12><a href=#__codelineno-17-12 id=__codelineno-17-12 name=__codelineno-17-12></a><span class=err>        }</span>
</span><span id=__span-17-13><a href=#__codelineno-17-13 id=__codelineno-17-13 name=__codelineno-17-13></a><span class=err>        interface </span><span class=no>ethernet-1/2.0</span><span class=err> {</span>
</span><span id=__span-17-14><a href=#__codelineno-17-14 id=__codelineno-17-14 name=__codelineno-17-14></a><span class=err>        }</span>
</span><span id=__span-17-15><a href=#__codelineno-17-15 id=__codelineno-17-15 name=__codelineno-17-15></a><span class=err>        interface </span><span class=no>system0.0</span><span class=err> {</span>
</span><span id=__span-17-16><a href=#__codelineno-17-16 id=__codelineno-17-16 name=__codelineno-17-16></a><span class=err>        }</span>
</span><span id=__span-17-17><a href=#__codelineno-17-17 id=__codelineno-17-17 name=__codelineno-17-17></a><span class=err>        protocols {</span>
</span><span id=__span-17-18><a href=#__codelineno-17-18 id=__codelineno-17-18 name=__codelineno-17-18></a><span class=err>            bgp {</span>
</span><span id=__span-17-19><a href=#__codelineno-17-19 id=__codelineno-17-19 name=__codelineno-17-19></a><span class=err>                autonomous-system</span> <span class=no>201</span>
</span><span id=__span-17-20><a href=#__codelineno-17-20 id=__codelineno-17-20 name=__codelineno-17-20></a><span class=err>                router-id </span><span class=no>10.0.1.1</span>
</span><span id=__span-17-21><a href=#__codelineno-17-21 id=__codelineno-17-21 name=__codelineno-17-21></a><span class=err>                group eBGP-underlay {</span>
</span><span id=__span-17-22><a href=#__codelineno-17-22 id=__codelineno-17-22 name=__codelineno-17-22></a><span class=err>                    export-policy all</span>
</span><span id=__span-17-23><a href=#__codelineno-17-23 id=__codelineno-17-23 name=__codelineno-17-23></a><span class=err>                    import-policy all</span>
</span><span id=__span-17-24><a href=#__codelineno-17-24 id=__codelineno-17-24 name=__codelineno-17-24></a><span class=err>                }</span>
</span><span id=__span-17-25><a href=#__codelineno-17-25 id=__codelineno-17-25 name=__codelineno-17-25></a><span class=err>                ipv4-unicast {</span>
</span><span id=__span-17-26><a href=#__codelineno-17-26 id=__codelineno-17-26 name=__codelineno-17-26></a><span class=err>                    admin-state </span><span class=l>enable</span>
</span><span id=__span-17-27><a href=#__codelineno-17-27 id=__codelineno-17-27 name=__codelineno-17-27></a><span class=err>                }</span>
</span><span id=__span-17-28><a href=#__codelineno-17-28 id=__codelineno-17-28 name=__codelineno-17-28></a><span class=err>                neighbor </span><span class=no>192.168.11.1 </span><span class=err>{</span>
</span><span id=__span-17-29><a href=#__codelineno-17-29 id=__codelineno-17-29 name=__codelineno-17-29></a><span class=err>                    peer-as</span> <span class=no>101</span>
</span><span id=__span-17-30><a href=#__codelineno-17-30 id=__codelineno-17-30 name=__codelineno-17-30></a><span class=err>                    peer-group eBGP-underlay</span>
</span><span id=__span-17-31><a href=#__codelineno-17-31 id=__codelineno-17-31 name=__codelineno-17-31></a><span class=err>                }</span>
</span><span id=__span-17-32><a href=#__codelineno-17-32 id=__codelineno-17-32 name=__codelineno-17-32></a><span class=err>                neighbor </span><span class=no>192.168.12.1 </span><span class=err>{</span>
</span><span id=__span-17-33><a href=#__codelineno-17-33 id=__codelineno-17-33 name=__codelineno-17-33></a><span class=err>                    peer-as</span> <span class=no>102</span>
</span><span id=__span-17-34><a href=#__codelineno-17-34 id=__codelineno-17-34 name=__codelineno-17-34></a><span class=err>                    peer-group eBGP-underlay</span>
</span><span id=__span-17-35><a href=#__codelineno-17-35 id=__codelineno-17-35 name=__codelineno-17-35></a><span class=err>                }</span>
</span><span id=__span-17-36><a href=#__codelineno-17-36 id=__codelineno-17-36 name=__codelineno-17-36></a><span class=err>            }</span>
</span><span id=__span-17-37><a href=#__codelineno-17-37 id=__codelineno-17-37 name=__codelineno-17-37></a><span class=err>        }</span>
</span><span id=__span-17-38><a href=#__codelineno-17-38 id=__codelineno-17-38 name=__codelineno-17-38></a><span class=err>    }</span>
</span><span id=__span-17-39><a href=#__codelineno-17-39 id=__codelineno-17-39 name=__codelineno-17-39></a>
</span><span id=__span-17-40><a href=#__codelineno-17-40 id=__codelineno-17-40 name=__codelineno-17-40></a><span class=err>    /interface </span><span class=no>ethernet-1/1</span><span class=err> {</span>
</span><span id=__span-17-41><a href=#__codelineno-17-41 id=__codelineno-17-41 name=__codelineno-17-41></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-17-42><a href=#__codelineno-17-42 id=__codelineno-17-42 name=__codelineno-17-42></a><span class=err>            ipv4 {</span>
</span><span id=__span-17-43><a href=#__codelineno-17-43 id=__codelineno-17-43 name=__codelineno-17-43></a><span class=err>                address </span><span class=no>192.168.11.2/30 </span><span class=err>{</span>
</span><span id=__span-17-44><a href=#__codelineno-17-44 id=__codelineno-17-44 name=__codelineno-17-44></a><span class=err>                }</span>
</span><span id=__span-17-45><a href=#__codelineno-17-45 id=__codelineno-17-45 name=__codelineno-17-45></a><span class=err>            }</span>
</span><span id=__span-17-46><a href=#__codelineno-17-46 id=__codelineno-17-46 name=__codelineno-17-46></a><span class=err>        }</span>
</span><span id=__span-17-47><a href=#__codelineno-17-47 id=__codelineno-17-47 name=__codelineno-17-47></a><span class=err>    }</span>
</span><span id=__span-17-48><a href=#__codelineno-17-48 id=__codelineno-17-48 name=__codelineno-17-48></a><span class=err>    interface </span><span class=no>ethernet-1/2</span><span class=err> {</span>
</span><span id=__span-17-49><a href=#__codelineno-17-49 id=__codelineno-17-49 name=__codelineno-17-49></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-17-50><a href=#__codelineno-17-50 id=__codelineno-17-50 name=__codelineno-17-50></a><span class=err>            ipv4 {</span>
</span><span id=__span-17-51><a href=#__codelineno-17-51 id=__codelineno-17-51 name=__codelineno-17-51></a><span class=err>                address </span><span class=no>192.168.12.2/30 </span><span class=err>{</span>
</span><span id=__span-17-52><a href=#__codelineno-17-52 id=__codelineno-17-52 name=__codelineno-17-52></a><span class=err>                }</span>
</span><span id=__span-17-53><a href=#__codelineno-17-53 id=__codelineno-17-53 name=__codelineno-17-53></a><span class=err>            }</span>
</span><span id=__span-17-54><a href=#__codelineno-17-54 id=__codelineno-17-54 name=__codelineno-17-54></a><span class=err>        }</span>
</span><span id=__span-17-55><a href=#__codelineno-17-55 id=__codelineno-17-55 name=__codelineno-17-55></a><span class=err>    }</span>
</span><span id=__span-17-56><a href=#__codelineno-17-56 id=__codelineno-17-56 name=__codelineno-17-56></a><span class=err>    interface </span><span class=no>system0</span><span class=err> {</span>
</span><span id=__span-17-57><a href=#__codelineno-17-57 id=__codelineno-17-57 name=__codelineno-17-57></a><span class=err>        admin-state </span><span class=l>enable</span>
</span><span id=__span-17-58><a href=#__codelineno-17-58 id=__codelineno-17-58 name=__codelineno-17-58></a><span class=err>        subinterface</span> <span class=no>0</span> <span class=err>{</span>
</span><span id=__span-17-59><a href=#__codelineno-17-59 id=__codelineno-17-59 name=__codelineno-17-59></a><span class=err>            ipv4 {</span>
</span><span id=__span-17-60><a href=#__codelineno-17-60 id=__codelineno-17-60 name=__codelineno-17-60></a><span class=err>                address </span><span class=no>10.0.1.1/32 </span><span class=err>{</span>
</span><span id=__span-17-61><a href=#__codelineno-17-61 id=__codelineno-17-61 name=__codelineno-17-61></a><span class=err>                }</span>
</span><span id=__span-17-62><a href=#__codelineno-17-62 id=__codelineno-17-62 name=__codelineno-17-62></a><span class=err>            }</span>
</span><span id=__span-17-63><a href=#__codelineno-17-63 id=__codelineno-17-63 name=__codelineno-17-63></a><span class=err>        }</span>
</span><span id=__span-17-64><a href=#__codelineno-17-64 id=__codelineno-17-64 name=__codelineno-17-64></a><span class=err>    }</span>
</span><span id=__span-17-65><a href=#__codelineno-17-65 id=__codelineno-17-65 name=__codelineno-17-65></a><span class=kr>commit</span><span class=err> now</span>
</span></code></pre></div> </div> <div class=tabbed-block> <p>configuring static MAC and IP on the single interface of a server <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>clab-evpn01-srv1<span class=w> </span>bash
</span><span id=__span-18-2><a href=#__codelineno-18-2 id=__codelineno-18-2 name=__codelineno-18-2></a>
</span><span id=__span-18-3><a href=#__codelineno-18-3 id=__codelineno-18-3 name=__codelineno-18-3></a>ip<span class=w> </span>link<span class=w> </span><span class=nb>set</span><span class=w> </span>address<span class=w> </span><span class=m>00</span>:c1:ab:00:00:01<span class=w> </span>dev<span class=w> </span>eth1
</span><span id=__span-18-4><a href=#__codelineno-18-4 id=__codelineno-18-4 name=__codelineno-18-4></a>ip<span class=w> </span>addr<span class=w> </span>add<span class=w> </span><span class=m>192</span>.168.0.1/24<span class=w> </span>dev<span class=w> </span>eth1
</span></code></pre></div></p> </div> <div class=tabbed-block> <p>configuring static MAC and IP on the single interface of a server <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>clab-evpn01-srv2<span class=w> </span>bash
</span><span id=__span-19-2><a href=#__codelineno-19-2 id=__codelineno-19-2 name=__codelineno-19-2></a>
</span><span id=__span-19-3><a href=#__codelineno-19-3 id=__codelineno-19-3 name=__codelineno-19-3></a>ip<span class=w> </span>link<span class=w> </span><span class=nb>set</span><span class=w> </span>address<span class=w> </span><span class=m>00</span>:c1:ab:00:00:02<span class=w> </span>dev<span class=w> </span>eth1
</span><span id=__span-19-4><a href=#__codelineno-19-4 id=__codelineno-19-4 name=__codelineno-19-4></a>ip<span class=w> </span>addr<span class=w> </span>add<span class=w> </span><span class=m>192</span>.168.0.2/24<span class=w> </span>dev<span class=w> </span>eth1
</span></code></pre></div></p> </div> </div> </div> </details> <h2 id=verification>Verification<a class=headerlink href=#verification title="Permanent link">#</a></h2> <h3 id=evpn-imet-routes>EVPN IMET routes<a class=headerlink href=#evpn-imet-routes title="Permanent link">#</a></h3> <p>When the BGP-EVPN is configured in the mac-vrf instance, the leafs start to exchange EVPN routes, which we can verify with the following commands:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-20-1><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a>A:leaf1# <span class=n>/show network-instance default protocols bgp neighbor 10.0.0.2</span>
</span><span id=__span-20-2><a href=#__codelineno-20-2 id=__codelineno-20-2 name=__codelineno-20-2></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-20-3><a href=#__codelineno-20-3 id=__codelineno-20-3 name=__codelineno-20-3></a><span class=err>BGP neighbor summary for network-instance</span><span class=l> "default"</span>
</span><span id=__span-20-4><a href=#__codelineno-20-4 id=__codelineno-20-4 name=__codelineno-20-4></a><span class=err>Flags: S static, D dynamic, L discovered by LLDP, B BFD </span><span class=l>enabled</span><span class=err>, - </span><span class=se>disabled</span><span class=err>, * slow</span>
</span><span id=__span-20-5><a href=#__codelineno-20-5 id=__codelineno-20-5 name=__codelineno-20-5></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-20-6><a href=#__codelineno-20-6 id=__codelineno-20-6 name=__codelineno-20-6></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-20-7><a href=#__codelineno-20-7 id=__codelineno-20-7 name=__codelineno-20-7></a><span class=err>+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+</span>
</span><span id=__span-20-8><a href=#__codelineno-20-8 id=__codelineno-20-8 name=__codelineno-20-8></a><span class=err>| Net-Inst  |   Peer    |   Group   |   Flags   |  Peer-AS  |   State   |  Uptime   | AFI/SAFI  | [Rx/Activ |</span>
</span><span id=__span-20-9><a href=#__codelineno-20-9 id=__codelineno-20-9 name=__codelineno-20-9></a><span class=err>|           |           |           |           |           |           |           |           |   e/Tx]   |</span>
</span><span id=__span-20-10><a href=#__codelineno-20-10 id=__codelineno-20-10 name=__codelineno-20-10></a><span class=err>+===========+===========+===========+===========+===========+===========+===========+===========+===========+</span>
</span><span id=__span-20-11><a href=#__codelineno-20-11 id=__codelineno-20-11 name=__codelineno-20-11></a><span class=err>| default   | </span><span class=no>10.0.0.2 </span><span class=err> | iBGP-     | S         |</span> <span class=no>100</span> <span class=err>      | establish | 0d:0h:2m: | evpn      | </span>[<span class=no>1</span>/<span class=no>1</span>/<span class=no>1</span><span class=err>]   |</span>
</span><span id=__span-20-12><a href=#__codelineno-20-12 id=__codelineno-20-12 name=__codelineno-20-12></a><span class=err>|           |           | overlay   |           |           | ed        | 9s        |           |           |</span>
</span><span id=__span-20-13><a href=#__codelineno-20-13 id=__codelineno-20-13 name=__codelineno-20-13></a><span class=err>+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+</span>
</span></code></pre></div> <p>The single route that the leaf1 received/sent is an <a href=https://datatracker.ietf.org/doc/html/rfc8365#section-9>EVPN Inclusive Multicast Ethernet Tag</a> route (IMET or type 3, RT3).</p> <p>The IMET route is advertised as soon as bgp-evpn is enabled in the MAC-VRF; it has the following purpose:</p> <ul> <li>Auto-discovery of the remote VTEPs attached to the same EVI</li> <li>Creation of a default flooding list in the MAC-VRF so that BUM frames are replicated</li> </ul> <p>The IMET/RT3 routes can be viewed in summary and detailed modes:</p> <div class="tabbed-set tabbed-alternate" data-tabs=5:2><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>RT3 summary</label><label for=__tabbed_5_2>RT3 detailed</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-21-1><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a>A:leaf1# <span class=n>/show network-instance default protocols bgp routes evpn route-type 3 summary</span>
</span><span id=__span-21-2><a href=#__codelineno-21-2 id=__codelineno-21-2 name=__codelineno-21-2></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-21-3><a href=#__codelineno-21-3 id=__codelineno-21-3 name=__codelineno-21-3></a><span class=err>Show report for the BGP route table of network-instance</span><span class=l> "default"</span>
</span><span id=__span-21-4><a href=#__codelineno-21-4 id=__codelineno-21-4 name=__codelineno-21-4></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-21-5><a href=#__codelineno-21-5 id=__codelineno-21-5 name=__codelineno-21-5></a><span class=err>Status codes: u=used, *=valid, &gt;=best, x=stale</span>
</span><span id=__span-21-6><a href=#__codelineno-21-6 id=__codelineno-21-6 name=__codelineno-21-6></a><span class=err>Origin codes: i=IGP, e=EGP, ?=incomplete</span>
</span><span id=__span-21-7><a href=#__codelineno-21-7 id=__codelineno-21-7 name=__codelineno-21-7></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-21-8><a href=#__codelineno-21-8 id=__codelineno-21-8 name=__codelineno-21-8></a><span class=err>BGP Router ID: </span><span class=no>10.0.0.1 </span><span class=err>     AS:</span> <span class=no>101</span> <span class=err>     Local AS:</span> <span class=no>101</span>
</span><span id=__span-21-9><a href=#__codelineno-21-9 id=__codelineno-21-9 name=__codelineno-21-9></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-21-10><a href=#__codelineno-21-10 id=__codelineno-21-10 name=__codelineno-21-10></a><span class=err>Type</span> <span class=no>3</span> <span class=err>Inclusive Multicast Ethernet Tag Routes</span>
</span><span id=__span-21-11><a href=#__codelineno-21-11 id=__codelineno-21-11 name=__codelineno-21-11></a><span class=err>+--------+---------------------+------------+---------------------+---------------------+---------------------+</span>
</span><span id=__span-21-12><a href=#__codelineno-21-12 id=__codelineno-21-12 name=__codelineno-21-12></a><span class=err>| Status | Route-distinguisher |   Tag-ID   |    Originator-IP    |      neighbor       |      Next-Hop       |</span>
</span><span id=__span-21-13><a href=#__codelineno-21-13 id=__codelineno-21-13 name=__codelineno-21-13></a><span class=err>+========+=====================+============+=====================+=====================+=====================+</span>
</span><span id=__span-21-14><a href=#__codelineno-21-14 id=__codelineno-21-14 name=__codelineno-21-14></a><span class=err>| u*&gt;    | 10.0.0.2:111        |</span> <span class=no>0</span> <span class=err>         | </span><span class=no>10.0.0.2 </span><span class=err>           | </span><span class=no>10.0.0.2 </span><span class=err>           | </span><span class=no>10.0.0.2 </span><span class=err>           |</span>
</span><span id=__span-21-15><a href=#__codelineno-21-15 id=__codelineno-21-15 name=__codelineno-21-15></a><span class=err>+--------+---------------------+------------+---------------------+---------------------+---------------------+</span>
</span><span id=__span-21-16><a href=#__codelineno-21-16 id=__codelineno-21-16 name=__codelineno-21-16></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-21-17><a href=#__codelineno-21-17 id=__codelineno-21-17 name=__codelineno-21-17></a><span class=no>1</span> <span class=err>Inclusive Multicast Ethernet Tag routes</span> <span class=no>0</span> <span class=err>used,</span> <span class=no>1</span> <span class=err>valid</span>
</span><span id=__span-21-18><a href=#__codelineno-21-18 id=__codelineno-21-18 name=__codelineno-21-18></a><span class=c>----------------------------------------------------------------------------------------------------------------</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-srl highlight"><pre><span></span><code><span id=__span-22-1><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a>A:leaf1# <span class=n>/show network-instance default protocols bgp routes evpn route-type 3 detail</span>
</span><span id=__span-22-2><a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a><span class=c>-------------------------------------------------------------------------------------</span>
</span><span id=__span-22-3><a href=#__codelineno-22-3 id=__codelineno-22-3 name=__codelineno-22-3></a><span class=err>Show report for the EVPN routes in network-instance </span><span class=l> "default"</span>
</span><span id=__span-22-4><a href=#__codelineno-22-4 id=__codelineno-22-4 name=__codelineno-22-4></a><span class=c>-------------------------------------------------------------------------------------</span>
</span><span id=__span-22-5><a href=#__codelineno-22-5 id=__codelineno-22-5 name=__codelineno-22-5></a><span class=err>Route Distinguisher: 10.0.0.2:111</span>
</span><span id=__span-22-6><a href=#__codelineno-22-6 id=__codelineno-22-6 name=__codelineno-22-6></a><span class=err>Tag-ID             :</span> <span class=no>0</span>
</span><span id=__span-22-7><a href=#__codelineno-22-7 id=__codelineno-22-7 name=__codelineno-22-7></a><span class=err>Originating router : </span><span class=no>10.0.0.2</span>
</span><span id=__span-22-8><a href=#__codelineno-22-8 id=__codelineno-22-8 name=__codelineno-22-8></a><span class=err>neighbor           : </span><span class=no>10.0.0.2</span>
</span><span id=__span-22-9><a href=#__codelineno-22-9 id=__codelineno-22-9 name=__codelineno-22-9></a><span class=err>Received paths     :</span> <span class=no>1</span>
</span><span id=__span-22-10><a href=#__codelineno-22-10 id=__codelineno-22-10 name=__codelineno-22-10></a><span class=err>Path 1: &lt;Best,Valid,Used,&gt;</span>
</span><span id=__span-22-11><a href=#__codelineno-22-11 id=__codelineno-22-11 name=__codelineno-22-11></a><span class=err>    VNI             :</span> <span class=no>1</span>
</span><span id=__span-22-12><a href=#__codelineno-22-12 id=__codelineno-22-12 name=__codelineno-22-12></a><span class=err>    Route source    : neighbor </span><span class=no>10.0.0.2 </span><span class=err>(last modified 2m3s ago)</span>
</span><span id=__span-22-13><a href=#__codelineno-22-13 id=__codelineno-22-13 name=__codelineno-22-13></a><span class=err>    Route preference: No MED, LocalPref is</span> <span class=no>100</span>
</span><span id=__span-22-14><a href=#__codelineno-22-14 id=__codelineno-22-14 name=__codelineno-22-14></a><span class=err>    Atomic Aggr     : </span><span class=se>false</span>
</span><span id=__span-22-15><a href=#__codelineno-22-15 id=__codelineno-22-15 name=__codelineno-22-15></a><span class=err>    BGP next-hop    : </span><span class=no>10.0.0.2</span>
</span><span id=__span-22-16><a href=#__codelineno-22-16 id=__codelineno-22-16 name=__codelineno-22-16></a><span class=err>    AS Path         :  i</span>
</span><span id=__span-22-17><a href=#__codelineno-22-17 id=__codelineno-22-17 name=__codelineno-22-17></a><span class=err>    Communities     : [</span><span class=no>target:100:111,</span><span class=err> bgp-tunnel-encap:VXLAN]</span>
</span><span id=__span-22-18><a href=#__codelineno-22-18 id=__codelineno-22-18 name=__codelineno-22-18></a><span class=err>    RR Attributes   : No Originator-ID, Cluster-List is []</span>
</span><span id=__span-22-19><a href=#__codelineno-22-19 id=__codelineno-22-19 name=__codelineno-22-19></a><span class=err>    Aggregation     : None</span>
</span><span id=__span-22-20><a href=#__codelineno-22-20 id=__codelineno-22-20 name=__codelineno-22-20></a><span class=err>    Unknown Attr    : None</span>
</span><span id=__span-22-21><a href=#__codelineno-22-21 id=__codelineno-22-21 name=__codelineno-22-21></a><span class=err>    Invalid Reason  : None</span>
</span><span id=__span-22-22><a href=#__codelineno-22-22 id=__codelineno-22-22 name=__codelineno-22-22></a><span class=err>    Tie Break Reason: none</span>
</span><span id=__span-22-23><a href=#__codelineno-22-23 id=__codelineno-22-23 name=__codelineno-22-23></a><span class=c>--------------------------------------------------------------------------------------</span>
</span></code></pre></div> </div> </div> </div> <details class=info> <summary>Lets capture those routes?</summary> <p>Since our lab is launched with containerlab, we can leverage the transparent sniffing of packets that <a href=https://containerlab.srlinux.dev/manual/wireshark/ >it offers</a>.</p> <p>By capturing on the <code>e1-49</code> interface of the <code>clab-evpn01-leaf1</code> container, we are able to collect all the packets that are flowing between the nodes. Then we simply flap the EVPN instance in the <code>vrf-1</code> network instance to trigger the BGP updates to flow and see them in the live capture.</p> <p><a href=https://github.com/srl-labs/learn-srlinux/blob/master/docs/tutorials/l2evpn/evpn01-imet-routes.pcapng>Here is the pcap file</a> with the IMET routes advertisements between <code>leaf1</code> and <code>leaf2</code>.</p> </details> <p>When the IMET routes from <code>leaf2</code> are imported for <code>vrf-1</code> network-instance, the corresponding multicast VXLAN destinations are added and can be checked with the following command:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-23-1><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a>A:leaf1# <span class=n>show tunnel-interface vxlan1 vxlan-interface 1 bridge-table multicast-destinations destination *</span>
</span><span id=__span-23-2><a href=#__codelineno-23-2 id=__codelineno-23-2 name=__codelineno-23-2></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-23-3><a href=#__codelineno-23-3 id=__codelineno-23-3 name=__codelineno-23-3></a><span class=err>Show report for vxlan-interface </span><span class=no>vxlan1.1</span><span class=err> multicast destinations (flooding-list)</span>
</span><span id=__span-23-4><a href=#__codelineno-23-4 id=__codelineno-23-4 name=__codelineno-23-4></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-23-5><a href=#__codelineno-23-5 id=__codelineno-23-5 name=__codelineno-23-5></a><span class=err>+--------------+------------+-------------------+----------------------+</span>
</span><span id=__span-23-6><a href=#__codelineno-23-6 id=__codelineno-23-6 name=__codelineno-23-6></a><span class=err>| VTEP Address | Egress VNI | Destination-index | Multicast-forwarding |</span>
</span><span id=__span-23-7><a href=#__codelineno-23-7 id=__codelineno-23-7 name=__codelineno-23-7></a><span class=err>+==============+============+===================+======================+</span>
</span><span id=__span-23-8><a href=#__codelineno-23-8 id=__codelineno-23-8 name=__codelineno-23-8></a><span class=err>| </span><span class=no>10.0.0.2 </span><span class=err>    |</span> <span class=no>1</span> <span class=err>         |</span> <span class=no>160078821962</span> <span class=err>     | BUM                  |</span>
</span><span id=__span-23-9><a href=#__codelineno-23-9 id=__codelineno-23-9 name=__codelineno-23-9></a><span class=err>+--------------+------------+-------------------+----------------------+</span>
</span><span id=__span-23-10><a href=#__codelineno-23-10 id=__codelineno-23-10 name=__codelineno-23-10></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-23-11><a href=#__codelineno-23-11 id=__codelineno-23-11 name=__codelineno-23-11></a><span class=err>Summary</span>
</span><span id=__span-23-12><a href=#__codelineno-23-12 id=__codelineno-23-12 name=__codelineno-23-12></a><span class=err> </span> <span class=no>1</span> <span class=err>multicast-destinations</span>
</span><span id=__span-23-13><a href=#__codelineno-23-13 id=__codelineno-23-13 name=__codelineno-23-13></a><span class=c>-------------------------------------------------------------------------------</span>
</span></code></pre></div> <p>This multicast destination means that BUM frames received on a bridged sub-interface are ingress-replicated to the VTEPs for that EVI as per the table above. For example any ARP traffic will be distributed (ingress-replicated) to the VTEPs from multicast destinations table.</p> <p>As to the unicast destinations there are none so far, and this is because we haven't yet received any MAC/IP RT2 EVPN routes. But before looking into the RT2 EVPN routes, let's zoom into VXLAN tunnels that got built right after we receive the first IMET RT3 routes.</p> <h3 id=vxlan-tunnels>VXLAN tunnels<a class=headerlink href=#vxlan-tunnels title="Permanent link">#</a></h3> <p>After receiving EVPN routes from the remote leafs with VXLAN encapsulation<sup id=fnref:5><a class=footnote-ref href=#fn:5>5</a></sup>, SR Linux creates VXLAN tunnels towards remote VTEP, whose address is received in EVPN IMET routes. The state of a single remote VTEP we have in our lab is shown below from the <code>leaf1</code> switch.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-24-1><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a>A:leaf1# <span class=n>/show tunnel vxlan-tunnel all</span>
</span><span id=__span-24-2><a href=#__codelineno-24-2 id=__codelineno-24-2 name=__codelineno-24-2></a><span class=c>----------------------------------------------------------</span>
</span><span id=__span-24-3><a href=#__codelineno-24-3 id=__codelineno-24-3 name=__codelineno-24-3></a><span class=err>Show report for vxlan-tunnels</span>
</span><span id=__span-24-4><a href=#__codelineno-24-4 id=__codelineno-24-4 name=__codelineno-24-4></a><span class=c>----------------------------------------------------------</span>
</span><span id=__span-24-5><a href=#__codelineno-24-5 id=__codelineno-24-5 name=__codelineno-24-5></a><span class=err>+--------------+--------------+--------------------------+</span>
</span><span id=__span-24-6><a href=#__codelineno-24-6 id=__codelineno-24-6 name=__codelineno-24-6></a><span class=err>| VTEP Address |    Index     |       Last Change        |</span>
</span><span id=__span-24-7><a href=#__codelineno-24-7 id=__codelineno-24-7 name=__codelineno-24-7></a><span class=err>+==============+==============+==========================+</span>
</span><span id=__span-24-8><a href=#__codelineno-24-8 id=__codelineno-24-8 name=__codelineno-24-8></a><span class=err>| </span><span class=no>10.0.0.2 </span><span class=err>    |</span> <span class=no>160078821947</span> <span class=err>| 2021-07-13T21:13:50.000Z |</span>
</span><span id=__span-24-9><a href=#__codelineno-24-9 id=__codelineno-24-9 name=__codelineno-24-9></a><span class=err>+--------------+--------------+--------------------------+</span>
</span><span id=__span-24-10><a href=#__codelineno-24-10 id=__codelineno-24-10 name=__codelineno-24-10></a><span class=no>1</span> <span class=err>VXLAN tunnels,</span> <span class=no>1</span> <span class=err>active,</span> <span class=no>0</span> <span class=err>inactive</span>
</span><span id=__span-24-11><a href=#__codelineno-24-11 id=__codelineno-24-11 name=__codelineno-24-11></a><span class=c>----------------------------------------------------------</span>
</span></code></pre></div> <p>The VXLAN tunnel is built between the <code>vxlan</code> interfaces in the MAC-VRF network instances, which internally use <code>system</code> interfaces of the <code>default</code> network instance as a VTEP:</p> <div class=mxgraph data-mxgraph='{"page":8,"zoom":4,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;"></div> <p>Once a VTEP is created in the vxlan-tunnel table with a non-zero allocated index<sup id=fnref:6><a class=footnote-ref href=#fn:6>6</a></sup>, an entry in the tunnel-table is also created for the tunnel.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-25-1><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a>A:leaf1# <span class=n>/show network-instance default tunnel-table all</span>
</span><span id=__span-25-2><a href=#__codelineno-25-2 id=__codelineno-25-2 name=__codelineno-25-2></a><span class=c>-------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-25-3><a href=#__codelineno-25-3 id=__codelineno-25-3 name=__codelineno-25-3></a><span class=err>Show report for network instance</span><span class=l> "default" </span><span class=err>tunnel table</span>
</span><span id=__span-25-4><a href=#__codelineno-25-4 id=__codelineno-25-4 name=__codelineno-25-4></a><span class=c>-------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-25-5><a href=#__codelineno-25-5 id=__codelineno-25-5 name=__codelineno-25-5></a><span class=err>+-------------+-----------+-------+-------+--------+------------+----------+--------------------------+</span>
</span><span id=__span-25-6><a href=#__codelineno-25-6 id=__codelineno-25-6 name=__codelineno-25-6></a><span class=err>| IPv4 Prefix |   Owner   | Type  | Index | Metric | Preference | Fib-prog |       Last Update        |</span>
</span><span id=__span-25-7><a href=#__codelineno-25-7 id=__codelineno-25-7 name=__codelineno-25-7></a><span class=err>+=============+===========+=======+=======+========+============+==========+==========================+</span>
</span><span id=__span-25-8><a href=#__codelineno-25-8 id=__codelineno-25-8 name=__codelineno-25-8></a><span class=err>| </span><span class=no>10.0.0.2/32 </span><span class=err>| vxlan_mgr | vxlan |</span> <span class=no>1</span> <span class=err>    |</span> <span class=no>0</span> <span class=err>     |</span> <span class=no>0</span> <span class=err>         | Y        | 2021-07-13T21:13:43.424Z |</span>
</span><span id=__span-25-9><a href=#__codelineno-25-9 id=__codelineno-25-9 name=__codelineno-25-9></a><span class=err>+-------------+-----------+-------+-------+--------+------------+----------+--------------------------+</span>
</span><span id=__span-25-10><a href=#__codelineno-25-10 id=__codelineno-25-10 name=__codelineno-25-10></a><span class=c>-------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-25-11><a href=#__codelineno-25-11 id=__codelineno-25-11 name=__codelineno-25-11></a><span class=no>1</span> <span class=err>VXLAN tunnels,</span> <span class=no>1</span> <span class=err>active,</span> <span class=no>0</span> <span class=err>inactive</span>
</span></code></pre></div> <h3 id=evpn-macip-routes>EVPN MAC/IP routes<a class=headerlink href=#evpn-macip-routes title="Permanent link">#</a></h3> <p>As was mentioned, when the leafs exchanged only EVPN IMET routes they build the BUM flooding tree (aka multicast destinations), but unicast destinations are yet unknown, which is seen in the below output:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-26-1><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a>A:leaf1# <span class=n>show tunnel-interface vxlan1 vxlan-interface 1 bridge-table unicast-destinations destination *</span>
</span><span id=__span-26-2><a href=#__codelineno-26-2 id=__codelineno-26-2 name=__codelineno-26-2></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-26-3><a href=#__codelineno-26-3 id=__codelineno-26-3 name=__codelineno-26-3></a><span class=err>Show report for vxlan-interface </span><span class=no>vxlan1.1</span><span class=err> unicast destinations</span>
</span><span id=__span-26-4><a href=#__codelineno-26-4 id=__codelineno-26-4 name=__codelineno-26-4></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-26-5><a href=#__codelineno-26-5 id=__codelineno-26-5 name=__codelineno-26-5></a><span class=err>Destinations</span>
</span><span id=__span-26-6><a href=#__codelineno-26-6 id=__codelineno-26-6 name=__codelineno-26-6></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-26-7><a href=#__codelineno-26-7 id=__codelineno-26-7 name=__codelineno-26-7></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-26-8><a href=#__codelineno-26-8 id=__codelineno-26-8 name=__codelineno-26-8></a><span class=err>Ethernet Segment Destinations</span>
</span><span id=__span-26-9><a href=#__codelineno-26-9 id=__codelineno-26-9 name=__codelineno-26-9></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-26-10><a href=#__codelineno-26-10 id=__codelineno-26-10 name=__codelineno-26-10></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-26-11><a href=#__codelineno-26-11 id=__codelineno-26-11 name=__codelineno-26-11></a><span class=err>Summary</span>
</span><span id=__span-26-12><a href=#__codelineno-26-12 id=__codelineno-26-12 name=__codelineno-26-12></a><span class=err> </span> <span class=no>0</span> <span class=err>unicast-destinations,</span> <span class=no>0</span> <span class=err>non-es,</span> <span class=no>0</span> <span class=err>es</span>
</span><span id=__span-26-13><a href=#__codelineno-26-13 id=__codelineno-26-13 name=__codelineno-26-13></a><span class=err> </span> <span class=no>0</span> <span class=err>MAC addresses,</span> <span class=no>0</span> <span class=err>active,</span> <span class=no>0</span> <span class=err>non-active</span>
</span></code></pre></div> <p>This is due to the fact that no <a href=https://datatracker.ietf.org/doc/html/rfc7432#section-7.2>MAC/IP EVPN routes</a> are being advertised yet. If we take a look at the MAC table of the <code>vrf-1</code>, we will see that no local MAC addresses are there, and this is because the servers haven't yet sent any frames towards the leafs<sup id=fnref:7><a class=footnote-ref href=#fn:7>7</a></sup>.</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-27-1><a href=#__codelineno-27-1 id=__codelineno-27-1 name=__codelineno-27-1></a>A:leaf1# <span class=n>show network-instance vrf-1 bridge-table mac-table all</span>
</span><span id=__span-27-2><a href=#__codelineno-27-2 id=__codelineno-27-2 name=__codelineno-27-2></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-27-3><a href=#__codelineno-27-3 id=__codelineno-27-3 name=__codelineno-27-3></a><span class=err>Mac-table of network instance vrf-1</span>
</span><span id=__span-27-4><a href=#__codelineno-27-4 id=__codelineno-27-4 name=__codelineno-27-4></a><span class=c>-------------------------------------------------------------------------------</span>
</span><span id=__span-27-5><a href=#__codelineno-27-5 id=__codelineno-27-5 name=__codelineno-27-5></a><span class=err>Total Irb Macs            :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-6><a href=#__codelineno-27-6 id=__codelineno-27-6 name=__codelineno-27-6></a><span class=err>Total Static Macs         :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-7><a href=#__codelineno-27-7 id=__codelineno-27-7 name=__codelineno-27-7></a><span class=err>Total Duplicate Macs      :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-8><a href=#__codelineno-27-8 id=__codelineno-27-8 name=__codelineno-27-8></a><span class=err>Total Learnt Macs         :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-9><a href=#__codelineno-27-9 id=__codelineno-27-9 name=__codelineno-27-9></a><span class=err>Total Evpn Macs           :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-10><a href=#__codelineno-27-10 id=__codelineno-27-10 name=__codelineno-27-10></a><span class=err>Total Evpn static Macs    :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-11><a href=#__codelineno-27-11 id=__codelineno-27-11 name=__codelineno-27-11></a><span class=err>Total Irb anycast Macs    :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-12><a href=#__codelineno-27-12 id=__codelineno-27-12 name=__codelineno-27-12></a><span class=err>Total Macs                :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-27-13><a href=#__codelineno-27-13 id=__codelineno-27-13 name=__codelineno-27-13></a><span class=c>-------------------------------------------------------------------------------</span>
</span></code></pre></div> <p>Let's try that ping from <code>srv1</code> towards <code>srv2</code> once again and see what happens:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-28-1><a href=#__codelineno-28-1 id=__codelineno-28-1 name=__codelineno-28-1></a>bash-5.0# ping 192.168.0.2
</span><span id=__span-28-2><a href=#__codelineno-28-2 id=__codelineno-28-2 name=__codelineno-28-2></a>PING 192.168.0.2 (192.168.0.2) 56(84) bytes of data.
</span><span id=__span-28-3><a href=#__codelineno-28-3 id=__codelineno-28-3 name=__codelineno-28-3></a>64 bytes from 192.168.0.2: icmp_seq=1 ttl=64 time=1.28 ms
</span><span id=__span-28-4><a href=#__codelineno-28-4 id=__codelineno-28-4 name=__codelineno-28-4></a>64 bytes from 192.168.0.2: icmp_seq=2 ttl=64 time=0.784 ms
</span><span id=__span-28-5><a href=#__codelineno-28-5 id=__codelineno-28-5 name=__codelineno-28-5></a>64 bytes from 192.168.0.2: icmp_seq=3 ttl=64 time=0.901 ms
</span><span id=__span-28-6><a href=#__codelineno-28-6 id=__codelineno-28-6 name=__codelineno-28-6></a>^C
</span><span id=__span-28-7><a href=#__codelineno-28-7 id=__codelineno-28-7 name=__codelineno-28-7></a>--- 192.168.0.2 ping statistics ---
</span><span id=__span-28-8><a href=#__codelineno-28-8 id=__codelineno-28-8 name=__codelineno-28-8></a>3 packets transmitted, 3 received, 0% packet loss, time 2013ms
</span><span id=__span-28-9><a href=#__codelineno-28-9 id=__codelineno-28-9 name=__codelineno-28-9></a>rtt min/avg/max/mdev = 0.784/0.986/1.275/0.209 ms
</span></code></pre></div> <p>Much better! The dataplane works and we can check that the MAC table in the <code>vrf-1</code> network-instance has been populated with local and EVPN-learned MACs:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-29-1><a href=#__codelineno-29-1 id=__codelineno-29-1 name=__codelineno-29-1></a>A:leaf1# <span class=n>show network-instance vrf-1 bridge-table mac-table all</span>
</span><span id=__span-29-2><a href=#__codelineno-29-2 id=__codelineno-29-2 name=__codelineno-29-2></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-29-3><a href=#__codelineno-29-3 id=__codelineno-29-3 name=__codelineno-29-3></a><span class=err>Mac-table of network instance vrf-1</span>
</span><span id=__span-29-4><a href=#__codelineno-29-4 id=__codelineno-29-4 name=__codelineno-29-4></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-29-5><a href=#__codelineno-29-5 id=__codelineno-29-5 name=__codelineno-29-5></a><span class=err>+-------------------+------------------------------------+-----------+-----------+--------+-------+------------------------------------+</span>
</span><span id=__span-29-6><a href=#__codelineno-29-6 id=__codelineno-29-6 name=__codelineno-29-6></a><span class=err>|      Address      |            Destination             |   Dest    |   Type    | Active | Aging |            Last Update             |</span>
</span><span id=__span-29-7><a href=#__codelineno-29-7 id=__codelineno-29-7 name=__codelineno-29-7></a><span class=err>|                   |                                    |   Index   |           |        |       |                                    |</span>
</span><span id=__span-29-8><a href=#__codelineno-29-8 id=__codelineno-29-8 name=__codelineno-29-8></a><span class=err>+===================+====================================+===========+===========+========+=======+====================================+</span>
</span><span id=__span-29-9><a href=#__codelineno-29-9 id=__codelineno-29-9 name=__codelineno-29-9></a><span class=err>| 00:C1:AB:00:00:01 | </span><span class=no>ethernet-1/1.0</span><span class=err>                     |</span> <span class=no>4</span> <span class=err>        | learnt    | </span><span class=l>true</span><span class=err>   |</span> <span class=no>240</span> <span class=err>  | 2021-07-18T14:22:55.000Z           |</span>
</span><span id=__span-29-10><a href=#__codelineno-29-10 id=__codelineno-29-10 name=__codelineno-29-10></a><span class=err>| 00:C1:AB:00:00:02 | vxlan-interface:</span><span class=no>vxlan1.1</span><span class=err>           |</span> <span class=no>160078821</span> <span class=err>| evpn      | </span><span class=l>true</span><span class=err>   | N/A   | 2021-07-18T14:22:56.000Z           |</span>
</span><span id=__span-29-11><a href=#__codelineno-29-11 id=__codelineno-29-11 name=__codelineno-29-11></a><span class=err>|                   | vtep:</span><span class=no>10.0.0.2 </span><span class=err>vni:1                |</span> <span class=no>962</span> <span class=err>      |           |        |       |                                    |</span>
</span><span id=__span-29-12><a href=#__codelineno-29-12 id=__codelineno-29-12 name=__codelineno-29-12></a><span class=err>+-------------------+------------------------------------+-----------+-----------+--------+-------+------------------------------------+</span>
</span><span id=__span-29-13><a href=#__codelineno-29-13 id=__codelineno-29-13 name=__codelineno-29-13></a><span class=err>Total Irb Macs            :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-29-14><a href=#__codelineno-29-14 id=__codelineno-29-14 name=__codelineno-29-14></a><span class=err>Total Static Macs         :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-29-15><a href=#__codelineno-29-15 id=__codelineno-29-15 name=__codelineno-29-15></a><span class=err>Total Duplicate Macs      :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-29-16><a href=#__codelineno-29-16 id=__codelineno-29-16 name=__codelineno-29-16></a><span class=err>Total Learnt Macs         :   </span> <span class=no>1</span> <span class=err>Total   </span> <span class=no>1</span> <span class=err>Active</span>
</span><span id=__span-29-17><a href=#__codelineno-29-17 id=__codelineno-29-17 name=__codelineno-29-17></a><span class=err>Total Evpn Macs           :   </span> <span class=no>1</span> <span class=err>Total   </span> <span class=no>1</span> <span class=err>Active</span>
</span><span id=__span-29-18><a href=#__codelineno-29-18 id=__codelineno-29-18 name=__codelineno-29-18></a><span class=err>Total Evpn static Macs    :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-29-19><a href=#__codelineno-29-19 id=__codelineno-29-19 name=__codelineno-29-19></a><span class=err>Total Irb anycast Macs    :   </span> <span class=no>0</span> <span class=err>Total   </span> <span class=no>0</span> <span class=err>Active</span>
</span><span id=__span-29-20><a href=#__codelineno-29-20 id=__codelineno-29-20 name=__codelineno-29-20></a><span class=err>Total Macs                :   </span> <span class=no>2</span> <span class=err>Total   </span> <span class=no>2</span> <span class=err>Active</span>
</span><span id=__span-29-21><a href=#__codelineno-29-21 id=__codelineno-29-21 name=__codelineno-29-21></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span></code></pre></div> <p>When traffic is exchanged between <code>srv1</code> and <code>srv2</code>, the MACs are learned on the access bridged sub-interfaces and advertised in <a href=https://datatracker.ietf.org/doc/html/rfc7432#section-7.2>EVPN MAC/IP routes (type 2, RT2)</a>. The MAC/IP routes are imported, and the MACs programmed in the mac-table.</p> <p>The below output shows the MAC/IP EVPN route that <code>leaf1</code> received from its neighbor. The NLRI information contains the MAC of the <code>srv2</code>:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-30-1><a href=#__codelineno-30-1 id=__codelineno-30-1 name=__codelineno-30-1></a>A:leaf1# <span class=n>show network-instance default protocols bgp routes evpn route-type 2 summary</span>
</span><span id=__span-30-2><a href=#__codelineno-30-2 id=__codelineno-30-2 name=__codelineno-30-2></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-30-3><a href=#__codelineno-30-3 id=__codelineno-30-3 name=__codelineno-30-3></a><span class=err>Show report for the BGP route table of network-instance</span><span class=l> "default"</span>
</span><span id=__span-30-4><a href=#__codelineno-30-4 id=__codelineno-30-4 name=__codelineno-30-4></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-30-5><a href=#__codelineno-30-5 id=__codelineno-30-5 name=__codelineno-30-5></a><span class=err>Status codes: u=used, *=valid, &gt;=best, x=stale</span>
</span><span id=__span-30-6><a href=#__codelineno-30-6 id=__codelineno-30-6 name=__codelineno-30-6></a><span class=err>Origin codes: i=IGP, e=EGP, ?=incomplete</span>
</span><span id=__span-30-7><a href=#__codelineno-30-7 id=__codelineno-30-7 name=__codelineno-30-7></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-30-8><a href=#__codelineno-30-8 id=__codelineno-30-8 name=__codelineno-30-8></a><span class=err>BGP Router ID: </span><span class=no>10.0.0.1 </span><span class=err>     AS:</span> <span class=no>101</span> <span class=err>     Local AS:</span> <span class=no>101</span>
</span><span id=__span-30-9><a href=#__codelineno-30-9 id=__codelineno-30-9 name=__codelineno-30-9></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-30-10><a href=#__codelineno-30-10 id=__codelineno-30-10 name=__codelineno-30-10></a><span class=err>Type</span> <span class=no>2</span> <span class=err>MAC-IP Advertisement Routes</span>
</span><span id=__span-30-11><a href=#__codelineno-30-11 id=__codelineno-30-11 name=__codelineno-30-11></a><span class=err>+-------+----------------+-----------+------------------+----------------+----------------+----------------+----------------+-------------------------------+----------------+</span>
</span><span id=__span-30-12><a href=#__codelineno-30-12 id=__codelineno-30-12 name=__codelineno-30-12></a><span class=err>| Statu |     Route-     |  Tag-ID   |   MAC-address    |   IP-address   |    neighbor    |    Next-Hop    |      VNI       |              ESI              |  MAC Mobility  |</span>
</span><span id=__span-30-13><a href=#__codelineno-30-13 id=__codelineno-30-13 name=__codelineno-30-13></a><span class=err>|   s   | distinguisher  |           |                  |                |                |                |                |                               |                |</span>
</span><span id=__span-30-14><a href=#__codelineno-30-14 id=__codelineno-30-14 name=__codelineno-30-14></a><span class=err>+=======+================+===========+==================+================+================+================+================+===============================+================+</span>
</span><span id=__span-30-15><a href=#__codelineno-30-15 id=__codelineno-30-15 name=__codelineno-30-15></a><span class=err>| u*&gt;   | 10.0.0.2:111   |</span> <span class=no>0</span> <span class=err>        | 00:C1:AB:00:00:0 | </span><span class=no>0.0.0.0 </span><span class=err>       | </span><span class=no>10.0.0.2 </span><span class=err>      | </span><span class=no>10.0.0.2 </span><span class=err>      |</span> <span class=no>1</span> <span class=err>             | </span><span class=no>00:00:00:00:00:00:00:00</span><span class=err>:00:00 | -              |</span>
</span><span id=__span-30-16><a href=#__codelineno-30-16 id=__codelineno-30-16 name=__codelineno-30-16></a><span class=err>|       |                |           |</span> <span class=no>2</span> <span class=err>               |                |                |                |                |                               |                |</span>
</span><span id=__span-30-17><a href=#__codelineno-30-17 id=__codelineno-30-17 name=__codelineno-30-17></a><span class=err>+-------+----------------+-----------+------------------+----------------+----------------+----------------+----------------+-------------------------------+----------------+</span>
</span><span id=__span-30-18><a href=#__codelineno-30-18 id=__codelineno-30-18 name=__codelineno-30-18></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-30-19><a href=#__codelineno-30-19 id=__codelineno-30-19 name=__codelineno-30-19></a><span class=no>1</span> <span class=err>MAC-IP Advertisement routes</span> <span class=no>1</span> <span class=err>used,</span> <span class=no>1</span> <span class=err>valid</span>
</span><span id=__span-30-20><a href=#__codelineno-30-20 id=__codelineno-30-20 name=__codelineno-30-20></a><span class=c>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</span></code></pre></div> <p>The MAC/IP EVPN routes also triggers the creation of the unicast tunnel destinations which were empty before:</p> <div class="language-srl highlight"><pre><span></span><code><span id=__span-31-1><a href=#__codelineno-31-1 id=__codelineno-31-1 name=__codelineno-31-1></a>A:leaf1# <span class=n>show tunnel-interface vxlan1 vxlan-interface 1 bridge-table unicast-destinations destination *</span>
</span><span id=__span-31-2><a href=#__codelineno-31-2 id=__codelineno-31-2 name=__codelineno-31-2></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-3><a href=#__codelineno-31-3 id=__codelineno-31-3 name=__codelineno-31-3></a><span class=err>Show report for vxlan-interface </span><span class=no>vxlan1.1</span><span class=err> unicast destinations</span>
</span><span id=__span-31-4><a href=#__codelineno-31-4 id=__codelineno-31-4 name=__codelineno-31-4></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-5><a href=#__codelineno-31-5 id=__codelineno-31-5 name=__codelineno-31-5></a><span class=err>Destinations</span>
</span><span id=__span-31-6><a href=#__codelineno-31-6 id=__codelineno-31-6 name=__codelineno-31-6></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-7><a href=#__codelineno-31-7 id=__codelineno-31-7 name=__codelineno-31-7></a><span class=err>+--------------+------------+-------------------+-----------------------------+</span>
</span><span id=__span-31-8><a href=#__codelineno-31-8 id=__codelineno-31-8 name=__codelineno-31-8></a><span class=err>| VTEP Address | Egress VNI | Destination-index | Number MACs (Active/</span><span class=se>Failed</span><span class=err>) |</span>
</span><span id=__span-31-9><a href=#__codelineno-31-9 id=__codelineno-31-9 name=__codelineno-31-9></a><span class=err>+==============+============+===================+=============================+</span>
</span><span id=__span-31-10><a href=#__codelineno-31-10 id=__codelineno-31-10 name=__codelineno-31-10></a><span class=err>| </span><span class=no>10.0.0.2 </span><span class=err>    |</span> <span class=no>1</span> <span class=err>         |</span> <span class=no>160078821962</span> <span class=err>     | 1</span>(<span class=no>1</span>/<span class=no>0</span><span class=err>)                      |</span>
</span><span id=__span-31-11><a href=#__codelineno-31-11 id=__codelineno-31-11 name=__codelineno-31-11></a><span class=err>+--------------+------------+-------------------+-----------------------------+</span>
</span><span id=__span-31-12><a href=#__codelineno-31-12 id=__codelineno-31-12 name=__codelineno-31-12></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-13><a href=#__codelineno-31-13 id=__codelineno-31-13 name=__codelineno-31-13></a><span class=err>Ethernet Segment Destinations</span>
</span><span id=__span-31-14><a href=#__codelineno-31-14 id=__codelineno-31-14 name=__codelineno-31-14></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-15><a href=#__codelineno-31-15 id=__codelineno-31-15 name=__codelineno-31-15></a><span class=c>---------------------------------------------------------------------------------------------------------------------------------------------</span>
</span><span id=__span-31-16><a href=#__codelineno-31-16 id=__codelineno-31-16 name=__codelineno-31-16></a><span class=err>Summary</span>
</span><span id=__span-31-17><a href=#__codelineno-31-17 id=__codelineno-31-17 name=__codelineno-31-17></a><span class=err> </span> <span class=no>1</span> <span class=err>unicast-destinations,</span> <span class=no>1</span> <span class=err>non-es,</span> <span class=no>0</span> <span class=err>es</span>
</span><span id=__span-31-18><a href=#__codelineno-31-18 id=__codelineno-31-18 name=__codelineno-31-18></a><span class=err> </span> <span class=no>1</span> <span class=err>MAC addresses,</span> <span class=no>1</span> <span class=err>active,</span> <span class=no>0</span> <span class=err>non-active</span>
</span><span id=__span-31-19><a href=#__codelineno-31-19 id=__codelineno-31-19 name=__codelineno-31-19></a><span class=c>-------------------------------------------------------------------------------</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>packet capture</p> <p><a href=https://github.com/srl-labs/learn-srlinux/blob/master/docs/tutorials/l2evpn/evpn01-macip-routes.pcapng>The following pcap</a> was captured a moment before <code>srv1</code> started to ping <code>srv2</code> on <code>leaf1</code> interface <code>e1-49</code>.</p> <p>It shows how:</p> <ol> <li>ARP frames were first exchanged using the multicast destination, </li> <li>next the first ICMP request was sent out by <code>leaf1</code> again using the BUM destination, since RT2 routes were not received yet </li> <li>and then the MAC/IP EVPN routes were exchanged triggered by the MACs being learned in the dataplane.</li> <li>after that event, the ICMP Requests and replies were using the unicast destinations, which were created after receiving the MAC/IP EVPN routes.</li> </ol> </div> <p>This concludes the verification steps, as we have a working data plane connectivity between the servers.</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p>as was verified <a href=../fabric/#dataplane>before</a>Â <a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">â†©</a></p> </li> <li id=fn:2> <p>containerlab assigns mac addresses to the interfaces with OUI <code>00:C1:AB</code>. We are changing the generated MAC with a more recognizable address, since we want to easily identify MACs in the bridge tables.Â <a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">â†©</a></p> </li> <li id=fn:3> <p>Per <a href=https://datatracker.ietf.org/doc/html/rfc8365#section-5.1.2>section 5.1.2 of RFC 8365</a>Â <a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">â†©</a></p> </li> <li id=fn:4> <p>Easily extracted with doing <code>info &lt;container&gt;</code> where <code>container</code> is <code>routing-policy</code>, <code>network-instance *</code>, <code>interface *</code>, <code>tunnel-interface *</code>Â <a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">â†©</a></p> </li> <li id=fn:5> <p>IMET routes have extended community that conveys the encapsulation type. And for VXLAN EVPN it states VXLAN encap. Check <a href=https://github.com/srl-labs/learn-srlinux/blob/master/docs/tutorials/l2evpn/evpn01-imet-routes.pcapng>pcap</a> for reference.Â <a class=footnote-backref href=#fnref:5 title="Jump back to footnote 5 in the text">â†©</a></p> </li> <li id=fn:6> <p>If the next hop is not resolved to a route in the default network-instance route-table, the index in the vxlan-tunnel table shows as â€œ0â€ for the VTEP and no tunnel-table is created.Â <a class=footnote-backref href=#fnref:6 title="Jump back to footnote 6 in the text">â†©</a></p> </li> <li id=fn:7> <p>We did try to ping from <code>srv1</code> to <code>srv2</code> in <a href=#server-interfaces>server interfaces</a> section which triggered MAC-VRF to insert a locally learned MAC into its MAC table, but since then this mac has aged out, and thus the table is empty again.Â <a class=footnote-backref href=#fnref:7 title="Jump back to footnote 7 in the text">â†©</a></p> </li> </ol> </div> <h2 id=__comments>Comments</h2> <script async crossorigin=anonymous data-category=comments data-category-id=DIC_kwDOFtXuas4CR_vG data-emit-metadata=0 data-input-position=top data-lang=en data-loading=lazy data-mapping=pathname data-reactions-enabled=1 data-repo=srl-labs/learn-srlinux data-repo-id="MDEwOlJlcG9zaXRvcnkzODMxMTg5NTQ=" data-strict=0 data-theme=preferred_color_scheme src=https://giscus.app/client.js>
</script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate" ? "dark" : "light"

                /* Instruct Giscus to change theme */
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    "https://giscus.app"
                )
            }
        })
    })
</script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Copyright and theme information --> <div class=md-copyright> <div class=md-copyright__highlight> Copyright Â© 2021-2023 Nokia </div> Made with <span class="twemoji mdx-heart"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M14 20.408c-.492.308-.903.546-1.192.709-.153.086-.308.17-.463.252h-.002a.75.75 0 0 1-.686 0 16.709 16.709 0 0 1-.465-.252 31.147 31.147 0 0 1-4.803-3.34C3.8 15.572 1 12.331 1 8.513 1 5.052 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262A31.146 31.146 0 0 1 14 20.408Z"></path></svg> </span> by <a href=https://github.com/srl-labs rel=noopener target=_blank> SR Linux team </a> </div> <div class=md-social> <a class=md-social__link href=https://discord.gg/tZvgjQ6PZf rel=noopener target=_blank title=discord.gg> <svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"></path></svg> </a> <a class=md-social__link href=https://github.com/srl-labs rel=noopener target=_blank title=github.com> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://twitter.com/ntdvps rel=noopener target=_blank title=twitter.com> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.top", "navigation.tabs", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.action.edit", "toc.follow", "content.tooltips", "navigation.indexes", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.6c7302c4.min.js", "tags": {"media": "media"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.542a4128.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>