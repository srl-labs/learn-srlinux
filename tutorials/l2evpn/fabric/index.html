<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Open documentation for open Network OS"><meta name=author content="SR Linux"><link href=https://learn.srlinux.dev/tutorials/l2evpn/fabric/ rel=canonical><link rel=icon href=../../../images/srlinux.svg><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.2.14+insiders-4.15.0"><title>Fabric configuration - Learn SR Linux</title><link rel=stylesheet href=../../../assets/stylesheets/main.65edd94d.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.96b5c56e.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=NokiaPureText:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"NokiaPureText";--md-code-font:"Fira Code"}</style><link rel=stylesheet href=../../../stylesheets/nokia.css><link rel=stylesheet href=../../../stylesheets/nokia-fonts.css><link rel=stylesheet href=../../../stylesheets/diagrams.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-VNYX781Q48"),document.addEventListener("DOMContentLoaded",function(){if(document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document.forms.feedback){var e,a=document.forms.feedback;for(e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}"undefined"!=typeof location$&&location$.subscribe(function(e){n("config","G-VNYX781Q48",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-VNYX781Q48",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Learn SR Linux - Fabric configuration"><meta property=og:description content="Open documentation for open Network OS"><meta content=https://learn.srlinux.dev/tutorials/l2evpn/fabric/ property=og:url><meta property=og:image content=https://learn.srlinux.dev/images/site-card.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><!-- Twitter card tags --><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Learn SR Linux - Fabric configuration"><meta name=twitter:description content="Open documentation for open Network OS"><meta name=twitter:image content=https://learn.srlinux.dev/images/site-card.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#leaf-spine-interfaces class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Learn SR Linux" class="md-header__button md-logo" aria-label="Learn SR Linux" data-md-component=logo> <?xml version="1.0" encoding="utf-8"?> <svg viewbox="0 0 512 512" width=512 height=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 width=512 height=512 style="fill: rgb(255, 255, 255);"/> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"/> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"/> </g> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Learn SR Linux </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Fabric configuration </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/srl-labs/learn-srlinux title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../get-started/ class=md-tabs__link> Get SR Linux </a> </li> <li class=md-tabs__item> <a href=../../../kb/hwtypes/ class=md-tabs__link> Knowledge Base </a> </li> <li class=md-tabs__item> <a href=../../about/ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../ndk/intro/ class=md-tabs__link> NDK </a> </li> <li class=md-tabs__item> <a href=../../../yang/yang/ class=md-tabs__link> YANG </a> </li> <li class=md-tabs__item> <a href=../../../community/ class=md-tabs__link> Community </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Learn SR Linux" class="md-nav__button md-logo" aria-label="Learn SR Linux" data-md-component=logo> <?xml version="1.0" encoding="utf-8"?> <svg viewbox="0 0 512 512" width=512 height=512 xmlns=http://www.w3.org/2000/svg> <rect class=st0 width=512 height=512 style="fill: rgb(255, 255, 255);"/> <g style transform="matrix(6.08856, 0, 0, 5.722229, -163.634598, -134.644638)"> <path class=st1 d="M45.2,59.4c0.9,0.6,2.2,1.1,4,1.7c1.8,0.6,3.8,0.9,6.2,0.9c2.5,0,4.3-0.5,5.5-1.5c1.2-1,1.8-2.4,1.8-4.1 c0-0.6-0.1-1.2-0.2-1.8c-0.2-0.6-0.5-1.1-0.9-1.6c-0.4-0.5-1-1-1.8-1.4c-0.8-0.4-1.7-0.8-2.9-1.1l-4.1-1.2 c-2.7-0.7-4.8-1.9-6.5-3.4c-1.6-1.5-2.4-3.6-2.4-6.2c0-1.4,0.2-2.7,0.8-3.9s1.2-2.3,2.2-3.2c1-0.9,2.2-1.7,3.7-2.2 c1.4-0.5,3.1-0.8,5-0.8c2.3,0,4.4,0.3,6.2,0.8c1.9,0.5,3.3,1.2,4.4,1.9l-1.7,3.5c-0.3-0.2-0.8-0.4-1.5-0.7 c-0.6-0.2-1.4-0.5-2.2-0.7c-0.8-0.2-1.7-0.4-2.6-0.5c-0.9-0.2-1.9-0.2-2.8-0.2c-2.2,0-4,0.5-5.2,1.5c-1.2,1-1.8,2.4-1.8,4.1 c0,1.5,0.5,2.7,1.4,3.6c0.9,0.9,2.4,1.6,4.6,2.2l4.1,1.2c2.9,0.8,5.2,2,6.7,3.5c1.5,1.5,2.2,3.7,2.2,6.4c0,1.5-0.3,2.9-0.8,4.1 s-1.3,2.3-2.3,3.2c-1,0.9-2.3,1.6-3.8,2.1c-1.5,0.5-3.2,0.7-5.1,0.7c-1.7,0-3.2-0.1-4.6-0.4c-1.4-0.3-2.6-0.6-3.6-0.9 c-1-0.3-1.9-0.7-2.5-1.1c-0.7-0.4-1.1-0.6-1.4-0.8L45.2,59.4z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M 97.5 65.4 L 92.1 65.4 L 83.7 51.2 L 78.5 51.2 L 78.5 65.4 L 74 65.4 L 74 30.3 L 84.2 30.3 C 86.4 30.3 88.2 30.6 89.6 31.3 C 91.1 32 92.2 32.8 93.1 33.9 C 94 35 94.6 36.1 95 37.3 C 95.4 38.5 95.5 39.7 95.5 40.8 C 95.5 43.3 94.9 45.4 93.6 47 C 92.3 48.6 90.5 49.8 88.2 50.6 L 97.5 65.4 Z M 83.81 47.191 C 86.21 47.191 88 46.7 89.2 45.6 C 90.4 44.4 91 42.9 91 40.8 C 91 38.8 90.4 37.2 89.2 36 C 88 34.8 86.3 34.2 84.1 34.2 L 78.6 34.2 L 78.6 47.2 L 83.8 47.2 L 83.81 47.191 Z" style="fill: rgb(0, 0, 0);"/> </g> <g style transform="matrix(5.538847, 0, 0, 5.68973, -136.858704, -157.860214)"> <path class=st1 d=M46.2,109.9h-14V85.3h3.2V107h10.7V109.9z style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M51.5,88.8c-0.6,0-1.1-0.2-1.5-0.6c-0.4-0.4-0.5-0.9-0.5-1.5c0-0.6,0.2-1.1,0.5-1.5c0.4-0.4,0.9-0.6,1.5-0.6 s1.1,0.2,1.5,0.6c0.4,0.4,0.5,0.9,0.5,1.5s-0.2,1.1-0.5,1.5C52.6,88.6,52.1,88.8,51.5,88.8z M53.1,109.9H50V92.4h3.1V109.9z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M73,109.9h-3.1V99.1c0-0.9-0.1-1.6-0.3-2.2c-0.2-0.6-0.4-1-0.8-1.4c-0.3-0.3-0.7-0.6-1.2-0.7s-0.9-0.2-1.4-0.2 c-0.9,0-1.7,0.2-2.3,0.5c-0.6,0.4-1.2,0.9-1.6,1.5c-0.4,0.6-0.7,1.3-0.9,2.1c-0.2,0.8-0.3,1.6-0.3,2.5v8.6h-3.1V92.4H61l0.1,2.4 c0.1-0.3,0.4-0.6,0.7-0.9c0.3-0.3,0.7-0.7,1.2-0.9c0.5-0.3,1-0.5,1.7-0.7s1.4-0.3,2.2-0.3c2,0,3.6,0.6,4.6,1.7s1.6,2.8,1.6,4.8 V109.9z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d="M92.7,109.9h-2.9l-0.1-2.3c-0.1,0.3-0.4,0.6-0.7,0.9c-0.3,0.3-0.7,0.6-1.2,0.9c-0.5,0.3-1,0.5-1.7,0.7 c-0.6,0.2-1.4,0.3-2.2,0.3c-2,0-3.6-0.6-4.6-1.7c-1.1-1.2-1.6-2.8-1.6-4.8V92.4H81v11c0,0.8,0.1,1.5,0.3,2.1c0.2,0.5,0.4,1,0.7,1.3 c0.3,0.3,0.7,0.6,1.1,0.7c0.4,0.1,0.9,0.2,1.5,0.2c0.9,0,1.7-0.2,2.3-0.5c0.6-0.4,1.2-0.9,1.6-1.5s0.7-1.3,0.9-2.1 c0.2-0.8,0.3-1.6,0.3-2.5v-8.6h3.1V109.9z" style="fill: rgb(0, 0, 0);"/> <path class=st1 d=M112,109.9h-3.7l-4.6-6.7l-4.6,6.7h-3.3l6.3-9l-5.9-8.5h3.7l4,5.8l4-5.8h3.3l-5.7,8.2L112,109.9z style="fill: rgb(0, 0, 0);"/> </g> </svg> </a> Learn SR Linux </label> <div class=md-nav__source> <a href=https://github.com/srl-labs/learn-srlinux title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> srl-labs/learn-srlinux </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../get-started/ class=md-nav__link> <span class=md-ellipsis> Get SR Linux </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> <span class=md-ellipsis> Knowledge Base </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Knowledge Base" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Knowledge Base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kb/hwtypes/ class=md-nav__link> <span class=md-ellipsis> Hardware types </span> </a> </li> <li class=md-nav__item> <a href=../../../kb/mgmt/ class=md-nav__link> <span class=md-ellipsis> Management interfaces </span> </a> </li> <li class=md-nav__item> <a href=../../../kb/cfgmgmt/ class=md-nav__link> <span class=md-ellipsis> Configuration management </span> </a> </li> <li class=md-nav__item> <a href=../../../kb/ifaces/ class=md-nav__link> <span class=md-ellipsis> Interfaces </span> </a> </li> <li class=md-nav__item> <a href=../../../kb/netwinstance/ class=md-nav__link> <span class=md-ellipsis> Network instances </span> </a> </li> <li class=md-nav__item> <a href=../../../kb/event-handler/ class=md-nav__link> <span class=md-ellipsis> Event Handler </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> <span class=md-ellipsis> SR Linux tutorials </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2> <span class=md-ellipsis> EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=EVPN data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_1 type=checkbox id=__nav_4_2_1 checked> <label class=md-nav__link for=__nav_4_2_1> <span class=md-ellipsis> Layer 2 EVPN </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Layer 2 EVPN" data-md-level=3> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> Layer 2 EVPN </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Fabric configuration </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Fabric configuration </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#leaf-spine-interfaces class=md-nav__link> <span class=md-ellipsis> Leaf-Spine interfaces </span> </a> </li> <li class=md-nav__item> <a href=#ebgp class=md-nav__link> <span class=md-ellipsis> EBGP </span> </a> </li> <li class=md-nav__item> <a href=#loopbacks class=md-nav__link> <span class=md-ellipsis> Loopbacks </span> </a> </li> <li class=md-nav__item> <a href=#verification class=md-nav__link> <span class=md-ellipsis> Verification </span> </a> <nav class=md-nav aria-label=Verification> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bgp-status class=md-nav__link> <span class=md-ellipsis> BGP status </span> </a> </li> <li class=md-nav__item> <a href=#bgp-neighbor-status class=md-nav__link> <span class=md-ellipsis> BGP neighbor status </span> </a> </li> <li class=md-nav__item> <a href=#receivedadvertised-routes class=md-nav__link> <span class=md-ellipsis> Received/Advertised routes </span> </a> </li> <li class=md-nav__item> <a href=#route-table class=md-nav__link> <span class=md-ellipsis> Route table </span> </a> </li> <li class=md-nav__item> <a href=#dataplane class=md-nav__link> <span class=md-ellipsis> Dataplane </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resulting-configs class=md-nav__link> <span class=md-ellipsis> Resulting configs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../evpn/ class=md-nav__link> <span class=md-ellipsis> EVPN configuration </span> </a> </li> <li class=md-nav__item> <a href=../summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> <span class=md-ellipsis> MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MPLS data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1 type=checkbox id=__nav_4_3_1> <label class=md-nav__link for=__nav_4_3_1> <span class=md-ellipsis> LDP-based MPLS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="LDP-based MPLS" data-md-level=3> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> LDP-based MPLS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/routing/ class=md-nav__link> <span class=md-ellipsis> Routing </span> </a> </li> <li class=md-nav__item> <a href=../../mpls/mpls-ldp/ldp/ class=md-nav__link> <span class=md-ellipsis> LDP </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> <span class=md-ellipsis> Programmability </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Programmability data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Programmability </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_1 type=checkbox id=__nav_4_4_1> <label class=md-nav__link for=__nav_4_4_1> <span class=md-ellipsis> Event Handler </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Event Handler" data-md-level=3> <label class=md-nav__title for=__nav_4_4_1> <span class="md-nav__icon md-icon"></span> Event Handler </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_1_1 type=checkbox id=__nav_4_4_1_1> <label class=md-nav__link for=__nav_4_4_1_1> <span class=md-ellipsis> Oper Group </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Oper Group" data-md-level=4> <label class=md-nav__title for=__nav_4_4_1_1> <span class="md-nav__icon md-icon"></span> Oper Group </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/oper-group-intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/lab/ class=md-nav__link> <span class=md-ellipsis> Lab setup </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/problem-statement/ class=md-nav__link> <span class=md-ellipsis> Problem statement </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/oper-group-cfg/ class=md-nav__link> <span class=md-ellipsis> Configuring oper-group </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/script/ class=md-nav__link> <span class=md-ellipsis> Script </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/opergroup-operation/ class=md-nav__link> <span class=md-ellipsis> Oper group in action </span> </a> </li> <li class=md-nav__item> <a href=../../programmability/event-handler/oper-group/summary/ class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> <span class=md-ellipsis> NDK </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=NDK data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> <span class=md-ellipsis> Developers Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developers Guide" data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Developers Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/architecture/ class=md-nav__link> <span class=md-ellipsis> NDK Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/agent/ class=md-nav__link> <span class=md-ellipsis> Agent Structure </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/agent-install-and-ops/ class=md-nav__link> <span class=md-ellipsis> Agent Installation & Operations </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2_4 type=checkbox id=__nav_5_2_4> <label class=md-nav__link for=__nav_5_2_4> <span class=md-ellipsis> Environment Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Environment Setup" data-md-level=3> <label class=md-nav__title for=__nav_5_2_4> <span class="md-nav__icon md-icon"></span> Environment Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/env/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/guide/env/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2_5 type=checkbox id=__nav_5_2_5> <label class=md-nav__link for=__nav_5_2_5> <span class=md-ellipsis> Developing with NDK </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developing with NDK" data-md-level=3> <label class=md-nav__title for=__nav_5_2_5> <span class="md-nav__icon md-icon"></span> Developing with NDK </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/guide/dev/go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> <span class=md-ellipsis> App Catalog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="App Catalog" data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> App Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ndk/apps/catalog/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/evpn-proxy/ class=md-nav__link> <span class=md-ellipsis> EVPN Proxy </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/kbutler/ class=md-nav__link> <span class=md-ellipsis> kButler </span> </a> </li> <li class=md-nav__item> <a href=../../../ndk/apps/srl-prom-exporter/ class=md-nav__link> <span class=md-ellipsis> Prometheus Telemetry Exporter </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> <span class=md-ellipsis> YANG </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=YANG data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> YANG </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../yang/yang/ class=md-nav__link> <span class=md-ellipsis> SR Linux & YANG </span> </a> </li> <li class=md-nav__item> <a href=../../../yang/browser/ class=md-nav__link> <span class=md-ellipsis> YANG Browser </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#leaf-spine-interfaces class=md-nav__link> <span class=md-ellipsis> Leaf-Spine interfaces </span> </a> </li> <li class=md-nav__item> <a href=#ebgp class=md-nav__link> <span class=md-ellipsis> EBGP </span> </a> </li> <li class=md-nav__item> <a href=#loopbacks class=md-nav__link> <span class=md-ellipsis> Loopbacks </span> </a> </li> <li class=md-nav__item> <a href=#verification class=md-nav__link> <span class=md-ellipsis> Verification </span> </a> <nav class=md-nav aria-label=Verification> <ul class=md-nav__list> <li class=md-nav__item> <a href=#bgp-status class=md-nav__link> <span class=md-ellipsis> BGP status </span> </a> </li> <li class=md-nav__item> <a href=#bgp-neighbor-status class=md-nav__link> <span class=md-ellipsis> BGP neighbor status </span> </a> </li> <li class=md-nav__item> <a href=#receivedadvertised-routes class=md-nav__link> <span class=md-ellipsis> Received/Advertised routes </span> </a> </li> <li class=md-nav__item> <a href=#route-table class=md-nav__link> <span class=md-ellipsis> Route table </span> </a> </li> <li class=md-nav__item> <a href=#dataplane class=md-nav__link> <span class=md-ellipsis> Dataplane </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resulting-configs class=md-nav__link> <span class=md-ellipsis> Resulting configs </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/srl-labs/learn-srlinux/edit/main/docs/tutorials/l2evpn/fabric.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1>Fabric configuration</h1> <script type=text/javascript src=https://cdn.jsdelivr.net/gh/hellt/drawio-js@main/embed2.js async></script> <p>Prior to configuring EVPN based overlay, a routing protocol needs to be deployed in the fabric to advertise the reachability of all the leaf VXLAN Termination End Point (VTEP) addresses throughout the IP fabric.</p> <p>With SR Linux, the following routing protocols can be used in the underlay:</p> <ul> <li>ISIS</li> <li>OSPF</li> <li>EBGP</li> </ul> <p>We will use a BGP based fabric design as described in <a href=https://tools.ietf.org/html/rfc7938>RFC7938</a> due to its simplicity, scalability, and ease of multi-vendor interoperability.</p> <h2 id=leaf-spine-interfaces>Leaf-Spine interfaces<a class=headerlink href=#leaf-spine-interfaces title="Permanent link">#</a></h2> <p>Let's start with configuring the IP interfaces on the inter-switch links to ensure L3 connectivity is established. According to our lab topology configuration, and using the <code>192.168.xx.0/30</code> network to address the links, we will implement the following underlay addressing design:</p> <div class=mxgraph style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;" data-mxgraph='{"page":2,"zoom":2,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}'></div> <p>On each leaf and spine we will bring up the relevant <a href=../../../kb/ifaces/ >interface</a> and address its routed <a href=../../../kb/ifaces/#subinterfaces>subinterface</a> to achieve L3 connectivity.</p> <p>We begin with connecting to the CLI of our nodes via SSH<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># connecting to leaf1</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>ssh admin@clab-evpn01-leaf1
</code></pre></div> <p>Then on each node we enter into <a href=../../../kb/cfgmgmt/#configuration-modes>candidate configuration mode</a> and proceed with the relevant interfaces configuration.</p> <p>Let's witness the step by step process of an interface configuration on a <code>leaf1</code> switch with providing the paste-ables snippets for the rest of the nodes</p> <ol> <li>Enter the <code>candidate</code> configuration mode to make edits to the configuration <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>Welcome to the srlinux CLI.
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>Type &#39;help&#39; (and press &lt;ENTER&gt;) if you need any help using this.
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>--{ running }--[  ]--
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>A:leaf1# enter candidate
</code></pre></div></li> <li>The prompt will indicate the changed active mode <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>--{ candidate shared default }--[  ]--
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>A:leaf1#                              
</code></pre></div></li> <li>Enter into the interface configuration context <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>--{ candidate shared default }--[  ]--
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>A:leaf1# interface ethernet-1/49      
</code></pre></div></li> <li>Create a subinterface under the parent interface to configure IPv4 address on it <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>--{ * candidate shared default }--[ interface ethernet-1/49 ]--
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>A:leaf1# subinterface 0                                        
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>--{ * candidate shared default }--[ interface ethernet-1/49 subinterface 0 ]--
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>A:leaf1# ipv4 address 192.168.11.1/30                                         
</code></pre></div></li> <li>Apply the configuration changes by issuing a <code>commit now</code> command. The changes will be written to the running configuration. <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>--{ * candidate shared default }--[ interface ethernet-1/49 subinterface 0 ipv4 address 192.168.11.1/30 ]--
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>A:leaf1# commit now                                                                                        
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>All changes have been committed. Leaving candidate mode.
</code></pre></div></li> </ol> <p>Below you will find the relevant configuration snippets<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup> for leafs and spine of our fabric which you can paste in the terminal while being in candidate mode.</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>leaf1</label><label for=__tabbed_1_2>leaf2</label><label for=__tabbed_1_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>interface ethernet-1/49 {
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>    subinterface 0 {
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>        ipv4 {
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>            address 192.168.11.1/30 {
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>            }
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>        }
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>    }
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>}
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>interface ethernet-1/49 {
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>    subinterface 0 {
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>        ipv4 {
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>            address 192.168.12.1/30 {
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>            }
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>        }
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>    }
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>}
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>interface ethernet-1/1 {
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>    subinterface 0 {
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>        ipv4 {
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>            address 192.168.11.2/30 {
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>            }
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>        }
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>    }
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>}
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>interface ethernet-1/2 {
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>    subinterface 0 {
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>        ipv4 {
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>            address 192.168.12.2/30 {
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>            }
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>        }
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>    }
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>}
</code></pre></div> </div> </div> </div> <p>Once those snippets are committed to the running configuration with <code>commit now</code> command, we can ensure that the changes have been applied by showing the interface status:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>--{ + running }--[  ]--                             
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>A:spine1# show interface ethernet-1/1               
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>====================================================
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>ethernet-1/1 is up, speed 10G, type None
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>  ethernet-1/1.0 is up
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>    Network-instance: 
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>    Encapsulation   : null
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>    Type            : routed
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>    IPv4 addr    : 192.168.11.2/30 (static, None)
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>----------------------------------------------------
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>====================================================
</code></pre></div> <p>At this moment, the configured interfaces can not be used as they are not yet associated with any <a href=../../../kb/netwinstance/ >network instance</a>. Below we are placing the interfaces to the network-instance <code>default</code> that is created automatically by SR Linux.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>leaf1 &amp; leaf2</label><label for=__tabbed_2_2>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>--{ + candidate shared default }--[  ]--                                                   
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>A:leaf1# network-instance default interface ethernet-1/49.0                                
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>--{ +* candidate shared default }--[ network-instance default interface ethernet-1/49.0 ]--
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>A:leaf1# commit now                                                                        
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>All changes have been committed. Leaving candidate mode.
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>--{ + candidate shared default }--[  ]--                                                  
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>A:spine1# network-instance default interface ethernet-1/1.0                               
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>--{ +* candidate shared default }--[ network-instance default interface ethernet-1/1.0 ]--
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>A:spine1# /network-instance default interface ethernet-1/2.0                              
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>--{ +* candidate shared default }--[ network-instance default interface ethernet-1/2.0 ]--
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>A:spine2# commit now                                                                      
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>All changes have been committed. Leaving candidate mode.
</code></pre></div> </div> </div> </div> <p>When interfaces are owned by the network-instance <code>default</code>, we can ensure that the basic IP connectivity is working by issuing a ping between the pair of interfaces. For example from <code>spine1</code> to <code>leaf2</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>--{ + running }--[  ]--                                     
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>A:spine1# ping 192.168.12.1 network-instance default        
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>Using network instance default
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>PING 192.168.12.1 (192.168.12.1) 56(84) bytes of data.
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>64 bytes from 192.168.12.1: icmp_seq=1 ttl=64 time=31.4 ms
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>64 bytes from 192.168.12.1: icmp_seq=2 ttl=64 time=10.0 ms
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>64 bytes from 192.168.12.1: icmp_seq=3 ttl=64 time=13.1 ms
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>64 bytes from 192.168.12.1: icmp_seq=4 ttl=64 time=16.5 ms
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>^C
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>--- 192.168.12.1 ping statistics ---
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>4 packets transmitted, 4 received, 0% packet loss, time 3003ms
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>rtt min/avg/max/mdev = 10.034/17.786/31.409/8.199 ms
</code></pre></div> <h2 id=ebgp>EBGP<a class=headerlink href=#ebgp title="Permanent link">#</a></h2> <p>Since in this exercise the design decision was to use BGP in the data center, we need to configure BGP peering between the leaf-spine pairs. For that purpose we will use EBGP protocol.</p> <p>The EBGP will make sure of advertising the VTEP IP addresses (loopbacks) across the fabric. The VXLAN VTEPs themselves will be configured later, in this step we will take care of adding the EBGP peering.</p> <p>Let's turn this diagram with the ASN/Router ID allocation into a working configuration:</p> <div class=mxgraph style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block;" data-mxgraph='{"page":3,"zoom":2,"highlight":"#0000ff","nav":true,"check-visible-state":true,"resize":true,"url":"https://raw.githubusercontent.com/srl-labs/learn-srlinux/diagrams/quickstart.drawio"}'></div> <p>Here is a breakdown of the steps that are needed to configure EBGP on <code>leaf1</code> towards <code>spine1</code>:</p> <ol> <li> <p><strong>Add BGP protocol to network-instance</strong><br> Routing protocols are configured under a network-instance context. By adding BGP protocol to the default network-instance we implicitly enable this protocol.<br> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>--{ + candidate shared default }--[  ]--       
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>A:leaf1# network-instance default protocols bgp
</code></pre></div></p> </li> <li> <p><strong>Assign Autonomous System Number</strong><br> The ASN is reported to peers when BGP speaker opens a session towards another router.<br> According to the diagram above, <code>leaf1</code> has ASN 101.<br> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>A:leaf1# autonomous-system 101
</code></pre></div></p> </li> <li> <p><strong>Assign Router ID</strong><br> This is the BGP identifier reported to peers when this network-instance opens a BGP session towards another router.<br> Leaf1 has a router-id of 10.0.0.1. <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>A:leaf1# router-id 10.0.0.1
</code></pre></div></p> </li> <li> <p><strong>Enable AF</strong><br> Enable all address families that should be enabled globally as a default for all peers of the BGP instance.<br> When you later configure individual neighbors or groups, you can override the enabled families at those levels.<br> For the sake of IPv4 loopbacks advertisement, we only need to enable <code>ipv4-unicast</code> address family: <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>A:leaf1# ipv4-unicast admin-state enable
</code></pre></div></p> </li> <li> <p><strong>Create export/import policies</strong><br> The export/import policy is required for an EBGP peer to advertise and install routes.<br> The policy named <code>all</code> that we create below will be used both as an import and export policy, effectively allowing all routes to be advertised and received<sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup>. </p> <p>The routing policies are configured at <code>/routing-policy</code> context, so first, we switch to it from the current <code>bgp</code> context: <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>--{ * candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>A:leaf1# /routing-policy                                                      
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>--{ * candidate shared default }--[ routing-policy ]--                        
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>A:leaf1#
</code></pre></div> Now that we are in the right context, we can paste the policy definition: <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>--{ +* candidate shared default }--[ routing-policy ]--
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>A:leaf1# info
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>    policy all {
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>        default-action {
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>            accept {
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>            }
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>        }
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>    }
</code></pre></div></p> </li> <li> <p><strong>Create peer-group config</strong><br> A peer group should include sessions that have a similar or almost identical configuration.<br> In this example, the peer group is named <code>eBGP-underlay</code> since it will be used to enable underlay routing between the leafs and spines.<br> New groups are administratively enabled by default.</p> <p>First, we come back to the bgp context from the routing-policy context: <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>--{ * candidate shared default }--[ routing-policy ]--
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>A:leaf1# /network-instance default protocols bgp      
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>--{ * candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>A:leaf1#
</code></pre></div> Now create the peer group. The common group configuration includes the <code>peer-as</code> and <code>export-policy</code> statements. <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>A:leaf1# group eBGP-underlay
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>--{ +* candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>A:leaf1# peer-as 201                                                                               
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>--{ +* candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>A:leaf1# export-policy all
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>--{ +* candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>A:leaf1# import-policy all
</code></pre></div></p> </li> <li> <p><strong>Configure neighbor</strong><br> Configure the BGP session with <code>spine1</code>. In this example, <code>spine1</code> is reachable through the <code>ethernet-1/49.0</code> subinterface. On this subnet, <code>spine1</code> has the IPv4 address <code>192.168.11.2</code>.<br> In this minimal configuration example, the only required configuration for the neighbor is its association with the group <code>eBGP-underlay</code> that was previously created.<br> New neighbors are administratively enabled by default. <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>A:leaf1# neighbor 192.168.11.2 peer-group eBGP-underlay
</code></pre></div></p> </li> <li> <p><strong>Commit configuration</strong><br> It seems like the EBGP config has been sorted out. Let's see what we have in our candidate datastore so far.<br> Regardless of which context you are currently in, you can see the diff against the baseline config by doing <code>diff /</code> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>--{ * candidate shared default }--[ network-instance default protocols bgp group eBGP-underlay ]--
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>A:leaf1# diff /                                                                                   
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>    network-instance default {
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>        protocols {
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>+             bgp {
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>+                 autonomous-system 101
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>+                 router-id 10.0.0.1
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>+                 group eBGP-underlay {
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>+                     export-policy all
<a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a>+                     import-policy all
<a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>+                     peer-as 201
<a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a>+                 }
<a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a>+                 ipv4-unicast {
<a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a>+                     admin-state enable
<a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a>+                 }
<a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a>+                 neighbor 192.168.11.2 {
<a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a>+                     peer-group eBGP-underlay
<a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a>+                 }
<a id=__codelineno-22-19 name=__codelineno-22-19 href=#__codelineno-22-19></a>+             }
<a id=__codelineno-22-20 name=__codelineno-22-20 href=#__codelineno-22-20></a>        }
<a id=__codelineno-22-21 name=__codelineno-22-21 href=#__codelineno-22-21></a>    }
<a id=__codelineno-22-22 name=__codelineno-22-22 href=#__codelineno-22-22></a>+     routing-policy {
<a id=__codelineno-22-23 name=__codelineno-22-23 href=#__codelineno-22-23></a>+         policy all {
<a id=__codelineno-22-24 name=__codelineno-22-24 href=#__codelineno-22-24></a>+             default-action {
<a id=__codelineno-22-25 name=__codelineno-22-25 href=#__codelineno-22-25></a>+                 accept {
<a id=__codelineno-22-26 name=__codelineno-22-26 href=#__codelineno-22-26></a>+                 }
<a id=__codelineno-22-27 name=__codelineno-22-27 href=#__codelineno-22-27></a>+             }
<a id=__codelineno-22-28 name=__codelineno-22-28 href=#__codelineno-22-28></a>+         }
<a id=__codelineno-22-29 name=__codelineno-22-29 href=#__codelineno-22-29></a>+     }
</code></pre></div> That is what we've added in all those steps above, everything looks OK, so we are good to commit the configuration. <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>--{ +* candidate shared default }--[ network-instance default protocols bgp ]--
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>A:leaf1# commit now
</code></pre></div></p> </li> </ol> <p>EBGP configuration on <code>leaf2</code> and <code>spine1</code> is almost a twin of the one we did for <code>leaf1</code>. Here is a copy-paste-able<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup> config snippets for all of the nodes:</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:3><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><input id=__tabbed_3_3 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>leaf1</label><label for=__tabbed_3_2>leaf2</label><label for=__tabbed_3_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>network-instance default {
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>    protocols {
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>        bgp {
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>            autonomous-system 101
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>            router-id 10.0.0.1
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>            group eBGP-underlay {
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>                export-policy all
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>                import-policy all
<a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>                peer-as 201
<a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a>            }
<a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>            ipv4-unicast {
<a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a>                admin-state enable
<a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>            }
<a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a>            neighbor 192.168.11.2 {
<a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a>                peer-group eBGP-underlay
<a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a>            }
<a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a>        }
<a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a>    }
<a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a>}
<a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a>routing-policy {
<a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a>    policy all {
<a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a>        default-action {
<a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a>            accept {
<a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a>            }
<a id=__codelineno-24-25 name=__codelineno-24-25 href=#__codelineno-24-25></a>        }
<a id=__codelineno-24-26 name=__codelineno-24-26 href=#__codelineno-24-26></a>    }
<a id=__codelineno-24-27 name=__codelineno-24-27 href=#__codelineno-24-27></a>}
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>network-instance default {
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>    protocols {
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>        bgp {
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>            autonomous-system 102
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>            router-id 10.0.0.2
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>            group eBGP-underlay {
<a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>                export-policy all
<a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>                import-policy all
<a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a>                peer-as 201
<a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a>            }
<a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a>            ipv4-unicast {
<a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a>                admin-state enable
<a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a>            }
<a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a>            neighbor 192.168.12.2 {
<a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a>                peer-group eBGP-underlay
<a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a>            }
<a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a>        }
<a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a>    }
<a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a>}
<a id=__codelineno-25-20 name=__codelineno-25-20 href=#__codelineno-25-20></a>routing-policy {
<a id=__codelineno-25-21 name=__codelineno-25-21 href=#__codelineno-25-21></a>    policy all {
<a id=__codelineno-25-22 name=__codelineno-25-22 href=#__codelineno-25-22></a>        default-action {
<a id=__codelineno-25-23 name=__codelineno-25-23 href=#__codelineno-25-23></a>            accept {
<a id=__codelineno-25-24 name=__codelineno-25-24 href=#__codelineno-25-24></a>            }
<a id=__codelineno-25-25 name=__codelineno-25-25 href=#__codelineno-25-25></a>        }
<a id=__codelineno-25-26 name=__codelineno-25-26 href=#__codelineno-25-26></a>    }
<a id=__codelineno-25-27 name=__codelineno-25-27 href=#__codelineno-25-27></a>}
</code></pre></div> </div> <div class=tabbed-block> <p>Spine configuration is a bit different, in a way that <code>peer-as</code> is specified under the neighbor context, and not the group one. <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>network-instance default {
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>    protocols {
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>        bgp {
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>            autonomous-system 201
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>            router-id 10.0.1.1
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>            group eBGP-underlay {
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>                export-policy all
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>                import-policy all
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>            }
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>            ipv4-unicast {
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>                admin-state enable
<a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>            }
<a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>            neighbor 192.168.11.1 {
<a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a>                peer-group eBGP-underlay
<a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a>                peer-as 101
<a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a>            }
<a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a>            neighbor 192.168.12.1 {
<a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a>                peer-group eBGP-underlay
<a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a>                peer-as 102
<a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a>            }
<a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a>        }
<a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a>    }
<a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a>}
<a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a>routing-policy {
<a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a>    policy all {
<a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a>        default-action {
<a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a>            accept {
<a id=__codelineno-26-28 name=__codelineno-26-28 href=#__codelineno-26-28></a>            }
<a id=__codelineno-26-29 name=__codelineno-26-29 href=#__codelineno-26-29></a>        }
<a id=__codelineno-26-30 name=__codelineno-26-30 href=#__codelineno-26-30></a>    }
<a id=__codelineno-26-31 name=__codelineno-26-31 href=#__codelineno-26-31></a>}
</code></pre></div></p> </div> </div> </div> <h2 id=loopbacks>Loopbacks<a class=headerlink href=#loopbacks title="Permanent link">#</a></h2> <p>As we will create a IBGP based EVPN control plane at a later stage, we need to configure loopback addresses for our leaf devices so that they can build an IBGP peering over those interfaces.</p> <p>In the context of the VXLAN data plane, a special kind of a loopback needs to be created - <a href=../../../kb/ifaces/#system><code>system0</code></a> interface.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The <code>system0.0</code> interface hosts the loopback address used to originate and typically terminate VXLAN packets. This address is also used by default as the next-hop of all EVPN routes.</p> </div> <p>Configuration of the <code>system0</code> interface is exactly the same as for the regular interfaces. The IPv4 addresses we assign to <code>system0</code> interfaces will match the Router-ID of a given BGP speaker.</p> <div class="tabbed-set tabbed-alternate" data-tabs=4:3><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><input id=__tabbed_4_3 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>leaf1</label><label for=__tabbed_4_2>leaf2</label><label for=__tabbed_4_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>/interface system0 {
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>    admin-state enable
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>    subinterface 0 {
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>        ipv4 {
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>            address 10.0.0.1/32 {
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>            }
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>        }
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>    }
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>}
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>/network-instance default {
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>    interface system0.0 {
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>    }
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>}
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>/interface system0 {
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>    admin-state enable
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>    subinterface 0 {
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>        ipv4 {
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>            address 10.0.0.2/32 {
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>            }
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>        }
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>    }
<a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a>}
<a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>/network-instance default {
<a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a>    interface system0.0 {
<a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>    }
<a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>}
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>/interface system0 {
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>    admin-state enable
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>    subinterface 0 {
<a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>        ipv4 {
<a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>            address 10.0.1.1/32 {
<a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>            }
<a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>        }
<a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>    }
<a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a>}
<a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a>/network-instance default {
<a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a>    interface system0.0 {
<a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a>    }
<a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>}
</code></pre></div> </div> </div> </div> <h2 id=verification>Verification<a class=headerlink href=#verification title="Permanent link">#</a></h2> <p>As stated in the beginning of this section, the VXLAN VTEPs need to be advertised throughout the DC fabric. The <code>system0</code> interfaces we just configured are the VTEPs and they should be advertised via EBGP peering established before. The following verification commands can help ensure that.</p> <h3 id=bgp-status>BGP status<a class=headerlink href=#bgp-status title="Permanent link">#</a></h3> <p>The first thing worth verifying is that BGP protocol is enabled and operational on all devices. Below is an example of a BGP summary command issued on <code>leaf1</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1></a><a href=#__codelineno-30-1><span class=linenos data-linenos=" 1 "></span></a>--{ + running }--[  ]--
<a id=__codelineno-30-2 name=__codelineno-30-2></a><a href=#__codelineno-30-2><span class=linenos data-linenos=" 2 "></span></a>A:leaf1# show network-instance default protocols bgp summary
<a id=__codelineno-30-3 name=__codelineno-30-3></a><a href=#__codelineno-30-3><span class=linenos data-linenos=" 3 "></span></a>-------------------------------------------------------------
<a id=__codelineno-30-4 name=__codelineno-30-4></a><a href=#__codelineno-30-4><span class=linenos data-linenos=" 4 "></span></a>BGP is enabled and up in network-instance &quot;default&quot;
<a id=__codelineno-30-5 name=__codelineno-30-5></a><a href=#__codelineno-30-5><span class=linenos data-linenos=" 5 "></span></a>Global AS number  : 101
<a id=__codelineno-30-6 name=__codelineno-30-6></a><a href=#__codelineno-30-6><span class=linenos data-linenos=" 6 "></span></a>BGP identifier    : 10.0.0.1
<a id=__codelineno-30-7 name=__codelineno-30-7></a><a href=#__codelineno-30-7><span class=linenos data-linenos=" 7 "></span></a>-------------------------------------------------------------
<a id=__codelineno-30-8 name=__codelineno-30-8></a><a href=#__codelineno-30-8><span class=linenos data-linenos=" 8 "></span></a>  Total paths               : 3
<a id=__codelineno-30-9 name=__codelineno-30-9></a><a href=#__codelineno-30-9><span class=linenos data-linenos=" 9 "></span></a>  Received routes           : 3
<a id=__codelineno-30-10 name=__codelineno-30-10></a><a href=#__codelineno-30-10><span class=linenos data-linenos="10 "></span></a>  Received and active routes: None
<a id=__codelineno-30-11 name=__codelineno-30-11></a><a href=#__codelineno-30-11><span class=linenos data-linenos="11 "></span></a>  Total UP peers            : 1
<a id=__codelineno-30-12 name=__codelineno-30-12></a><a href=#__codelineno-30-12><span class=linenos data-linenos="12 "></span></a>  Configured peers          : 1, 0 are disabled
<a id=__codelineno-30-13 name=__codelineno-30-13></a><a href=#__codelineno-30-13><span class=linenos data-linenos="13 "></span></a>  Dynamic peers             : None
<a id=__codelineno-30-14 name=__codelineno-30-14></a><a href=#__codelineno-30-14><span class=linenos data-linenos="14 "></span></a>-------------------------------------------------------------
<a id=__codelineno-30-15 name=__codelineno-30-15></a><a href=#__codelineno-30-15><span class=linenos data-linenos="15 "></span></a>Default preferences
<a id=__codelineno-30-16 name=__codelineno-30-16></a><a href=#__codelineno-30-16><span class=linenos data-linenos="16 "></span></a>  BGP Local Preference attribute: 100
<a id=__codelineno-30-17 name=__codelineno-30-17></a><a href=#__codelineno-30-17><span class=linenos data-linenos="17 "></span></a>  EBGP route-table preference   : 170
<a id=__codelineno-30-18 name=__codelineno-30-18></a><a href=#__codelineno-30-18><span class=linenos data-linenos="18 "></span></a>  IBGP route-table preference   : 170
<a id=__codelineno-30-19 name=__codelineno-30-19></a><a href=#__codelineno-30-19><span class=linenos data-linenos="19 "></span></a>-------------------------------------------------------------
<a id=__codelineno-30-20 name=__codelineno-30-20></a><a href=#__codelineno-30-20><span class=linenos data-linenos="20 "></span></a>Wait for FIB install to advertise: True
<a id=__codelineno-30-21 name=__codelineno-30-21></a><a href=#__codelineno-30-21><span class=linenos data-linenos="21 "></span></a>Send rapid withdrawals           : disabled
<a id=__codelineno-30-22 name=__codelineno-30-22></a><a href=#__codelineno-30-22><span class=linenos data-linenos="22 "></span></a>-------------------------------------------------------------
<a id=__codelineno-30-23 name=__codelineno-30-23></a><a href=#__codelineno-30-23><span class=linenos data-linenos="23 "></span></a>Ipv4-unicast AFI/SAFI
<a id=__codelineno-30-24 name=__codelineno-30-24></a><a href=#__codelineno-30-24><span class=linenos data-linenos="24 "></span></a>    Received routes               : 3
<a id=__codelineno-30-25 name=__codelineno-30-25></a><a href=#__codelineno-30-25><span class=linenos data-linenos="25 "></span></a>    Received and active routes    : None
<a id=__codelineno-30-26 name=__codelineno-30-26></a><a href=#__codelineno-30-26><span class=linenos data-linenos="26 "></span></a>    Max number of multipaths      : 1, 1
<a id=__codelineno-30-27 name=__codelineno-30-27></a><a href=#__codelineno-30-27><span class=linenos data-linenos="27 "></span></a>    Multipath can transit multi AS: True
<a id=__codelineno-30-28 name=__codelineno-30-28></a><a href=#__codelineno-30-28><span class=linenos data-linenos="28 "></span></a>-------------------------------------------------------------
<a id=__codelineno-30-29 name=__codelineno-30-29></a><a href=#__codelineno-30-29><span class=linenos data-linenos="29 "></span></a>Ipv6-unicast AFI/SAFI
<a id=__codelineno-30-30 name=__codelineno-30-30></a><a href=#__codelineno-30-30><span class=linenos data-linenos="30 "></span></a>    Received routes               : None
<a id=__codelineno-30-31 name=__codelineno-30-31></a><a href=#__codelineno-30-31><span class=linenos data-linenos="31 "></span></a>    Received and active routes    : None
<a id=__codelineno-30-32 name=__codelineno-30-32></a><a href=#__codelineno-30-32><span class=linenos data-linenos="32 "></span></a>    Max number of multipaths      : 1,1
<a id=__codelineno-30-33 name=__codelineno-30-33></a><a href=#__codelineno-30-33><span class=linenos data-linenos="33 "></span></a>    Multipath can transit multi AS: True
<a id=__codelineno-30-34 name=__codelineno-30-34></a><a href=#__codelineno-30-34><span class=linenos data-linenos="34 "></span></a>-------------------------------------------------------------
<a id=__codelineno-30-35 name=__codelineno-30-35></a><a href=#__codelineno-30-35><span class=linenos data-linenos="35 "></span></a>EVPN-unicast AFI/SAFI
<a id=__codelineno-30-36 name=__codelineno-30-36></a><a href=#__codelineno-30-36><span class=linenos data-linenos="36 "></span></a>    Received routes               : None
<a id=__codelineno-30-37 name=__codelineno-30-37></a><a href=#__codelineno-30-37><span class=linenos data-linenos="37 "></span></a>    Received and active routes    : None
<a id=__codelineno-30-38 name=__codelineno-30-38></a><a href=#__codelineno-30-38><span class=linenos data-linenos="38 "></span></a>    Max number of multipaths      : N/A
<a id=__codelineno-30-39 name=__codelineno-30-39></a><a href=#__codelineno-30-39><span class=linenos data-linenos="39 "></span></a>    Multipath can transit multi AS: N/A
<a id=__codelineno-30-40 name=__codelineno-30-40></a><a href=#__codelineno-30-40><span class=linenos data-linenos="40 "></span></a>-------------------------------------------------------------
</code></pre></div> <h3 id=bgp-neighbor-status>BGP neighbor status<a class=headerlink href=#bgp-neighbor-status title="Permanent link">#</a></h3> <p>Equally important is the neighbor summary status that we can observe with the following:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a>--{ + running }--[  ]--
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>A:spine1# show network-instance default protocols bgp neighbor
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>----------------------------------------------------------------------------------------------------------------------------------------------
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>BGP neighbor summary for network-instance &quot;default&quot;
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>Flags: S static, D dynamic, L discovered by LLDP, B BFD enabled, - disabled, * slow
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>----------------------------------------------------------------------------------------------------------------------------------------------
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>----------------------------------------------------------------------------------------------------------------------------------------------
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>+----------------+-----------------------+----------------+------+---------+-------------+-------------+-----------+-----------------------+
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a>|    Net-Inst    |         Peer          |     Group      | Flag | Peer-AS |    State    |   Uptime    | AFI/SAFI  |    [Rx/Active/Tx]     |
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>|                |                       |                |  s   |         |             |             |           |                       |
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>+================+=======================+================+======+=========+=============+=============+===========+=======================+
<a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>| default        | 192.168.11.1          | eBGP-underlay  | S    | 101     | established | 0d:18h:20m: | ipv4-unic | [2/1/4]               |
<a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>|                |                       |                |      |         |             | 49s         | ast       |                       |
<a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>| default        | 192.168.12.1          | eBGP-underlay  | S    | 102     | established | 0d:18h:20m: | ipv4-unic | [2/1/4]               |
<a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a>|                |                       |                |      |         |             | 9s          | ast       |                       |
<a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a>+----------------+-----------------------+----------------+------+---------+-------------+-------------+-----------+-----------------------+
<a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a>----------------------------------------------------------------------------------------------------------------------------------------------
<a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a>Summary:
<a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a>2 configured neighbors, 2 configured sessions are established,0 disabled peers
<a id=__codelineno-31-20 name=__codelineno-31-20 href=#__codelineno-31-20></a>0 dynamic peers
</code></pre></div> <p>With this command we can ensure that the ipv4-unicast routes are exchanged between the BGP peers and all the sessions are in established state.</p> <h3 id=receivedadvertised-routes>Received/Advertised routes<a class=headerlink href=#receivedadvertised-routes title="Permanent link">#</a></h3> <p>The reason we configured EBGP in the fabric's the underlay is to advertise the VXLAN tunnel endpoints - <code>system0</code> interfaces. In the below output we verify that <code>leaf1</code> advertises the prefix of <code>system0</code> (<code>10.0.0.1/32</code>) interface towards its EBGP <code>spine1</code> peer: <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>--{ + running }--[  ]--
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>A:leaf1# show network-instance default protocols bgp neighbor 192.168.11.2 advertised-rou
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>tes ipv4
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>-----------------------------------------------------------------------------------------
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>Peer        : 192.168.11.2, remote AS: 201, local AS: 101
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>Type        : static
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>Description : None
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a>Group       : eBGP-underlay
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>-----------------------------------------------------------------------------------------
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>Origin codes: i=IGP, e=EGP, ?=incomplete
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>+-------------------------------------------------------------------------------------+
<a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>|    Network        Next Hop       MED     LocPref           AsPath           Origin  |
<a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>+=====================================================================================+
<a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>| 10.0.0.1/32      192.168.11.      -        100     [101]                       i    |
<a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a>|                  1                                                                  |
<a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a>| 192.168.11.0/3   192.168.11.      -        100     [101]                       i    |
<a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a>| 0                1                                                                  |
<a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a>+-------------------------------------------------------------------------------------+
<a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a>-----------------------------------------------------------------------------------------
<a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a>2 advertised BGP routes
<a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a>-----------------------------------------------------------------------------------------
</code></pre></div></p> <p>On the far end of the fabric, <code>leaf2</code> receives both the <code>leaf1</code> and <code>spine1</code> system interface prefixes:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a>--{ + running }--[  ]--
<a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>A:leaf2# show network-instance default protocols bgp neighbor 192.168.12.2 received-route
<a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>s ipv4
<a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>-----------------------------------------------------------------------------------------
<a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>Peer        : 192.168.12.2, remote AS: 201, local AS: 102
<a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>Type        : static
<a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>Description : None
<a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>Group       : eBGP-underlay
<a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>-----------------------------------------------------------------------------------------
<a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>Status codes: u=used, *=valid, &gt;=best, x=stale
<a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>Origin codes: i=IGP, e=EGP, ?=incomplete
<a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>+-----------------------------------------------------------------------------------+
<a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>|  Status      Network    Next Hop       MED       LocPref     AsPath      Origin   |
<a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a>+===================================================================================+
<a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>|    u*&gt;      10.0.0.1/   192.168.1       -          100      [201,           i     |
<a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a>|             32          2.2                                 101]                  |
<a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a>|    u*&gt;      10.0.1.1/   192.168.1       -          100      [201]           i     |
<a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a>|             32          2.2                                                       |
<a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a>|    u*&gt;      192.168.1   192.168.1       -          100      [201]           i     |
<a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a>|             1.0/30      2.2                                                       |
<a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a>|     *       192.168.1   192.168.1       -          100      [201]           i     |
<a id=__codelineno-33-22 name=__codelineno-33-22 href=#__codelineno-33-22></a>|             2.0/30      2.2                                                       |
<a id=__codelineno-33-23 name=__codelineno-33-23 href=#__codelineno-33-23></a>+-----------------------------------------------------------------------------------+
<a id=__codelineno-33-24 name=__codelineno-33-24 href=#__codelineno-33-24></a>-----------------------------------------------------------------------------------------
<a id=__codelineno-33-25 name=__codelineno-33-25 href=#__codelineno-33-25></a>4 received BGP routes : 3 used 4 valid
<a id=__codelineno-33-26 name=__codelineno-33-26 href=#__codelineno-33-26></a>-----------------------------------------------------------------------------------------
</code></pre></div> <h3 id=route-table>Route table<a class=headerlink href=#route-table title="Permanent link">#</a></h3> <p>The last stop in the control plane verification ride would be to check if the remote loopback prefixes were installed in the <code>default</code> network-instance where we expect them to be:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1></a><a href=#__codelineno-34-1><span class=linenos data-linenos=" 1 "></span></a>--{ running }--[  ]--
<a id=__codelineno-34-2 name=__codelineno-34-2></a><a href=#__codelineno-34-2><span class=linenos data-linenos=" 2 "></span></a>A:leaf1# show network-instance default route-table ipv4-unicast summary
<a id=__codelineno-34-3 name=__codelineno-34-3></a><a href=#__codelineno-34-3><span class=linenos data-linenos=" 3 "></span></a>-----------------------------------------------------------------------------------------------------------------------------------
<a id=__codelineno-34-4 name=__codelineno-34-4></a><a href=#__codelineno-34-4><span class=linenos data-linenos=" 4 "></span></a>IPv4 Unicast route table of network instance default
<a id=__codelineno-34-5 name=__codelineno-34-5></a><a href=#__codelineno-34-5><span class=linenos data-linenos=" 5 "></span></a>-----------------------------------------------------------------------------------------------------------------------------------
<a id=__codelineno-34-6 name=__codelineno-34-6></a><a href=#__codelineno-34-6><span class=linenos data-linenos=" 6 "></span></a>+-----------------+-------+------------+----------------------+----------------------+----------+---------+-----------+-----------+
<a id=__codelineno-34-7 name=__codelineno-34-7></a><a href=#__codelineno-34-7><span class=linenos data-linenos=" 7 "></span></a>|     Prefix      |  ID   | Route Type |     Route Owner      |      Best/Fib-       |  Metric  |  Pref   | Next-hop  | Next-hop  |
<a id=__codelineno-34-8 name=__codelineno-34-8></a><a href=#__codelineno-34-8><span class=linenos data-linenos=" 8 "></span></a>|                 |       |            |                      |     status(slot)     |          |         |  (Type)   | Interface |
<a id=__codelineno-34-9 name=__codelineno-34-9></a><a href=#__codelineno-34-9><span class=linenos data-linenos=" 9 "></span></a>+=================+=======+============+======================+======================+==========+=========+===========+===========+
<a id=__codelineno-34-10 name=__codelineno-34-10></a><a href=#__codelineno-34-10><span class=linenos data-linenos="10 "></span></a>| 10.0.0.1/32     | 3     | host       | net_inst_mgr         | True/success         | 0        | 0       | None      | None      |
<a id=__codelineno-34-11 name=__codelineno-34-11></a><a href=#__codelineno-34-11><span class=linenos data-linenos="11 "></span></a>|                 |       |            |                      |                      |          |         | (extract) |           |
<a id=__codelineno-34-12 name=__codelineno-34-12></a><span class=hll><a href=#__codelineno-34-12><span class=linenos data-linenos="12 "></span></a>| 10.0.0.2/32     | 0     | bgp        | bgp_mgr              | True/success         | 0        | 170     | 192.168.1 | None      |
</span><a id=__codelineno-34-13 name=__codelineno-34-13></a><a href=#__codelineno-34-13><span class=linenos data-linenos="13 "></span></a>|                 |       |            |                      |                      |          |         | 1.2 (indi |           |
<a id=__codelineno-34-14 name=__codelineno-34-14></a><a href=#__codelineno-34-14><span class=linenos data-linenos="14 "></span></a>|                 |       |            |                      |                      |          |         | rect)     |           |
<a id=__codelineno-34-15 name=__codelineno-34-15></a><span class=hll><a href=#__codelineno-34-15><span class=linenos data-linenos="15 "></span></a>| 10.0.1.1/32     | 0     | bgp        | bgp_mgr              | True/success         | 0        | 170     | 192.168.1 | None      |
</span><a id=__codelineno-34-16 name=__codelineno-34-16></a><a href=#__codelineno-34-16><span class=linenos data-linenos="16 "></span></a>|                 |       |            |                      |                      |          |         | 1.2 (indi |           |
<a id=__codelineno-34-17 name=__codelineno-34-17></a><a href=#__codelineno-34-17><span class=linenos data-linenos="17 "></span></a>|                 |       |            |                      |                      |          |         | rect)     |           |
<a id=__codelineno-34-18 name=__codelineno-34-18></a><a href=#__codelineno-34-18><span class=linenos data-linenos="18 "></span></a>| 192.168.11.0/30 | 1     | local      | net_inst_mgr         | True/success         | 0        | 0       | 192.168.1 | ethernet- |
<a id=__codelineno-34-19 name=__codelineno-34-19></a><a href=#__codelineno-34-19><span class=linenos data-linenos="19 "></span></a>|                 |       |            |                      |                      |          |         | 1.1       | 1/49.0    |
<a id=__codelineno-34-20 name=__codelineno-34-20></a><a href=#__codelineno-34-20><span class=linenos data-linenos="20 "></span></a>|                 |       |            |                      |                      |          |         | (direct)  |           |
<a id=__codelineno-34-21 name=__codelineno-34-21></a><a href=#__codelineno-34-21><span class=linenos data-linenos="21 "></span></a>| 192.168.11.1/32 | 1     | host       | net_inst_mgr         | True/success         | 0        | 0       | None      | None      |
<a id=__codelineno-34-22 name=__codelineno-34-22></a><a href=#__codelineno-34-22><span class=linenos data-linenos="22 "></span></a>|                 |       |            |                      |                      |          |         | (extract) |           |
<a id=__codelineno-34-23 name=__codelineno-34-23></a><a href=#__codelineno-34-23><span class=linenos data-linenos="23 "></span></a>| 192.168.11.3/32 | 1     | host       | net_inst_mgr         | True/success         | 0        | 0       | None (bro | None      |
<a id=__codelineno-34-24 name=__codelineno-34-24></a><a href=#__codelineno-34-24><span class=linenos data-linenos="24 "></span></a>|                 |       |            |                      |                      |          |         | adcast)   |           |
<a id=__codelineno-34-25 name=__codelineno-34-25></a><a href=#__codelineno-34-25><span class=linenos data-linenos="25 "></span></a>| 192.168.12.0/30 | 0     | bgp        | bgp_mgr              | True/success         | 0        | 170     | 192.168.1 | None      |
<a id=__codelineno-34-26 name=__codelineno-34-26></a><a href=#__codelineno-34-26><span class=linenos data-linenos="26 "></span></a>|                 |       |            |                      |                      |          |         | 1.2 (indi |           |
<a id=__codelineno-34-27 name=__codelineno-34-27></a><a href=#__codelineno-34-27><span class=linenos data-linenos="27 "></span></a>|                 |       |            |                      |                      |          |         | rect)     |           |
<a id=__codelineno-34-28 name=__codelineno-34-28></a><a href=#__codelineno-34-28><span class=linenos data-linenos="28 "></span></a>+-----------------+-------+------------+----------------------+----------------------+----------+---------+-----------+-----------+
<a id=__codelineno-34-29 name=__codelineno-34-29></a><a href=#__codelineno-34-29><span class=linenos data-linenos="29 "></span></a>-----------------------------------------------------------------------------------------------------------------------------------
<a id=__codelineno-34-30 name=__codelineno-34-30></a><a href=#__codelineno-34-30><span class=linenos data-linenos="30 "></span></a>7 IPv4 routes total
<a id=__codelineno-34-31 name=__codelineno-34-31></a><a href=#__codelineno-34-31><span class=linenos data-linenos="31 "></span></a>7 IPv4 prefixes with active routes
<a id=__codelineno-34-32 name=__codelineno-34-32></a><a href=#__codelineno-34-32><span class=linenos data-linenos="32 "></span></a>0 IPv4 prefixes with active ECMP routes
<a id=__codelineno-34-33 name=__codelineno-34-33></a><a href=#__codelineno-34-33><span class=linenos data-linenos="33 "></span></a>-----------------------------------------------------------------------------------------------------------------------------------
</code></pre></div> <p>Both <code>leaf2</code> and <code>spine1</code> prefixes are found in the route table of network-instance <code>default</code> and the <code>bgp_mgr</code> is the owner of those prefixes, which means that they have been added to the route-table by the BGP app.</p> <h3 id=dataplane>Dataplane<a class=headerlink href=#dataplane title="Permanent link">#</a></h3> <p>To finish the verification process let's ensure that the datapath is indeed working, and the VTEPs on both leafs can reach each other via the routed fabric underlay.</p> <p>For that we will use the <code>ping</code> command with src/dst set to loopback addresses:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a>--{ running }--[  ]--
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>A:leaf1# ping -I 10.0.0.1 network-instance default 10.0.0.2
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>Using network instance default
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a>PING 10.0.0.2 (10.0.0.2) from 10.0.0.1 : 56(84) bytes of data.
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>64 bytes from 10.0.0.2: icmp_seq=1 ttl=63 time=17.5 ms
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>64 bytes from 10.0.0.2: icmp_seq=2 ttl=63 time=12.2 ms
</code></pre></div> <p>Perfect, the VTEPs are reachable and the fabric underlay is properly configured. We can proceed with EVPN service configuration!</p> <h2 id=resulting-configs>Resulting configs<a class=headerlink href=#resulting-configs title="Permanent link">#</a></h2> <p>Below you will find aggregated configuration snippets which contain the entire fabric configuration we did in the steps above. Those snippets are in the <em>flat</em> format and were extracted with <code>info flat</code> command.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>enter candidate</code> and <code>commit now</code> commands are part of the snippets, so it is possible to paste them right after you logged into the devices as well as the changes will get committed to running config.</p> </div> <div class="tabbed-set tabbed-alternate" data-tabs=5:3><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><input id=__tabbed_5_3 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>leaf1</label><label for=__tabbed_5_2>leaf2</label><label for=__tabbed_5_3>spine1</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a>enter candidate
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a># configuration of the physical interface and its subinterface
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>set / interface ethernet-1/49
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>set / interface ethernet-1/49 subinterface 0
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a>set / interface ethernet-1/49 subinterface 0 ipv4
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>set / interface ethernet-1/49 subinterface 0 ipv4 address 192.168.11.1/30
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a># system interface configuration
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>set / interface system0
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>set / interface system0 admin-state enable
<a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a>set / interface system0 subinterface 0
<a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>set / interface system0 subinterface 0 ipv4
<a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>set / interface system0 subinterface 0 ipv4 address 10.0.0.1/32
<a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a>
<a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a># associating interfaces with net-ins default
<a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a>set / network-instance default
<a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a>set / network-instance default interface ethernet-1/49.0
<a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a>set / network-instance default interface system0.0
<a id=__codelineno-36-20 name=__codelineno-36-20 href=#__codelineno-36-20></a>
<a id=__codelineno-36-21 name=__codelineno-36-21 href=#__codelineno-36-21></a># routing policy
<a id=__codelineno-36-22 name=__codelineno-36-22 href=#__codelineno-36-22></a>set / routing-policy
<a id=__codelineno-36-23 name=__codelineno-36-23 href=#__codelineno-36-23></a>set / routing-policy policy all
<a id=__codelineno-36-24 name=__codelineno-36-24 href=#__codelineno-36-24></a>set / routing-policy policy all default-action
<a id=__codelineno-36-25 name=__codelineno-36-25 href=#__codelineno-36-25></a>set / routing-policy policy all default-action accept
<a id=__codelineno-36-26 name=__codelineno-36-26 href=#__codelineno-36-26></a>
<a id=__codelineno-36-27 name=__codelineno-36-27 href=#__codelineno-36-27></a># BGP configuration
<a id=__codelineno-36-28 name=__codelineno-36-28 href=#__codelineno-36-28></a>set / network-instance default protocols
<a id=__codelineno-36-29 name=__codelineno-36-29 href=#__codelineno-36-29></a>set / network-instance default protocols bgp
<a id=__codelineno-36-30 name=__codelineno-36-30 href=#__codelineno-36-30></a>set / network-instance default protocols bgp autonomous-system 101
<a id=__codelineno-36-31 name=__codelineno-36-31 href=#__codelineno-36-31></a>set / network-instance default protocols bgp router-id 10.0.0.1
<a id=__codelineno-36-32 name=__codelineno-36-32 href=#__codelineno-36-32></a>set / network-instance default protocols bgp group eBGP-underlay
<a id=__codelineno-36-33 name=__codelineno-36-33 href=#__codelineno-36-33></a>set / network-instance default protocols bgp group eBGP-underlay export-policy all
<a id=__codelineno-36-34 name=__codelineno-36-34 href=#__codelineno-36-34></a>set / network-instance default protocols bgp group eBGP-underlay import-policy all
<a id=__codelineno-36-35 name=__codelineno-36-35 href=#__codelineno-36-35></a>set / network-instance default protocols bgp group eBGP-underlay peer-as 201
<a id=__codelineno-36-36 name=__codelineno-36-36 href=#__codelineno-36-36></a>set / network-instance default protocols bgp ipv4-unicast
<a id=__codelineno-36-37 name=__codelineno-36-37 href=#__codelineno-36-37></a>set / network-instance default protocols bgp ipv4-unicast admin-state enable
<a id=__codelineno-36-38 name=__codelineno-36-38 href=#__codelineno-36-38></a>set / network-instance default protocols bgp neighbor 192.168.11.2
<a id=__codelineno-36-39 name=__codelineno-36-39 href=#__codelineno-36-39></a>set / network-instance default protocols bgp neighbor 192.168.11.2 peer-group eBGP-underlay
<a id=__codelineno-36-40 name=__codelineno-36-40 href=#__codelineno-36-40></a>
<a id=__codelineno-36-41 name=__codelineno-36-41 href=#__codelineno-36-41></a>commit now
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a>enter candidate
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a># configuration of the physical interface and its subinterface
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>set / interface ethernet-1/49
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>set / interface ethernet-1/49 subinterface 0
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>set / interface ethernet-1/49 subinterface 0 ipv4
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>set / interface ethernet-1/49 subinterface 0 ipv4 address 192.168.12.1/30
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>
<a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a># system interface configuration
<a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>set / interface system0
<a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>set / interface system0 admin-state enable
<a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>set / interface system0 subinterface 0
<a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>set / interface system0 subinterface 0 ipv4
<a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>set / interface system0 subinterface 0 ipv4 address 10.0.0.2/32
<a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>
<a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a># associating interfaces with net-ins default
<a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a>set / network-instance default
<a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a>set / network-instance default interface ethernet-1/49.0
<a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a>set / network-instance default interface system0.0
<a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a>
<a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a># routing policy
<a id=__codelineno-37-22 name=__codelineno-37-22 href=#__codelineno-37-22></a>set / routing-policy
<a id=__codelineno-37-23 name=__codelineno-37-23 href=#__codelineno-37-23></a>set / routing-policy policy all
<a id=__codelineno-37-24 name=__codelineno-37-24 href=#__codelineno-37-24></a>set / routing-policy policy all default-action
<a id=__codelineno-37-25 name=__codelineno-37-25 href=#__codelineno-37-25></a>set / routing-policy policy all default-action accept
<a id=__codelineno-37-26 name=__codelineno-37-26 href=#__codelineno-37-26></a>
<a id=__codelineno-37-27 name=__codelineno-37-27 href=#__codelineno-37-27></a># BGP configuration
<a id=__codelineno-37-28 name=__codelineno-37-28 href=#__codelineno-37-28></a>set / network-instance default protocols
<a id=__codelineno-37-29 name=__codelineno-37-29 href=#__codelineno-37-29></a>set / network-instance default protocols bgp
<a id=__codelineno-37-30 name=__codelineno-37-30 href=#__codelineno-37-30></a>set / network-instance default protocols bgp autonomous-system 102
<a id=__codelineno-37-31 name=__codelineno-37-31 href=#__codelineno-37-31></a>set / network-instance default protocols bgp router-id 10.0.0.2
<a id=__codelineno-37-32 name=__codelineno-37-32 href=#__codelineno-37-32></a>set / network-instance default protocols bgp group eBGP-underlay
<a id=__codelineno-37-33 name=__codelineno-37-33 href=#__codelineno-37-33></a>set / network-instance default protocols bgp group eBGP-underlay export-policy all
<a id=__codelineno-37-34 name=__codelineno-37-34 href=#__codelineno-37-34></a>set / network-instance default protocols bgp group eBGP-underlay import-policy all
<a id=__codelineno-37-35 name=__codelineno-37-35 href=#__codelineno-37-35></a>set / network-instance default protocols bgp group eBGP-underlay peer-as 201
<a id=__codelineno-37-36 name=__codelineno-37-36 href=#__codelineno-37-36></a>set / network-instance default protocols bgp ipv4-unicast
<a id=__codelineno-37-37 name=__codelineno-37-37 href=#__codelineno-37-37></a>set / network-instance default protocols bgp ipv4-unicast admin-state enable
<a id=__codelineno-37-38 name=__codelineno-37-38 href=#__codelineno-37-38></a>set / network-instance default protocols bgp neighbor 192.168.12.2
<a id=__codelineno-37-39 name=__codelineno-37-39 href=#__codelineno-37-39></a>set / network-instance default protocols bgp neighbor 192.168.12.2 peer-group eBGP-underlay
<a id=__codelineno-37-40 name=__codelineno-37-40 href=#__codelineno-37-40></a>
<a id=__codelineno-37-41 name=__codelineno-37-41 href=#__codelineno-37-41></a>commit now
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>enter candidate
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a># configuration of the physical interface and its subinterface
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>set / interface ethernet-1/1
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a>set / interface ethernet-1/1 subinterface 0
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>set / interface ethernet-1/1 subinterface 0 ipv4
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>set / interface ethernet-1/1 subinterface 0 ipv4 address 192.168.11.2/30
<a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a>set / interface ethernet-1/2
<a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a>set / interface ethernet-1/2 subinterface 0
<a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>set / interface ethernet-1/2 subinterface 0 ipv4
<a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>set / interface ethernet-1/2 subinterface 0 ipv4 address 192.168.12.2/30
<a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>
<a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a># system interface configuration
<a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a>set / interface system0
<a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>set / interface system0 admin-state enable
<a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a>set / interface system0 subinterface 0
<a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a>set / interface system0 subinterface 0 ipv4
<a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a>set / interface system0 subinterface 0 ipv4 address 10.0.1.1/32
<a id=__codelineno-38-19 name=__codelineno-38-19 href=#__codelineno-38-19></a>
<a id=__codelineno-38-20 name=__codelineno-38-20 href=#__codelineno-38-20></a># associating interfaces with net-ins default
<a id=__codelineno-38-21 name=__codelineno-38-21 href=#__codelineno-38-21></a>set / network-instance default
<a id=__codelineno-38-22 name=__codelineno-38-22 href=#__codelineno-38-22></a>set / network-instance default interface ethernet-1/1.0
<a id=__codelineno-38-23 name=__codelineno-38-23 href=#__codelineno-38-23></a>set / network-instance default interface ethernet-1/2.0
<a id=__codelineno-38-24 name=__codelineno-38-24 href=#__codelineno-38-24></a>set / network-instance default interface system0.0
<a id=__codelineno-38-25 name=__codelineno-38-25 href=#__codelineno-38-25></a>
<a id=__codelineno-38-26 name=__codelineno-38-26 href=#__codelineno-38-26></a># routing policy
<a id=__codelineno-38-27 name=__codelineno-38-27 href=#__codelineno-38-27></a>set / routing-policy
<a id=__codelineno-38-28 name=__codelineno-38-28 href=#__codelineno-38-28></a>set / routing-policy policy all
<a id=__codelineno-38-29 name=__codelineno-38-29 href=#__codelineno-38-29></a>set / routing-policy policy all default-action
<a id=__codelineno-38-30 name=__codelineno-38-30 href=#__codelineno-38-30></a>set / routing-policy policy all default-action accept
<a id=__codelineno-38-31 name=__codelineno-38-31 href=#__codelineno-38-31></a>
<a id=__codelineno-38-32 name=__codelineno-38-32 href=#__codelineno-38-32></a># BGP configuration
<a id=__codelineno-38-33 name=__codelineno-38-33 href=#__codelineno-38-33></a>set / network-instance default protocols
<a id=__codelineno-38-34 name=__codelineno-38-34 href=#__codelineno-38-34></a>set / network-instance default protocols bgp
<a id=__codelineno-38-35 name=__codelineno-38-35 href=#__codelineno-38-35></a>set / network-instance default protocols bgp autonomous-system 201
<a id=__codelineno-38-36 name=__codelineno-38-36 href=#__codelineno-38-36></a>set / network-instance default protocols bgp router-id 10.0.1.1
<a id=__codelineno-38-37 name=__codelineno-38-37 href=#__codelineno-38-37></a>set / network-instance default protocols bgp group eBGP-underlay
<a id=__codelineno-38-38 name=__codelineno-38-38 href=#__codelineno-38-38></a>set / network-instance default protocols bgp group eBGP-underlay export-policy all
<a id=__codelineno-38-39 name=__codelineno-38-39 href=#__codelineno-38-39></a>set / network-instance default protocols bgp group eBGP-underlay import-policy all
<a id=__codelineno-38-40 name=__codelineno-38-40 href=#__codelineno-38-40></a>set / network-instance default protocols bgp ipv4-unicast
<a id=__codelineno-38-41 name=__codelineno-38-41 href=#__codelineno-38-41></a>set / network-instance default protocols bgp ipv4-unicast admin-state enable
<a id=__codelineno-38-42 name=__codelineno-38-42 href=#__codelineno-38-42></a>set / network-instance default protocols bgp neighbor 192.168.11.1
<a id=__codelineno-38-43 name=__codelineno-38-43 href=#__codelineno-38-43></a>set / network-instance default protocols bgp neighbor 192.168.11.1 peer-as 101
<a id=__codelineno-38-44 name=__codelineno-38-44 href=#__codelineno-38-44></a>set / network-instance default protocols bgp neighbor 192.168.11.1 peer-group eBGP-underlay
<a id=__codelineno-38-45 name=__codelineno-38-45 href=#__codelineno-38-45></a>set / network-instance default protocols bgp neighbor 192.168.12.1
<a id=__codelineno-38-46 name=__codelineno-38-46 href=#__codelineno-38-46></a>set / network-instance default protocols bgp neighbor 192.168.12.1 peer-as 102
<a id=__codelineno-38-47 name=__codelineno-38-47 href=#__codelineno-38-47></a>set / network-instance default protocols bgp neighbor 192.168.12.1 peer-group eBGP-underlay
<a id=__codelineno-38-48 name=__codelineno-38-48 href=#__codelineno-38-48></a>
<a id=__codelineno-38-49 name=__codelineno-38-49 href=#__codelineno-38-49></a>commit now
</code></pre></div> </div> </div> </div> <div class=footnote> <hr> <ol> <li id=fn:1> <p>default SR Linux credentials are <code>admin:admin</code>.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p>the snippets were extracted with <code>info interface ethernet-1/x</code> command issued in running mode.&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> <li id=fn:3> <p>you can paste those snippets right after you do <code>enter candidate</code>&#160;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">&#8617;</a></p> </li> <li id=fn:4> <p>a more practical import/export policy would only export/import the loopback prefixes from leaf nodes. The spine nodes would export/import only the bgp-owned routes, as services are not typically present on the spines.&#160;<a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> </div> <a href=# class="md-top md-top--hidden md-icon" data-md-component=top> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../intro/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Introduction </div> </div> </a> <a href=../evpn/ class="md-footer__link md-footer__link--next" aria-label="Next: EVPN configuration" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> EVPN configuration </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021 Nokia </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs Insiders </a> </div> <div class=md-social> <a href=https://discord.gg/tZvgjQ6PZf target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://github.com/srl-labs target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/ntdvps target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.top", "navigation.instant", "navigation.tracking", "navigation.tabs", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.ec8bae80.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.06523198.min.js></script> </body> </html>